{"timestamp":"2025-07-07T14:02:05.718Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:05.720Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:05.721Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:05.723Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:05.726Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:05.727Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:05.729Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:05.730Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:05.732Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:05.733Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:05.735Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:05.736Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:05.737Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:05.738Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:05.739Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:05.740Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:05.740Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:05.741Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:05.742Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:05.749Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:02:05.750Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:05.752Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:02:05.753Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:02:05.754Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:02:05.757Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:02:05.758Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:05.759Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:02:05.761Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:02:05.762Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:05.764Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:02:05.765Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:02:05.766Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:02:05.767Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:05.768Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:02:05.769Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:05.770Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:02:05.771Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:02:05.772Z","level":"DEBUG","message":"Current balance before update","data":{"total":9703198,"available":9638074,"used":65124,"transactionCount":175}}
{"timestamp":"2025-07-07T14:02:05.773Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:05.774Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:02:05.775Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9706948,"newAvailable":9641824,"newUsed":65124}}
{"timestamp":"2025-07-07T14:02:05.776Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9706948,"available":9641824,"used":65124,"transactionCount":176}}}
{"timestamp":"2025-07-07T14:02:05.777Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9703198,"available":9638074,"used":65124,"transactionCount":175}}}
{"timestamp":"2025-07-07T14:02:05.779Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9706948,"available":9641824,"used":65124,"transactionCount":176}}}
{"timestamp":"2025-07-07T14:02:05.781Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:05.798Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:02:05.782Z"}}
{"timestamp":"2025-07-07T14:02:34.065Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:34.067Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:34.069Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:34.070Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:34.073Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:34.074Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:34.077Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:34.079Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:34.080Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:34.081Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:34.084Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:34.085Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:34.087Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:34.088Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:34.089Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:34.090Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:34.091Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:34.092Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:34.094Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:34.101Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:02:34.102Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:34.103Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:02:34.104Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:02:34.105Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:02:34.107Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:02:34.108Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:34.109Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:02:34.110Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:02:34.112Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:34.113Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:02:34.115Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:02:34.116Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:02:34.117Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:34.118Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:02:34.119Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:34.120Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:02:34.121Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:02:34.123Z","level":"DEBUG","message":"Current balance before update","data":{"total":9706948,"available":9641824,"used":65124,"transactionCount":176}}
{"timestamp":"2025-07-07T14:02:34.124Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:34.125Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:02:34.126Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9710698,"newAvailable":9645574,"newUsed":65124}}
{"timestamp":"2025-07-07T14:02:34.128Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9710698,"available":9645574,"used":65124,"transactionCount":177}}}
{"timestamp":"2025-07-07T14:02:34.130Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9706948,"available":9641824,"used":65124,"transactionCount":176}}}
{"timestamp":"2025-07-07T14:02:34.131Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9710698,"available":9645574,"used":65124,"transactionCount":177}}}
{"timestamp":"2025-07-07T14:02:34.134Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:34.150Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:02:34.135Z"}}
{"timestamp":"2025-07-07T14:02:37.273Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:37.275Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:37.277Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:37.279Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:37.281Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:37.283Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:37.285Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:37.286Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:37.287Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:37.289Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:37.291Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:37.293Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:37.295Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:37.296Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:37.297Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:37.299Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:37.300Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:37.301Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:37.302Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:37.308Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:02:37.309Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:37.311Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:02:37.313Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:02:37.314Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:02:37.316Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:02:37.317Z","level":"DEBUG","message":"Current balance before update","data":{"total":9710698,"available":9645574,"used":65124,"transactionCount":177}}
{"timestamp":"2025-07-07T14:02:37.319Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:37.320Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:02:37.321Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9710698,"newAvailable":9645574,"newUsed":65124}}
{"timestamp":"2025-07-07T14:02:37.322Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9710698,"available":9645574,"used":65124,"transactionCount":178}}}
{"timestamp":"2025-07-07T14:02:37.324Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9710698,"available":9645574,"used":65124,"transactionCount":177}}}
{"timestamp":"2025-07-07T14:02:37.325Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9710698,"available":9645574,"used":65124,"transactionCount":178}}}
{"timestamp":"2025-07-07T14:02:37.328Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:39.239Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:39.245Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:39.248Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:39.251Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:39.258Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:39.260Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:39.264Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:39.265Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:39.267Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:39.270Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:39.275Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:39.278Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:39.282Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:39.283Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:39.285Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:39.286Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:39.287Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:39.288Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:39.288Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:39.297Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_jp_vip","market":"JP"}}
{"timestamp":"2025-07-07T14:02:39.299Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:02:39.301Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_jp_vip","tier":"VIP_DIAMOND","isVIP":true,"isBirthMonth":false,"recyclingBottles":12}}
{"timestamp":"2025-07-07T14:02:39.302Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_jp_vip","hasData":true}}
{"timestamp":"2025-07-07T14:02:39.302Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_jp_vip","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":false,"market":"JP","recycledCount":12}}
{"timestamp":"2025-07-07T14:02:39.303Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:02:39.305Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:39.306Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:02:39.308Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:02:39.309Z","level":"DEBUG","message":"Current balance before update","data":{"total":98600,"available":87601,"used":10999,"transactionCount":39}}
{"timestamp":"2025-07-07T14:02:39.310Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:39.311Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:02:39.312Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":98750,"newAvailable":87751,"newUsed":10999}}
{"timestamp":"2025-07-07T14:02:39.313Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_jp_vip","balanceData":{"total":98750,"available":87751,"used":10999,"transactionCount":40}}}
{"timestamp":"2025-07-07T14:02:39.314Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_jp_vip","oldBalance":{"total":98600,"available":87601,"used":10999,"transactionCount":39}}}
{"timestamp":"2025-07-07T14:02:39.315Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_jp_vip","newBalance":{"total":98750,"available":87751,"used":10999,"transactionCount":40}}}
{"timestamp":"2025-07-07T14:02:39.317Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:02:52.559Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:52.562Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:52.563Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:52.565Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:52.567Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:52.568Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:52.571Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:52.573Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:52.574Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:52.575Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:52.578Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:52.580Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:52.581Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:52.582Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:52.583Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:52.583Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:52.584Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:52.585Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:52.586Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:52.595Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_jp_vip_001","market":"JP"}}
{"timestamp":"2025-07-07T14:02:52.596Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_jp_vip_001"}}
{"timestamp":"2025-07-07T14:02:52.597Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_jp_vip_001","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:02:52.598Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_jp_vip_001","hasData":true}}
{"timestamp":"2025-07-07T14:02:52.599Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_jp_vip_001","eventType":"PURCHASE","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:02:52.600Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:02:52.601Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":1000,"discountedAmount":1000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:52.601Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":100}}
{"timestamp":"2025-07-07T14:02:52.602Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:02:52.603Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":1000,"discountedAmount":1000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:52.604Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":50}}
{"timestamp":"2025-07-07T14:02:52.605Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:02:52.606Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:02:52.607Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:52.607Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:02:52.608Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":150,"newAvailable":150,"newUsed":0}}
{"timestamp":"2025-07-07T14:02:52.609Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_jp_vip_001","balanceData":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:02:52.610Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_jp_vip_001","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:02:52.612Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_jp_vip_001","newBalance":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:02:52.614Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_jp_vip_001"}}
{"timestamp":"2025-07-07T14:02:52.634Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_jp_vip_001","timestamp":"2025-07-07T14:02:52.614Z"}}
{"timestamp":"2025-07-07T14:03:35.196Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:03:35.200Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:03:35.202Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:03:35.204Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:03:35.207Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:03:35.208Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:03:35.211Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:03:35.212Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:03:35.213Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:03:35.214Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:03:35.217Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:03:35.218Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:03:35.219Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:03:35.220Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:03:35.221Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:03:35.222Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:03:35.223Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:03:35.224Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:03:35.225Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:03:35.233Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:03:35.234Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:03:35.237Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:03:35.239Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:03:35.240Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:03:35.243Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:03:35.244Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:03:35.245Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:03:35.247Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:03:35.249Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:03:35.250Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:03:35.251Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:03:35.253Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:03:35.254Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:03:35.255Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:03:35.256Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:03:35.258Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:03:35.259Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:03:35.260Z","level":"DEBUG","message":"Current balance before update","data":{"total":9710698,"available":9645574,"used":65124,"transactionCount":178}}
{"timestamp":"2025-07-07T14:03:35.261Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:03:35.262Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:03:35.262Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9714448,"newAvailable":9649324,"newUsed":65124}}
{"timestamp":"2025-07-07T14:03:35.263Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9714448,"available":9649324,"used":65124,"transactionCount":179}}}
{"timestamp":"2025-07-07T14:03:35.264Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9710698,"available":9645574,"used":65124,"transactionCount":178}}}
{"timestamp":"2025-07-07T14:03:35.265Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9714448,"available":9649324,"used":65124,"transactionCount":179}}}
{"timestamp":"2025-07-07T14:03:35.267Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:03:35.289Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:03:35.268Z"}}
{"timestamp":"2025-07-07T14:04:32.102Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:04:32.106Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:04:32.107Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:04:32.108Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:04:32.111Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:04:32.112Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:04:32.114Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:04:32.115Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:04:32.116Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:04:32.117Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:04:32.119Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:04:32.119Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:04:32.120Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:04:32.121Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:04:32.122Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:04:32.123Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:04:32.123Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:04:32.124Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:04:32.125Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:04:32.130Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:04:32.131Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:04:32.132Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:04:32.133Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:04:32.134Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:04:32.137Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:04:32.138Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:04:32.140Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:04:32.142Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:04:32.143Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:04:32.144Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:04:32.145Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:04:32.146Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:04:32.147Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:04:32.147Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:04:32.148Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:04:32.148Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:04:32.149Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:04:32.150Z","level":"DEBUG","message":"Current balance before update","data":{"total":9714448,"available":9649324,"used":65124,"transactionCount":179}}
{"timestamp":"2025-07-07T14:04:32.151Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:04:32.152Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:04:32.152Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9718198,"newAvailable":9653074,"newUsed":65124}}
{"timestamp":"2025-07-07T14:04:32.153Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9718198,"available":9653074,"used":65124,"transactionCount":180}}}
{"timestamp":"2025-07-07T14:04:32.154Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9714448,"available":9649324,"used":65124,"transactionCount":179}}}
{"timestamp":"2025-07-07T14:04:32.155Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9718198,"available":9653074,"used":65124,"transactionCount":180}}}
{"timestamp":"2025-07-07T14:04:32.157Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:04:32.175Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:04:32.158Z"}}
{"timestamp":"2025-07-07T14:07:10.865Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:07:10.868Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:07:10.870Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:07:10.871Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:07:10.875Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:07:10.876Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:07:10.879Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:07:10.880Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:07:10.881Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:07:10.882Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:07:10.885Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:07:10.886Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:07:10.887Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:07:10.888Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:07:10.889Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:07:10.890Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:07:10.890Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:07:10.891Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:07:10.892Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:07:10.897Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:07:10.898Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:07:10.900Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:07:10.901Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:07:10.902Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:07:10.903Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:07:10.904Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:07:10.904Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:07:10.905Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:07:10.906Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:07:10.906Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:07:10.907Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:07:10.908Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:07:10.909Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:07:10.910Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:07:10.910Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:07:10.911Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:07:10.912Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:07:10.913Z","level":"DEBUG","message":"Current balance before update","data":{"total":9718198,"available":9653074,"used":65124,"transactionCount":180}}
{"timestamp":"2025-07-07T14:07:10.913Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:07:10.914Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:07:10.915Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9721948,"newAvailable":9656824,"newUsed":65124}}
{"timestamp":"2025-07-07T14:07:10.916Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9721948,"available":9656824,"used":65124,"transactionCount":181}}}
{"timestamp":"2025-07-07T14:07:10.918Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9718198,"available":9653074,"used":65124,"transactionCount":180}}}
{"timestamp":"2025-07-07T14:07:10.919Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9721948,"available":9656824,"used":65124,"transactionCount":181}}}
{"timestamp":"2025-07-07T14:07:10.921Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:07:10.939Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:07:10.921Z"}}
{"timestamp":"2025-07-07T14:15:11.471Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:15:11.473Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:15:11.474Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:15:11.474Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:15:11.477Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:15:11.477Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:15:11.479Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:15:11.479Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:15:11.480Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:15:11.481Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:15:11.482Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:15:11.483Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:15:11.483Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:15:11.484Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:15:11.485Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:15:11.486Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:15:11.486Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:15:11.487Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:15:11.487Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:15:11.492Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"123456","market":"JP"}}
{"timestamp":"2025-07-07T14:15:11.493Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"123456"}}
{"timestamp":"2025-07-07T14:15:11.494Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"123456","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:15:11.495Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"123456","hasData":true}}
{"timestamp":"2025-07-07T14:15:11.496Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"123456","eventType":"PURCHASE","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:15:11.499Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:15:11.500Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:15:11.501Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-07T14:15:11.503Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:15:11.504Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:15:11.505Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":0}}
{"timestamp":"2025-07-07T14:15:11.506Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:15:11.507Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:15:11.508Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:15:11.509Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:15:11.509Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":0,"newAvailable":0,"newUsed":0}}
{"timestamp":"2025-07-07T14:15:11.510Z","level":"DEBUG","message":"New balance to update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:15:11.510Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"123456","balanceData":{"total":0,"available":0,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:15:11.511Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"123456","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:15:11.512Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"123456","newBalance":{"total":0,"available":0,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:15:11.514Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"123456"}}
{"timestamp":"2025-07-07T14:15:11.531Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"123456","timestamp":"2025-07-07T14:15:11.514Z"}}
{"timestamp":"2025-07-07T14:16:10.753Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:16:10.754Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:16:10.755Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:16:10.756Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:16:10.758Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:10.759Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:10.760Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:16:10.761Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:16:10.762Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:16:10.763Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:16:10.765Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:10.765Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:10.766Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:10.766Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:16:10.767Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:10.768Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:10.769Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:16:10.770Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:16:10.770Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:10.776Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:16:10.776Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:16:10.778Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:16:10.778Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:16:10.779Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:16:10.780Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:16:10.781Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:10.782Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:16:10.783Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:16:10.783Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:10.784Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:16:10.785Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:16:10.786Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:16:10.786Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:10.787Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:16:10.788Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:10.789Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:16:10.789Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:16:10.790Z","level":"DEBUG","message":"Current balance before update","data":{"total":9721948,"available":9656824,"used":65124,"transactionCount":181}}
{"timestamp":"2025-07-07T14:16:10.791Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:16:10.792Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:16:10.793Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9725698,"newAvailable":9660574,"newUsed":65124}}
{"timestamp":"2025-07-07T14:16:10.794Z","level":"DEBUG","message":"New balance to update","data":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}
{"timestamp":"2025-07-07T14:16:10.794Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}}
{"timestamp":"2025-07-07T14:16:10.795Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9721948,"available":9656824,"used":65124,"transactionCount":181}}}
{"timestamp":"2025-07-07T14:16:10.796Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}}
{"timestamp":"2025-07-07T14:16:10.798Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:16:10.814Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:16:10.798Z"}}
{"timestamp":"2025-07-07T14:16:14.218Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:16:14.220Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:16:14.220Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:16:14.221Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:16:14.222Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:14.223Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:14.225Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:16:14.225Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:16:14.227Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:16:14.227Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:16:14.229Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:14.229Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:14.230Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:14.231Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:16:14.231Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:14.232Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:14.232Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:16:14.233Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:16:14.234Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:14.238Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:16:14.239Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:16:14.240Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:16:14.241Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:16:14.242Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:16:14.243Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:16:14.244Z","level":"DEBUG","message":"Current balance before update","data":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}
{"timestamp":"2025-07-07T14:16:14.245Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:16:14.245Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:16:14.246Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9725698,"newAvailable":9660574,"newUsed":65124}}
{"timestamp":"2025-07-07T14:16:14.247Z","level":"DEBUG","message":"New balance to update","data":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}
{"timestamp":"2025-07-07T14:16:14.247Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}}
{"timestamp":"2025-07-07T14:16:14.248Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}}
{"timestamp":"2025-07-07T14:16:14.249Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}}
{"timestamp":"2025-07-07T14:16:14.251Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:16:17.836Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:16:17.837Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:16:17.838Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:16:17.840Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:16:17.842Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:17.843Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:17.845Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:16:17.846Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:16:17.847Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:16:17.848Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:16:17.850Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:17.851Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:17.852Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:17.853Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:16:17.853Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:17.854Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:17.855Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:16:17.856Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:16:17.858Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:17.863Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_jp_vip","market":"JP"}}
{"timestamp":"2025-07-07T14:16:17.864Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:16:17.865Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_jp_vip","tier":"VIP_DIAMOND","isVIP":true,"isBirthMonth":false,"recyclingBottles":12}}
{"timestamp":"2025-07-07T14:16:17.866Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_jp_vip","hasData":true}}
{"timestamp":"2025-07-07T14:16:17.866Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_jp_vip","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":false,"market":"JP","recycledCount":12}}
{"timestamp":"2025-07-07T14:16:17.867Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:16:17.868Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:17.869Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:16:17.870Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:16:17.871Z","level":"DEBUG","message":"Current balance before update","data":{"total":98750,"available":87751,"used":10999,"transactionCount":40}}
{"timestamp":"2025-07-07T14:16:17.872Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:16:17.873Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:16:17.874Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":98900,"newAvailable":87901,"newUsed":10999}}
{"timestamp":"2025-07-07T14:16:17.874Z","level":"DEBUG","message":"New balance to update","data":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}
{"timestamp":"2025-07-07T14:16:17.875Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_jp_vip","balanceData":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}}
{"timestamp":"2025-07-07T14:16:17.876Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_jp_vip","oldBalance":{"total":98750,"available":87751,"used":10999,"transactionCount":40}}}
{"timestamp":"2025-07-07T14:16:17.876Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_jp_vip","newBalance":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}}
{"timestamp":"2025-07-07T14:16:17.878Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:20:18.307Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:20:18.309Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:20:18.310Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:20:18.311Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:20:18.313Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:20:18.313Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:20:18.315Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:20:18.316Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:20:18.317Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:20:18.317Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:20:18.319Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:20:18.320Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:20:18.321Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:20:18.322Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:20:18.322Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:20:18.323Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:20:18.324Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:20:18.325Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:20:18.325Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:20:18.331Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"789012","market":"JP"}}
{"timestamp":"2025-07-07T14:20:18.332Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"789012"}}
{"timestamp":"2025-07-07T14:20:18.333Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"789012","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:20:18.334Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"789012","hasData":true}}
{"timestamp":"2025-07-07T14:20:18.334Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"789012","eventType":"PURCHASE","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:20:18.335Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:20:18.336Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:18.337Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-07T14:20:18.338Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:20:18.339Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:18.340Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":0}}
{"timestamp":"2025-07-07T14:20:18.341Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:20:18.341Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:20:18.342Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:20:18.343Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:20:18.344Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":0,"newAvailable":0,"newUsed":0}}
{"timestamp":"2025-07-07T14:20:18.345Z","level":"DEBUG","message":"New balance to update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:20:18.346Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"789012","balanceData":{"total":0,"available":0,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:20:18.348Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"789012","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:20:18.348Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"789012","newBalance":{"total":0,"available":0,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:20:18.351Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"789012"}}
{"timestamp":"2025-07-07T14:20:18.369Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"789012","timestamp":"2025-07-07T14:20:18.352Z"}}
{"timestamp":"2025-07-07T14:20:58.594Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:20:58.596Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:20:58.597Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:20:58.598Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:20:58.599Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:20:58.600Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:20:58.602Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:20:58.602Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:20:58.603Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:20:58.604Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:20:58.605Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:20:58.606Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:20:58.606Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:20:58.607Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:20:58.608Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:20:58.608Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:20:58.609Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:20:58.609Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:20:58.611Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:20:58.615Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:20:58.616Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:20:58.617Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:20:58.618Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:20:58.618Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:20:58.619Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:20:58.621Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:58.621Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:20:58.622Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:20:58.623Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:58.624Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:20:58.625Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:20:58.626Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:20:58.627Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:58.628Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:20:58.629Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:58.630Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:20:58.631Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:20:58.632Z","level":"DEBUG","message":"Current balance before update","data":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}
{"timestamp":"2025-07-07T14:20:58.632Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:20:58.633Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:20:58.634Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9729448,"newAvailable":9664324,"newUsed":65124}}
{"timestamp":"2025-07-07T14:20:58.634Z","level":"DEBUG","message":"New balance to update","data":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}
{"timestamp":"2025-07-07T14:20:58.635Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}}
{"timestamp":"2025-07-07T14:20:58.636Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}}
{"timestamp":"2025-07-07T14:20:58.636Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}}
{"timestamp":"2025-07-07T14:20:58.638Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:20:58.658Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:20:58.639Z"}}
{"timestamp":"2025-07-07T14:21:00.019Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:00.020Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:00.021Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:00.022Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:00.023Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:00.024Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:00.025Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:00.026Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:00.027Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:00.027Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:00.029Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:00.030Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:00.031Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:00.031Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:00.032Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:00.033Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:00.034Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:00.034Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:00.035Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:00.039Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:21:00.040Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:21:00.041Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:21:00.041Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:21:00.042Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:21:00.043Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:21:00.044Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:00.045Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:21:00.046Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:21:00.047Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:00.048Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:00.048Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:21:00.049Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:21:00.050Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:00.051Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:21:00.051Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:00.052Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:21:00.053Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:21:00.054Z","level":"DEBUG","message":"Current balance before update","data":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}
{"timestamp":"2025-07-07T14:21:00.054Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:00.055Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:21:00.056Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9733198,"newAvailable":9668074,"newUsed":65124}}
{"timestamp":"2025-07-07T14:21:00.057Z","level":"DEBUG","message":"New balance to update","data":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}
{"timestamp":"2025-07-07T14:21:00.057Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}}
{"timestamp":"2025-07-07T14:21:00.058Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}}
{"timestamp":"2025-07-07T14:21:00.059Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}}
{"timestamp":"2025-07-07T14:21:00.062Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:21:00.078Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:21:00.063Z"}}
{"timestamp":"2025-07-07T14:21:04.058Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:04.061Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:04.063Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:04.064Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:04.068Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:04.069Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:04.072Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:04.073Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:04.074Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:04.076Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:04.079Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:04.080Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:04.081Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:04.082Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:04.083Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:04.084Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:04.086Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:04.087Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:04.088Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:04.095Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:21:04.096Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:21:04.098Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:21:04.100Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:21:04.101Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:21:04.103Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:21:04.105Z","level":"DEBUG","message":"Current balance before update","data":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}
{"timestamp":"2025-07-07T14:21:04.106Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:04.106Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:21:04.107Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9733198,"newAvailable":9668074,"newUsed":65124}}
{"timestamp":"2025-07-07T14:21:04.108Z","level":"DEBUG","message":"New balance to update","data":{"total":9733198,"available":9668074,"used":65124,"transactionCount":186}}
{"timestamp":"2025-07-07T14:21:04.109Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9733198,"available":9668074,"used":65124,"transactionCount":186}}}
{"timestamp":"2025-07-07T14:21:04.111Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}}
{"timestamp":"2025-07-07T14:21:04.113Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9733198,"available":9668074,"used":65124,"transactionCount":186}}}
{"timestamp":"2025-07-07T14:21:04.116Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:21:07.664Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:07.667Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:07.669Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:07.670Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:07.673Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:07.674Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:07.677Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:07.679Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:07.680Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:07.681Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:07.684Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:07.685Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:07.686Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:07.687Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:07.688Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:07.689Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:07.690Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:07.691Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:07.692Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:07.700Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_jp_vip","market":"JP"}}
{"timestamp":"2025-07-07T14:21:07.700Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:21:07.702Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_jp_vip","tier":"VIP_DIAMOND","isVIP":true,"isBirthMonth":false,"recyclingBottles":12}}
{"timestamp":"2025-07-07T14:21:07.704Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_jp_vip","hasData":true}}
{"timestamp":"2025-07-07T14:21:07.705Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_jp_vip","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":false,"market":"JP","recycledCount":12}}
{"timestamp":"2025-07-07T14:21:07.707Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:21:07.708Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:07.709Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:07.711Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:21:07.714Z","level":"DEBUG","message":"Current balance before update","data":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}
{"timestamp":"2025-07-07T14:21:07.715Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:07.716Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:21:07.718Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":99050,"newAvailable":88051,"newUsed":10999}}
{"timestamp":"2025-07-07T14:21:07.719Z","level":"DEBUG","message":"New balance to update","data":{"total":99050,"available":88051,"used":10999,"transactionCount":42}}
{"timestamp":"2025-07-07T14:21:07.719Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_jp_vip","balanceData":{"total":99050,"available":88051,"used":10999,"transactionCount":42}}}
{"timestamp":"2025-07-07T14:21:07.720Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_jp_vip","oldBalance":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}}
{"timestamp":"2025-07-07T14:21:07.722Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_jp_vip","newBalance":{"total":99050,"available":88051,"used":10999,"transactionCount":42}}}
{"timestamp":"2025-07-07T14:21:07.724Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:21:10.025Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:10.029Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:10.030Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:10.032Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:10.036Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:10.037Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:10.041Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:10.042Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:10.044Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:10.045Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:10.048Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:10.049Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:10.051Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:10.052Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:10.053Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:10.053Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:10.055Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:10.056Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:10.057Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:10.063Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"fafafa","market":"JP"}}
{"timestamp":"2025-07-07T14:21:10.065Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:10.067Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"fafafa","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:21:10.068Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"fafafa","hasData":true}}
{"timestamp":"2025-07-07T14:21:10.070Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"fafafa","eventType":"REGISTRATION","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:21:10.073Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:21:10.074Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:10.076Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:10.078Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:21:10.080Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:21:10.081Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:10.082Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:21:10.083Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":150,"newAvailable":150,"newUsed":0}}
{"timestamp":"2025-07-07T14:21:10.085Z","level":"DEBUG","message":"New balance to update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:21:10.086Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"fafafa","balanceData":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:21:10.088Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"fafafa","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:21:10.089Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"fafafa","newBalance":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:21:10.093Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:11.115Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:11.118Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:11.119Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:11.120Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:11.123Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:11.125Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:11.128Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:11.129Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:11.131Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:11.132Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:11.135Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:11.136Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:11.138Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:11.139Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:11.140Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:11.141Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:11.142Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:11.143Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:11.145Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:11.151Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"fafafa","market":"JP"}}
{"timestamp":"2025-07-07T14:21:11.152Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:11.153Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"fafafa","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:21:11.154Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"fafafa","hasData":true}}
{"timestamp":"2025-07-07T14:21:11.155Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"fafafa","eventType":"REGISTRATION","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:21:11.156Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:21:11.157Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:11.157Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:11.159Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:21:11.161Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:21:11.162Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:11.163Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:21:11.165Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":300,"newAvailable":300,"newUsed":0}}
{"timestamp":"2025-07-07T14:21:11.166Z","level":"DEBUG","message":"New balance to update","data":{"total":300,"available":300,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T14:21:11.167Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"fafafa","balanceData":{"total":300,"available":300,"used":0,"transactionCount":2}}}
{"timestamp":"2025-07-07T14:21:11.169Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"fafafa","oldBalance":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:21:11.169Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"fafafa","newBalance":{"total":300,"available":300,"used":0,"transactionCount":2}}}
{"timestamp":"2025-07-07T14:21:11.171Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:12.127Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:12.131Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:12.132Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:12.134Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:12.137Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:12.138Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:12.141Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:12.143Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:12.144Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:12.145Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:12.148Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:12.149Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:12.150Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:12.152Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:12.153Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:12.154Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:12.155Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:12.157Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:12.158Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:12.165Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"fafafa","market":"JP"}}
{"timestamp":"2025-07-07T14:21:12.167Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:12.169Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"fafafa","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:21:12.170Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"fafafa","hasData":true}}
{"timestamp":"2025-07-07T14:21:12.171Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"fafafa","eventType":"REGISTRATION","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:21:12.173Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:21:12.174Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:12.175Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:12.178Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:21:12.180Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T14:21:12.181Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:12.182Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:21:12.184Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":450,"newAvailable":450,"newUsed":0}}
{"timestamp":"2025-07-07T14:21:12.185Z","level":"DEBUG","message":"New balance to update","data":{"total":450,"available":450,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T14:21:12.186Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"fafafa","balanceData":{"total":450,"available":450,"used":0,"transactionCount":3}}}
{"timestamp":"2025-07-07T14:21:12.188Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"fafafa","oldBalance":{"total":300,"available":300,"used":0,"transactionCount":2}}}
{"timestamp":"2025-07-07T14:21:12.189Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"fafafa","newBalance":{"total":450,"available":450,"used":0,"transactionCount":3}}}
{"timestamp":"2025-07-07T14:21:12.193Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:18.108Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:18.112Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:18.113Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:18.114Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:18.117Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:18.119Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:18.121Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:18.122Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:18.124Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:18.125Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:18.129Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:18.130Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:18.131Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:18.131Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:18.132Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:18.133Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:18.134Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:18.135Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:18.135Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:18.140Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"fafafa","market":"JP"}}
{"timestamp":"2025-07-07T14:21:18.141Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:18.142Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"fafafa","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:21:18.143Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"fafafa","hasData":true}}
{"timestamp":"2025-07-07T14:21:18.145Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"fafafa","eventType":"PURCHASE","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:21:18.146Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:21:18.147Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:18.148Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-07T14:21:18.149Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:21:18.149Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:18.150Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-07T14:21:18.151Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:21:18.152Z","level":"DEBUG","message":"Current balance before update","data":{"total":450,"available":450,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T14:21:18.153Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":22500,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:18.154Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":22500}}
{"timestamp":"2025-07-07T14:21:18.155Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":22950,"newAvailable":22950,"newUsed":0}}
{"timestamp":"2025-07-07T14:21:18.156Z","level":"DEBUG","message":"New balance to update","data":{"total":22950,"available":22950,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T14:21:18.156Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"fafafa","balanceData":{"total":22950,"available":22950,"used":0,"transactionCount":4}}}
{"timestamp":"2025-07-07T14:21:18.158Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"fafafa","oldBalance":{"total":450,"available":450,"used":0,"transactionCount":3}}}
{"timestamp":"2025-07-07T14:21:18.159Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"fafafa","newBalance":{"total":22950,"available":22950,"used":0,"transactionCount":4}}}
{"timestamp":"2025-07-07T14:21:18.163Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:18.182Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"fafafa","timestamp":"2025-07-07T14:21:18.164Z"}}
{"timestamp":"2025-07-07T14:22:03.945Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:22:03.947Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:22:03.947Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:22:03.948Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:22:03.950Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:22:03.950Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:22:03.952Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:22:03.952Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:22:03.953Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:22:03.954Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:22:03.955Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:22:03.956Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:22:03.956Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:22:03.957Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:22:03.958Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:22:03.959Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:22:03.960Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:22:03.960Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:22:03.961Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:22:03.965Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"TEST_USER","market":"JP"}}
{"timestamp":"2025-07-07T14:22:03.966Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"TEST_USER"}}
{"timestamp":"2025-07-07T14:22:03.967Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"TEST_USER","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:22:03.968Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"TEST_USER","hasData":true}}
{"timestamp":"2025-07-07T14:22:03.968Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"TEST_USER","eventType":"REGISTRATION","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:22:03.969Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:22:03.970Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:22:03.970Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:22:03.971Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:22:03.973Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:22:03.973Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:22:03.974Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:22:03.974Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":150,"newAvailable":150,"newUsed":0}}
{"timestamp":"2025-07-07T14:22:03.975Z","level":"DEBUG","message":"New balance to update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:22:03.976Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"TEST_USER","balanceData":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:22:03.977Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"TEST_USER","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:22:03.978Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"TEST_USER","newBalance":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:22:03.980Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"TEST_USER"}}
{"timestamp":"2025-07-07T14:23:55.890Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:23:55.903Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:23:55.904Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:55.905Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:23:55.907Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:23:55.907Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:55.908Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:23:55.909Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:23:55.909Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:23:55.910Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:55.911Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:23:55.912Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:55.912Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:23:55.913Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:23:55.914Z","level":"DEBUG","message":"Current balance before update","data":{"total":9733198,"available":9668074,"used":65124,"transactionCount":186}}
{"timestamp":"2025-07-07T14:23:57.677Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:23:57.688Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:23:57.689Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:57.690Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:23:57.691Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:23:57.692Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:57.693Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:23:57.693Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:23:57.694Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:23:57.695Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:57.695Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:23:57.696Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:57.696Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:23:57.697Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:23:57.698Z","level":"DEBUG","message":"Current balance before update","data":{"total":9736948,"available":9671824,"used":65124,"transactionCount":187}}
{"timestamp":"2025-07-07T14:23:58.089Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:23:58.098Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:23:58.099Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:58.100Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:23:58.101Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:23:58.102Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:58.103Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:23:58.104Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:23:58.104Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:23:58.105Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:58.106Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:23:58.107Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:58.107Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:23:58.108Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:23:58.109Z","level":"DEBUG","message":"Current balance before update","data":{"total":9740698,"available":9675574,"used":65124,"transactionCount":188}}
{"timestamp":"2025-07-07T14:24:01.324Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:01.337Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:01.339Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:01.340Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:01.341Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:01.342Z","level":"DEBUG","message":"Current balance before update","data":{"total":99050,"available":88051,"used":10999,"transactionCount":42}}
{"timestamp":"2025-07-07T14:24:02.815Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:02.826Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:02.826Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:02.827Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:02.828Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:02.829Z","level":"DEBUG","message":"Current balance before update","data":{"total":99200,"available":88201,"used":10999,"transactionCount":43}}
{"timestamp":"2025-07-07T14:24:03.872Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:03.880Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:03.881Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:03.882Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:03.883Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:03.884Z","level":"DEBUG","message":"Current balance before update","data":{"total":99350,"available":88351,"used":10999,"transactionCount":44}}
{"timestamp":"2025-07-07T14:24:17.725Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:17.736Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:17.737Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:17.738Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:17.739Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:17.740Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:24:36.544Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:36.555Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:36.556Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:36.557Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:36.558Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:36.559Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:25:03.278Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:03.295Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:25:03.296Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:25:03.298Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:25:03.299Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:25:03.300Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:25:04.109Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:04.128Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:25:04.128Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:25:04.130Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:25:04.131Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:25:04.133Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T14:25:06.981Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:06.996Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:25:06.997Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:25:06.998Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:25:07.000Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:25:07.002Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T14:25:10.567Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:10.586Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:25:10.587Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T14:25:10.588Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T14:25:10.589Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:25:10.590Z","level":"DEBUG","message":"Current balance before update","data":{"total":375,"available":375,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T14:25:10.782Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:10.800Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:25:10.802Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T14:25:10.803Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T14:25:10.804Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:25:10.806Z","level":"DEBUG","message":"Current balance before update","data":{"total":1375,"available":1375,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-07T14:25:10.987Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:11.002Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:25:11.003Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T14:25:11.004Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T14:25:11.005Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:25:11.006Z","level":"DEBUG","message":"Current balance before update","data":{"total":2375,"available":2375,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-07T14:25:13.018Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:13.035Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:25:13.037Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":123}}
{"timestamp":"2025-07-07T14:25:13.038Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":123}}
{"timestamp":"2025-07-07T14:25:13.040Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:25:13.041Z","level":"DEBUG","message":"Current balance before update","data":{"total":3375,"available":3375,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-07T14:25:42.061Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:42.077Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:25:42.078Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679324,"used":65124,"transactionCount":189}}
{"timestamp":"2025-07-07T14:25:42.603Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:42.613Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:25:42.615Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679324,"used":65124,"transactionCount":190}}
{"timestamp":"2025-07-07T14:27:50.751Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:30:27.565Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:30:27.579Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:30:27.580Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:30:27.581Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":100}}
{"timestamp":"2025-07-07T14:30:27.582Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:30:27.583Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:31:00.344Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:31:00.368Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:31:00.371Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:32:34.850Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:32:44.880Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:32:44.894Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:32:44.895Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679324,"used":65124,"transactionCount":191}}
{"timestamp":"2025-07-07T14:32:51.892Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:32:51.902Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:32:51.903Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:32:51.904Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-100}}
{"timestamp":"2025-07-07T14:32:51.905Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:32:51.906Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679324,"used":65124,"transactionCount":192}}
{"timestamp":"2025-07-07T14:33:17.668Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:33:17.686Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:33:17.687Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:33:17.687Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:33:17.689Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:33:17.690Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679224,"used":65224,"transactionCount":193}}
{"timestamp":"2025-07-07T14:37:00.753Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:37:00.770Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:37:00.771Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:37:00.773Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:37:00.775Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:37:00.776Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:37:32.799Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:37:32.810Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:37:32.811Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:37:32.812Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:37:32.813Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:37:32.814Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:37:41.777Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:37:41.788Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:37:41.789Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:37:41.790Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-50}}
{"timestamp":"2025-07-07T14:37:41.791Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:37:41.791Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:38:15.427Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:38:15.439Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:38:15.439Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:15.440Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:38:15.441Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:38:15.442Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:38:38.605Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:38:38.616Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:38:38.616Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:38.617Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:38:38.618Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:38:38.619Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:38.620Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:38:38.622Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:38:38.622Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:38:38.623Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:38.624Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:38:38.624Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:38.625Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:38:38.626Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:38:38.628Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744523,"available":9679299,"used":65224,"transactionCount":194}}
{"timestamp":"2025-07-07T14:38:47.577Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:38:47.594Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:38:47.595Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:47.597Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:38:47.598Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:38:47.599Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:47.600Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:38:47.601Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:38:47.602Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:38:47.604Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:47.605Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:38:47.606Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:47.608Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:38:47.610Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:38:47.611Z","level":"DEBUG","message":"Current balance before update","data":{"total":9748273,"available":9683049,"used":65224,"transactionCount":195}}
{"timestamp":"2025-07-07T14:40:17.639Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:40:17.653Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:40:17.655Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:17.655Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:40:17.659Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:40:17.660Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:17.661Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:40:17.663Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:40:17.663Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:40:17.664Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:17.665Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:40:17.666Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:17.666Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:40:17.667Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:40:17.669Z","level":"DEBUG","message":"Current balance before update","data":{"total":9752023,"available":9686799,"used":65224,"transactionCount":196}}
{"timestamp":"2025-07-07T14:40:25.759Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:40:25.772Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:40:25.773Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:25.775Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:40:25.776Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:40:25.778Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755773,"available":9690549,"used":65224,"transactionCount":197}}
{"timestamp":"2025-07-07T14:40:45.240Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:40:45.256Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:40:45.256Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:45.258Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:40:45.260Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:40:45.262Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755848,"available":9690624,"used":65224,"transactionCount":198}}
{"timestamp":"2025-07-07T14:40:55.073Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:40:55.090Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:40:55.091Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:55.092Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":50}}
{"timestamp":"2025-07-07T14:40:55.094Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:40:55.095Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:55.097Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":25}}
{"timestamp":"2025-07-07T14:40:55.099Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:40:55.100Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:41:06.504Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:06.516Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:41:06.519Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:41:07.246Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:07.268Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:41:07.269Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:41:08.804Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:08.815Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:41:08.817Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:41:08.818Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:41:08.820Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:41:08.822Z","level":"DEBUG","message":"Current balance before update","data":{"total":99500,"available":88501,"used":10999,"transactionCount":45}}
{"timestamp":"2025-07-07T14:41:14.922Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:14.942Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:41:14.943Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:41:14.944Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:41:14.946Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:41:14.948Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:41:48.730Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:48.746Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:41:48.747Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:41:48.748Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:41:48.752Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:41:48.754Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:46:20.140Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:20.151Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:46:20.152Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:20.153Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:46:20.154Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:46:20.155Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T14:46:37.603Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:37.616Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:37.618Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:37.621Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:37.623Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:37.624Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T14:46:38.771Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:38.784Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:38.785Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:38.786Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:38.788Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:38.789Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T14:46:41.105Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:41.127Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:41.129Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:41.130Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:41.131Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:41.132Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-07T14:46:41.594Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:41.617Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:41.619Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:41.620Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:41.622Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:41.625Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-07T14:46:41.895Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:41.916Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:41.918Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:41.920Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:41.921Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:41.923Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-07T14:46:42.050Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:42.072Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:42.074Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:42.075Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:42.076Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:42.078Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":8}}
{"timestamp":"2025-07-07T14:46:42.215Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:42.233Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:42.234Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:42.235Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:42.235Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:42.236Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":9}}
{"timestamp":"2025-07-07T14:47:11.312Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:11.340Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:47:11.342Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:11.343Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-07T14:47:11.347Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:47:11.349Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:11.350Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-07T14:47:11.351Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:47:11.353Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":10}}
{"timestamp":"2025-07-07T14:47:11.582Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:11.604Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:47:11.606Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:11.607Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-07T14:47:11.610Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:47:11.611Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:11.612Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-07T14:47:11.614Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:47:11.616Z","level":"DEBUG","message":"Current balance before update","data":{"total":22800,"available":22800,"used":0,"transactionCount":11}}
{"timestamp":"2025-07-07T14:47:14.536Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:14.551Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:47:14.552Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:14.553Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:47:14.553Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:47:14.555Z","level":"DEBUG","message":"Current balance before update","data":{"total":45300,"available":45300,"used":0,"transactionCount":12}}
{"timestamp":"2025-07-07T14:47:24.545Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:24.556Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:24.557Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:24.558Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:24.559Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:24.560Z","level":"DEBUG","message":"Current balance before update","data":{"total":45300,"available":44800,"used":500,"transactionCount":13}}
{"timestamp":"2025-07-07T14:47:25.060Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:25.074Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:25.075Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:25.076Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:25.078Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:25.079Z","level":"DEBUG","message":"Current balance before update","data":{"total":45450,"available":44950,"used":500,"transactionCount":14}}
{"timestamp":"2025-07-07T14:47:25.498Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:25.509Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:25.510Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:25.511Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:25.512Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:25.513Z","level":"DEBUG","message":"Current balance before update","data":{"total":45600,"available":45100,"used":500,"transactionCount":15}}
{"timestamp":"2025-07-07T14:47:25.678Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:25.690Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:25.691Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:25.692Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:25.693Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:25.694Z","level":"DEBUG","message":"Current balance before update","data":{"total":45750,"available":45250,"used":500,"transactionCount":16}}
{"timestamp":"2025-07-07T14:47:25.956Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:25.966Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:25.967Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:25.968Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:25.969Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:25.970Z","level":"DEBUG","message":"Current balance before update","data":{"total":45900,"available":45400,"used":500,"transactionCount":17}}
{"timestamp":"2025-07-07T14:47:26.100Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:26.112Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:26.114Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:26.115Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:26.117Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:26.119Z","level":"DEBUG","message":"Current balance before update","data":{"total":46050,"available":45550,"used":500,"transactionCount":18}}
{"timestamp":"2025-07-07T14:47:31.552Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:31.565Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:31.567Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":4,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:31.568Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":200}}
{"timestamp":"2025-07-07T14:47:31.569Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:31.570Z","level":"DEBUG","message":"Current balance before update","data":{"total":46200,"available":45700,"used":500,"transactionCount":19}}
{"timestamp":"2025-07-07T14:47:33.658Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:33.670Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:33.671Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:33.672Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":250}}
{"timestamp":"2025-07-07T14:47:33.673Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:33.674Z","level":"DEBUG","message":"Current balance before update","data":{"total":46400,"available":45900,"used":500,"transactionCount":20}}
{"timestamp":"2025-07-07T14:47:55.372Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:55.384Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:47:55.384Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:55.385Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-07T14:47:55.387Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:47:55.388Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:55.388Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-07T14:47:55.389Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:47:55.390Z","level":"DEBUG","message":"Current balance before update","data":{"total":46650,"available":46150,"used":500,"transactionCount":21}}
{"timestamp":"2025-07-07T14:47:57.350Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:57.360Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:47:57.361Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:57.362Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:57.363Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:47:57.364Z","level":"DEBUG","message":"Current balance before update","data":{"total":69150,"available":68650,"used":500,"transactionCount":22}}
{"timestamp":"2025-07-07T14:47:59.938Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:59.957Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:59.958Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:59.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:59.961Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:59.962Z","level":"DEBUG","message":"Current balance before update","data":{"total":69300,"available":68800,"used":500,"transactionCount":23}}
{"timestamp":"2025-07-07T14:48:01.972Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:01.990Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:01.992Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:01.993Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:01.996Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:01.998Z","level":"DEBUG","message":"Current balance before update","data":{"total":69450,"available":68950,"used":500,"transactionCount":24}}
{"timestamp":"2025-07-07T14:48:02.463Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:02.480Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:02.481Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:02.482Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:02.483Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:02.483Z","level":"DEBUG","message":"Current balance before update","data":{"total":69600,"available":69100,"used":500,"transactionCount":25}}
{"timestamp":"2025-07-07T14:48:02.600Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:02.619Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:02.620Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:02.622Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:02.624Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:02.626Z","level":"DEBUG","message":"Current balance before update","data":{"total":69750,"available":69250,"used":500,"transactionCount":26}}
{"timestamp":"2025-07-07T14:48:02.767Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:02.784Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:02.785Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:02.786Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:02.788Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:02.791Z","level":"DEBUG","message":"Current balance before update","data":{"total":69900,"available":69400,"used":500,"transactionCount":27}}
{"timestamp":"2025-07-07T14:48:02.923Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:02.939Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:02.941Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:02.942Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:02.944Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:02.946Z","level":"DEBUG","message":"Current balance before update","data":{"total":70050,"available":69550,"used":500,"transactionCount":28}}
{"timestamp":"2025-07-07T14:48:03.106Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:03.124Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:03.125Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:03.127Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:03.128Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:03.130Z","level":"DEBUG","message":"Current balance before update","data":{"total":70200,"available":69700,"used":500,"transactionCount":29}}
{"timestamp":"2025-07-07T14:48:03.394Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:03.411Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:03.412Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:03.413Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:03.415Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:03.417Z","level":"DEBUG","message":"Current balance before update","data":{"total":70350,"available":69850,"used":500,"transactionCount":30}}
{"timestamp":"2025-07-07T14:48:03.717Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:03.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:03.736Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:03.737Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:03.738Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:03.741Z","level":"DEBUG","message":"Current balance before update","data":{"total":70500,"available":70000,"used":500,"transactionCount":31}}
{"timestamp":"2025-07-07T14:48:08.094Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:08.120Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:08.122Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:08.123Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T14:48:08.125Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:08.127Z","level":"DEBUG","message":"Current balance before update","data":{"total":70650,"available":70150,"used":500,"transactionCount":32}}
{"timestamp":"2025-07-07T14:48:11.688Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:11.705Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:11.707Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:11.708Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T14:48:11.710Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:11.712Z","level":"DEBUG","message":"Current balance before update","data":{"total":70700,"available":70200,"used":500,"transactionCount":33}}
{"timestamp":"2025-07-07T14:48:14.023Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:14.041Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:14.043Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:14.044Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T14:48:14.045Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:14.047Z","level":"DEBUG","message":"Current balance before update","data":{"total":70750,"available":70250,"used":500,"transactionCount":34}}
{"timestamp":"2025-07-07T14:48:18.005Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:18.018Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:18.019Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":4,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:18.019Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":200}}
{"timestamp":"2025-07-07T14:48:18.021Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:18.023Z","level":"DEBUG","message":"Current balance before update","data":{"total":70800,"available":70300,"used":500,"transactionCount":35}}
{"timestamp":"2025-07-07T14:49:08.728Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:08.744Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:08.745Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:08.746Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:08.747Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:08.748Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9690699,"used":65224,"transactionCount":199}}
{"timestamp":"2025-07-07T14:49:10.043Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:10.056Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:10.057Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:10.058Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:10.059Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:10.060Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9690199,"used":65724,"transactionCount":200}}
{"timestamp":"2025-07-07T14:49:10.247Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:10.259Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:10.260Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:10.261Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:10.261Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:10.262Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9689699,"used":66224,"transactionCount":201}}
{"timestamp":"2025-07-07T14:49:10.531Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:10.552Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:10.554Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:10.555Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:10.557Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:10.558Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9689199,"used":66724,"transactionCount":202}}
{"timestamp":"2025-07-07T14:49:10.839Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:10.851Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:10.852Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:10.854Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:10.855Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:10.857Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9688699,"used":67224,"transactionCount":203}}
{"timestamp":"2025-07-07T14:49:11.165Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:11.184Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:11.186Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:11.188Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:11.190Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:11.192Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9688199,"used":67724,"transactionCount":204}}
{"timestamp":"2025-07-07T14:49:11.491Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:11.507Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:11.508Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:11.509Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:11.511Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:11.512Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9687699,"used":68224,"transactionCount":205}}
{"timestamp":"2025-07-07T14:49:11.793Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:11.814Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:11.815Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:11.817Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:11.818Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:11.820Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9687199,"used":68724,"transactionCount":206}}
{"timestamp":"2025-07-07T14:49:11.964Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:11.980Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:11.981Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:11.983Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:11.984Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:11.986Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9686699,"used":69224,"transactionCount":207}}
{"timestamp":"2025-07-07T14:49:12.185Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:12.203Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:12.205Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:12.206Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:12.207Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:12.209Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9686199,"used":69724,"transactionCount":208}}
{"timestamp":"2025-07-07T14:49:12.526Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:12.547Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:12.548Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:12.550Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:12.551Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:12.553Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9685699,"used":70224,"transactionCount":209}}
{"timestamp":"2025-07-07T14:49:12.835Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:12.854Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:12.855Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:12.856Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:12.857Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:12.858Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9685199,"used":70724,"transactionCount":210}}
{"timestamp":"2025-07-07T14:49:12.999Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:13.015Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:13.016Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:13.017Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:13.019Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:13.020Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9684699,"used":71224,"transactionCount":211}}
{"timestamp":"2025-07-07T14:49:13.158Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:13.176Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:13.177Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:13.178Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:13.180Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:13.181Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9684199,"used":71724,"transactionCount":212}}
{"timestamp":"2025-07-07T14:49:13.499Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:13.518Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:13.519Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:13.521Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:13.522Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:13.524Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9683699,"used":72224,"transactionCount":213}}
{"timestamp":"2025-07-07T14:49:18.722Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:18.732Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:18.734Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:18.735Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:18.736Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:18.738Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9683199,"used":72724,"transactionCount":214}}
{"timestamp":"2025-07-07T14:49:20.087Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.097Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.098Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.099Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.100Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.102Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755998,"available":9683274,"used":72724,"transactionCount":215}}
{"timestamp":"2025-07-07T14:49:20.500Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.513Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.514Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.515Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.517Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.518Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756073,"available":9683349,"used":72724,"transactionCount":216}}
{"timestamp":"2025-07-07T14:49:20.658Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.674Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.676Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.677Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.679Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.681Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756148,"available":9683424,"used":72724,"transactionCount":217}}
{"timestamp":"2025-07-07T14:49:20.806Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.816Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.817Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.818Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.820Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.822Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756223,"available":9683499,"used":72724,"transactionCount":218}}
{"timestamp":"2025-07-07T14:49:20.944Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.958Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.958Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.960Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.961Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756298,"available":9683574,"used":72724,"transactionCount":219}}
{"timestamp":"2025-07-07T14:49:21.086Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:21.099Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:21.099Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:21.101Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:21.102Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:21.103Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756373,"available":9683649,"used":72724,"transactionCount":220}}
{"timestamp":"2025-07-07T14:49:24.488Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:24.498Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:49:24.498Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:24.499Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:49:24.500Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:49:24.501Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:50:33.936Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:33.955Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:33.957Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:33.958Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:33.958Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:33.960Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9683724,"used":72724,"transactionCount":221}}
{"timestamp":"2025-07-07T14:50:34.814Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:34.835Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:34.837Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:34.838Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:34.839Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:34.840Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9683224,"used":73224,"transactionCount":222}}
{"timestamp":"2025-07-07T14:50:35.115Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:35.130Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:35.132Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:35.133Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:35.134Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:35.135Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9682724,"used":73724,"transactionCount":223}}
{"timestamp":"2025-07-07T14:50:35.430Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:35.446Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:35.447Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:35.448Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:35.450Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:35.451Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9682224,"used":74224,"transactionCount":224}}
{"timestamp":"2025-07-07T14:50:35.747Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:35.765Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:35.767Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:35.768Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:35.769Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:35.771Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9681724,"used":74724,"transactionCount":225}}
{"timestamp":"2025-07-07T14:50:36.046Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:36.060Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:36.062Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:36.063Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:36.065Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:36.066Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9681224,"used":75224,"transactionCount":226}}
{"timestamp":"2025-07-07T14:50:36.419Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:36.434Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:36.435Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:36.436Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:36.437Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:36.438Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9680724,"used":75724,"transactionCount":227}}
{"timestamp":"2025-07-07T14:50:36.614Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:36.635Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:36.637Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:36.638Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:36.639Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:36.641Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9680224,"used":76224,"transactionCount":228}}
{"timestamp":"2025-07-07T14:50:36.975Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:36.994Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:36.995Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:36.997Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:36.998Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.001Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9679724,"used":76724,"transactionCount":229}}
{"timestamp":"2025-07-07T14:50:37.157Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:37.176Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:37.177Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:37.179Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:37.180Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.182Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9679224,"used":77224,"transactionCount":230}}
{"timestamp":"2025-07-07T14:50:37.376Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:37.396Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:37.397Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:37.398Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:37.400Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.401Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9678724,"used":77724,"transactionCount":231}}
{"timestamp":"2025-07-07T14:50:37.737Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:37.756Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:37.757Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:37.758Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:37.759Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.760Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9678224,"used":78224,"transactionCount":232}}
{"timestamp":"2025-07-07T14:50:37.933Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:37.951Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:37.953Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:37.954Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:37.955Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.957Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9677724,"used":78724,"transactionCount":233}}
{"timestamp":"2025-07-07T14:50:38.173Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:38.188Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:38.189Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:38.190Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:38.191Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:38.192Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9677224,"used":79224,"transactionCount":234}}
{"timestamp":"2025-07-07T14:50:38.401Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:38.413Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:38.413Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:38.415Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:38.416Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:38.418Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9676724,"used":79724,"transactionCount":235}}
{"timestamp":"2025-07-07T14:50:38.720Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:38.745Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:38.747Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:38.748Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:38.749Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:38.751Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9676224,"used":80224,"transactionCount":236}}
{"timestamp":"2025-07-07T14:50:38.949Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:38.967Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:38.968Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:38.969Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:38.970Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:38.971Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9675724,"used":80724,"transactionCount":237}}
{"timestamp":"2025-07-07T14:50:44.357Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:44.373Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:44.374Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:44.375Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:44.376Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:44.377Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9675224,"used":81224,"transactionCount":238}}
{"timestamp":"2025-07-07T14:50:44.870Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:44.882Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:44.884Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:44.885Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:44.886Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:44.888Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9674724,"used":81724,"transactionCount":239}}
{"timestamp":"2025-07-07T14:55:04.824Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:04.838Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:55:04.840Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:04.841Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:55:04.842Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:55:04.843Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:04.844Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:55:04.845Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:55:04.845Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:55:04.846Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:04.847Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:55:04.847Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:04.848Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:55:04.849Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:55:04.850Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9674224,"used":82224,"transactionCount":240}}
{"timestamp":"2025-07-07T14:55:08.286Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:08.296Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:55:08.297Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":31,"discountedAmount":31,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:08.298Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":31}}
{"timestamp":"2025-07-07T14:55:08.300Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:55:08.301Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":31,"discountedAmount":31,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:08.302Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":3}}
{"timestamp":"2025-07-07T14:55:08.303Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:55:08.305Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:55:08.306Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":31,"discountedAmount":31,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:08.307Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":331}}
{"timestamp":"2025-07-07T14:55:08.308Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":31,"discountedAmount":31,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:08.310Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:55:08.312Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:55:08.314Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760198,"available":9677974,"used":82224,"transactionCount":241}}
{"timestamp":"2025-07-07T14:55:21.607Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:21.628Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:55:21.629Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:21.631Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:55:21.633Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:55:21.635Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:55:23.881Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:23.899Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:55:23.900Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:23.901Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:55:23.903Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:55:23.905Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:55:39.721Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:39.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:55:39.737Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:39.738Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:55:39.740Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:55:39.741Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:55:48.194Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:48.213Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:55:48.213Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:48.214Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:55:48.215Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:55:48.218Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:56:24.494Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:56:24.512Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:56:24.513Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:57:46.154Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:57:46.164Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:57:46.165Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:57:46.166Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:57:46.167Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:57:46.168Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760863,"available":9678639,"used":82224,"transactionCount":242}}
{"timestamp":"2025-07-07T14:57:49.588Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:57:49.603Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:57:49.605Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:57:49.606Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:57:49.607Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:57:49.608Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760938,"available":9678714,"used":82224,"transactionCount":243}}
{"timestamp":"2025-07-07T15:02:19.395Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:19.415Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:02:19.416Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760938,"available":9678214,"used":82724,"transactionCount":244}}
{"timestamp":"2025-07-07T15:02:27.965Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:27.982Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:02:27.983Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T15:02:33.517Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:33.529Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:33.530Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:33.531Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:33.532Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:33.533Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T15:02:34.672Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:34.688Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:34.689Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:34.690Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:34.692Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:34.693Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T15:02:34.919Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:34.930Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:34.931Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:34.933Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:34.935Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:34.936Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T15:02:35.057Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.074Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.075Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.076Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.078Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.079Z","level":"DEBUG","message":"Current balance before update","data":{"total":450,"available":450,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T15:02:35.224Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.241Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.242Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.243Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.244Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.246Z","level":"DEBUG","message":"Current balance before update","data":{"total":600,"available":600,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-07T15:02:35.374Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.391Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.392Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.393Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.395Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.396Z","level":"DEBUG","message":"Current balance before update","data":{"total":750,"available":750,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-07T15:02:35.514Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.527Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.528Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.529Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.530Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.531Z","level":"DEBUG","message":"Current balance before update","data":{"total":900,"available":900,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-07T15:02:35.718Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.736Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.737Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.738Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.739Z","level":"DEBUG","message":"Current balance before update","data":{"total":1050,"available":1050,"used":0,"transactionCount":8}}
{"timestamp":"2025-07-07T15:02:37.526Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:37.543Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T15:02:37.544Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:37.545Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T15:02:37.547Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T15:02:37.550Z","level":"DEBUG","message":"Current balance before update","data":{"total":1200,"available":1200,"used":0,"transactionCount":9}}
{"timestamp":"2025-07-07T15:02:40.043Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:40.061Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T15:02:40.062Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:40.064Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T15:02:40.065Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T15:02:40.067Z","level":"DEBUG","message":"Current balance before update","data":{"total":1275,"available":1275,"used":0,"transactionCount":10}}
{"timestamp":"2025-07-07T15:06:41.362Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:06:41.376Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T15:06:41.377Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:06:41.379Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T15:06:41.381Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T15:06:41.382Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760938,"available":9678214,"used":82724,"transactionCount":245}}
{"timestamp":"2025-07-07T15:06:50.967Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:06:50.976Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:06:50.976Z","level":"DEBUG","message":"Current balance before update","data":{"total":9761013,"available":9678289,"used":82724,"transactionCount":246}}
{"timestamp":"2025-07-07T15:10:44.950Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:10:44.963Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:10:44.964Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:10:44.964Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:10:44.965Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:10:44.966Z","level":"DEBUG","message":"Current balance before update","data":{"total":9761013,"available":9678289,"used":82724,"transactionCount":247}}
{"timestamp":"2025-07-07T15:10:47.090Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:10:47.106Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:10:47.107Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:10:47.108Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:10:47.109Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:10:47.111Z","level":"DEBUG","message":"Current balance before update","data":{"total":9762013,"available":9679289,"used":82724,"transactionCount":248}}
{"timestamp":"2025-07-07T15:10:51.789Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:10:51.802Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:10:51.803Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:10:51.803Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:10:51.804Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:10:51.805Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763013,"available":9680289,"used":82724,"transactionCount":249}}
{"timestamp":"2025-07-07T15:11:07.104Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:07.119Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:07.120Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:07.121Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:07.121Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:07.122Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763016,"available":9680292,"used":82724,"transactionCount":250}}
{"timestamp":"2025-07-07T15:11:07.899Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:07.911Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:07.912Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:07.913Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:07.914Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:07.915Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763019,"available":9680295,"used":82724,"transactionCount":251}}
{"timestamp":"2025-07-07T15:11:08.068Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:08.081Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:08.082Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:08.083Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:08.084Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:08.086Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763022,"available":9680298,"used":82724,"transactionCount":252}}
{"timestamp":"2025-07-07T15:11:08.791Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:08.805Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:08.806Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:08.807Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:08.808Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:08.810Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763025,"available":9680301,"used":82724,"transactionCount":253}}
{"timestamp":"2025-07-07T15:11:09.156Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:09.167Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:09.168Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:09.169Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:09.170Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:09.171Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763028,"available":9680304,"used":82724,"transactionCount":254}}
{"timestamp":"2025-07-07T15:12:07.761Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:07.775Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:07.776Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:12:07.777Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:07.779Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:07.780Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:12:07.781Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:07.783Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:07.784Z","level":"DEBUG","message":"Current balance before update","data":{"total":156950,"available":148850,"used":8100,"transactionCount":35}}
{"timestamp":"2025-07-07T15:12:20.043Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:20.054Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:20.054Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":2000,"discountedAmount":2000,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:12:20.056Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":2000}}
{"timestamp":"2025-07-07T15:12:20.058Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:20.059Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":2000,"discountedAmount":2000,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:12:20.059Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:20.060Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:20.061Z","level":"DEBUG","message":"Current balance before update","data":{"total":158750,"available":150650,"used":8100,"transactionCount":36}}
{"timestamp":"2025-07-07T15:12:26.886Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:26.897Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:26.898Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:26.898Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:26.899Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:26.900Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:26.901Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:26.901Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:26.902Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:26.903Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:26.903Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:26.904Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:26.905Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:26.905Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:26.906Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763031,"available":9680307,"used":82724,"transactionCount":255}}
{"timestamp":"2025-07-07T15:12:27.575Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:27.587Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:27.588Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.590Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:27.592Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:27.593Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.593Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:27.595Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:27.595Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:27.596Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.597Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:27.597Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.598Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:27.599Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:27.601Z","level":"DEBUG","message":"Current balance before update","data":{"total":9766781,"available":9684057,"used":82724,"transactionCount":256}}
{"timestamp":"2025-07-07T15:12:27.760Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:27.776Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:27.776Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.777Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:27.779Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:27.781Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.783Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:27.784Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:27.785Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:27.786Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.787Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:27.788Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.789Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:27.790Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:27.791Z","level":"DEBUG","message":"Current balance before update","data":{"total":9770531,"available":9687807,"used":82724,"transactionCount":257}}
{"timestamp":"2025-07-07T15:12:27.949Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:27.962Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:27.963Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.964Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:27.967Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:27.969Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.970Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:27.971Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:27.972Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:27.973Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.974Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:27.975Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.975Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:27.976Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:27.977Z","level":"DEBUG","message":"Current balance before update","data":{"total":9774281,"available":9691557,"used":82724,"transactionCount":258}}
{"timestamp":"2025-07-07T15:12:28.093Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.108Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.109Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.110Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.112Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.113Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.114Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.116Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.116Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.117Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.118Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.119Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.120Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.122Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.124Z","level":"DEBUG","message":"Current balance before update","data":{"total":9778031,"available":9695307,"used":82724,"transactionCount":259}}
{"timestamp":"2025-07-07T15:12:28.245Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.263Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.264Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.264Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.266Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.267Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.268Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.269Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.270Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.271Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.272Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.273Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.274Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.275Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.276Z","level":"DEBUG","message":"Current balance before update","data":{"total":9781781,"available":9699057,"used":82724,"transactionCount":260}}
{"timestamp":"2025-07-07T15:12:28.399Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.412Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.413Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.413Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.415Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.415Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.416Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.417Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.418Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.419Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.419Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.420Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.421Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.422Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.424Z","level":"DEBUG","message":"Current balance before update","data":{"total":9785531,"available":9702807,"used":82724,"transactionCount":261}}
{"timestamp":"2025-07-07T15:12:28.564Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.576Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.577Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.585Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.586Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.587Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.588Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.589Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.590Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.591Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.592Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.593Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.594Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.595Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.596Z","level":"DEBUG","message":"Current balance before update","data":{"total":9789281,"available":9706557,"used":82724,"transactionCount":262}}
{"timestamp":"2025-07-07T15:12:28.718Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.729Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.730Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.731Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.732Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.733Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.733Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.734Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.736Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.737Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.737Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.738Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.740Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.741Z","level":"DEBUG","message":"Current balance before update","data":{"total":9793031,"available":9710307,"used":82724,"transactionCount":263}}
{"timestamp":"2025-07-07T15:12:32.517Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:32.528Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:32.529Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.530Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:12:32.530Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:32.531Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.532Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:12:32.533Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:32.533Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:32.534Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.535Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:12:32.536Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.537Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:32.538Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:32.539Z","level":"DEBUG","message":"Current balance before update","data":{"total":9796781,"available":9714057,"used":82724,"transactionCount":264}}
{"timestamp":"2025-07-07T15:12:32.825Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:32.837Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:32.838Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.840Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:12:32.841Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:32.842Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.842Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:12:32.843Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:32.844Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:32.845Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.846Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:12:32.847Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.848Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:32.849Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:32.850Z","level":"DEBUG","message":"Current balance before update","data":{"total":9797383,"available":9714659,"used":82724,"transactionCount":265}}
{"timestamp":"2025-07-07T15:12:33.117Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:33.127Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:33.128Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.129Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:12:33.129Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:33.130Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.131Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:12:33.131Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:33.132Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:33.133Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.134Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:12:33.134Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.135Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:33.136Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:33.137Z","level":"DEBUG","message":"Current balance before update","data":{"total":9797985,"available":9715261,"used":82724,"transactionCount":266}}
{"timestamp":"2025-07-07T15:12:33.310Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:33.327Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:33.329Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.330Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:12:33.330Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:33.331Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.332Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:12:33.333Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:33.334Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:33.335Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.336Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:12:33.337Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.338Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:33.340Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:33.341Z","level":"DEBUG","message":"Current balance before update","data":{"total":9798587,"available":9715863,"used":82724,"transactionCount":267}}
{"timestamp":"2025-07-07T15:13:09.179Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:13:09.192Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:13:09.194Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:13:09.195Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:13:09.196Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:13:09.197Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:13:09.199Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:13:09.200Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:13:09.201Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:13:09.202Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:13:09.203Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:13:09.205Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:13:09.206Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:13:09.209Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:13:09.211Z","level":"DEBUG","message":"Current balance before update","data":{"total":9799189,"available":9716465,"used":82724,"transactionCount":268}}
{"timestamp":"2025-07-07T15:18:14.544Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:18:14.557Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:18:14.559Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":500}}
{"timestamp":"2025-07-07T15:18:14.560Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":500}}
{"timestamp":"2025-07-07T15:18:14.560Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:18:14.562Z","level":"DEBUG","message":"Current balance before update","data":{"total":161050,"available":152950,"used":8100,"transactionCount":37}}
{"timestamp":"2025-07-07T15:19:14.183Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:14.194Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:19:14.195Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:14.196Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:19:14.196Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:19:14.197Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:14.198Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:14.198Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:19:14.199Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:19:14.200Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:14.201Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:19:14.201Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:14.202Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:19:14.204Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:19:14.207Z","level":"DEBUG","message":"Current balance before update","data":{"total":9799791,"available":9717067,"used":82724,"transactionCount":269}}
{"timestamp":"2025-07-07T15:19:15.158Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:15.169Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:19:15.170Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.170Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:19:15.171Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:19:15.172Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.173Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:15.173Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:19:15.174Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:19:15.175Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.175Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:19:15.176Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.176Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:19:15.177Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:19:15.179Z","level":"DEBUG","message":"Current balance before update","data":{"total":9803541,"available":9720817,"used":82724,"transactionCount":270}}
{"timestamp":"2025-07-07T15:19:15.615Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:15.627Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:19:15.628Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.628Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:19:15.629Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:19:15.630Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.631Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:15.632Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:19:15.633Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:19:15.634Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.635Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:19:15.636Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.637Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:19:15.638Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:19:15.639Z","level":"DEBUG","message":"Current balance before update","data":{"total":9807291,"available":9724567,"used":82724,"transactionCount":271}}
{"timestamp":"2025-07-07T15:19:15.765Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:15.774Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:19:15.775Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.776Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:19:15.776Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:19:15.777Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.778Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:15.779Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:19:15.779Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:19:15.780Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.781Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:19:15.782Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.783Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:19:15.783Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:19:15.784Z","level":"DEBUG","message":"Current balance before update","data":{"total":9811041,"available":9728317,"used":82724,"transactionCount":272}}
{"timestamp":"2025-07-07T15:19:17.710Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:17.724Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:19:17.726Z","level":"DEBUG","message":"Current balance before update","data":{"total":9814791,"available":9732067,"used":82724,"transactionCount":273}}
{"timestamp":"2025-07-07T15:19:22.931Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:22.946Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:19:22.947Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:22.948Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:22.950Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:19:22.952Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T15:19:28.866Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:28.882Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:19:28.884Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:28.885Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T15:19:28.886Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:19:28.888Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T15:19:30.140Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:30.152Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:19:30.154Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:30.155Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T15:19:30.156Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:19:30.158Z","level":"DEBUG","message":"Current balance before update","data":{"total":200,"available":200,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T15:19:35.412Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:35.424Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T15:19:35.425Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:35.426Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T15:19:35.427Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T15:19:35.429Z","level":"DEBUG","message":"Current balance before update","data":{"total":250,"available":250,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T15:19:39.559Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:39.576Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:19:39.577Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:19:39.579Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:19:39.579Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:19:39.581Z","level":"DEBUG","message":"Current balance before update","data":{"total":325,"available":325,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T15:19:51.810Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:51.822Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T15:19:51.824Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:51.825Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T15:19:51.825Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T15:19:51.827Z","level":"DEBUG","message":"Current balance before update","data":{"total":1325,"available":1325,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-07T15:19:53.787Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:53.800Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T15:19:53.801Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:53.802Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T15:19:53.803Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T15:19:53.805Z","level":"DEBUG","message":"Current balance before update","data":{"total":1325,"available":825,"used":500,"transactionCount":6}}
{"timestamp":"2025-07-07T15:22:44.573Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:22:44.591Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:22:44.593Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":-200}}
{"timestamp":"2025-07-07T15:22:44.594Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":-200}}
{"timestamp":"2025-07-07T15:22:44.595Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:22:44.597Z","level":"DEBUG","message":"Current balance before update","data":{"total":161550,"available":153450,"used":8100,"transactionCount":38}}
{"timestamp":"2025-07-07T15:22:58.569Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:22:58.580Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:22:58.581Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":750}}
{"timestamp":"2025-07-07T15:22:58.582Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":750}}
{"timestamp":"2025-07-07T15:22:58.583Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:22:58.584Z","level":"DEBUG","message":"Current balance before update","data":{"total":161550,"available":153250,"used":8300,"transactionCount":39}}
{"timestamp":"2025-07-07T15:23:04.793Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:04.802Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:23:04.803Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:23:04.804Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:23:04.805Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:23:04.806Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:23:04.806Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:23:04.807Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:23:04.808Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:23:04.808Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:23:04.809Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:23:04.810Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:23:04.811Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:23:04.812Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:23:04.813Z","level":"DEBUG","message":"Current balance before update","data":{"total":9814791,"available":9732067,"used":82724,"transactionCount":274}}
{"timestamp":"2025-07-07T15:23:08.960Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:08.980Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:08.982Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:08.983Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:08.984Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:08.985Z","level":"DEBUG","message":"Current balance before update","data":{"total":9818541,"available":9735817,"used":82724,"transactionCount":275}}
{"timestamp":"2025-07-07T15:23:10.265Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:10.285Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:10.286Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:10.287Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:10.289Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:10.290Z","level":"DEBUG","message":"Current balance before update","data":{"total":9819541,"available":9736817,"used":82724,"transactionCount":276}}
{"timestamp":"2025-07-07T15:23:10.599Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:10.617Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:10.618Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:10.619Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:10.620Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:10.621Z","level":"DEBUG","message":"Current balance before update","data":{"total":9820541,"available":9737817,"used":82724,"transactionCount":277}}
{"timestamp":"2025-07-07T15:23:10.915Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:10.934Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:10.935Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:10.936Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:10.938Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:10.939Z","level":"DEBUG","message":"Current balance before update","data":{"total":9821541,"available":9738817,"used":82724,"transactionCount":278}}
{"timestamp":"2025-07-07T15:23:11.221Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:11.238Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:11.239Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:11.240Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:11.241Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:11.242Z","level":"DEBUG","message":"Current balance before update","data":{"total":9822541,"available":9739817,"used":82724,"transactionCount":279}}
{"timestamp":"2025-07-07T15:23:11.420Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:11.438Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:11.439Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:11.440Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:11.441Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:11.443Z","level":"DEBUG","message":"Current balance before update","data":{"total":9823541,"available":9740817,"used":82724,"transactionCount":280}}
{"timestamp":"2025-07-07T15:23:16.897Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:16.918Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:16.919Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:16.920Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:16.921Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:16.923Z","level":"DEBUG","message":"Current balance before update","data":{"total":9824541,"available":9741817,"used":82724,"transactionCount":281}}
{"timestamp":"2025-07-07T15:23:17.612Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:17.632Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:17.633Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:17.635Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:17.636Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:17.638Z","level":"DEBUG","message":"Current balance before update","data":{"total":9825541,"available":9742817,"used":82724,"transactionCount":282}}
{"timestamp":"2025-07-07T15:23:17.944Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:17.962Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:17.963Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:17.964Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:17.966Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:17.968Z","level":"DEBUG","message":"Current balance before update","data":{"total":9826541,"available":9743817,"used":82724,"transactionCount":283}}
{"timestamp":"2025-07-07T15:23:18.307Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:18.321Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:18.322Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:18.323Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:18.324Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:18.326Z","level":"DEBUG","message":"Current balance before update","data":{"total":9827541,"available":9744817,"used":82724,"transactionCount":284}}
{"timestamp":"2025-07-07T15:23:18.677Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:18.691Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:18.692Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:18.693Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:18.694Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:18.695Z","level":"DEBUG","message":"Current balance before update","data":{"total":9828541,"available":9745817,"used":82724,"transactionCount":285}}
{"timestamp":"2025-07-07T15:23:19.285Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:19.304Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:19.305Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:19.306Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:19.307Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:19.309Z","level":"DEBUG","message":"Current balance before update","data":{"total":9829541,"available":9746817,"used":82724,"transactionCount":286}}
{"timestamp":"2025-07-07T15:23:19.849Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:19.871Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:19.873Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:19.874Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:19.875Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:19.877Z","level":"DEBUG","message":"Current balance before update","data":{"total":9830541,"available":9747817,"used":82724,"transactionCount":287}}
{"timestamp":"2025-07-07T15:30:51.264Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:30:51.275Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:30:51.276Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:51.277Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:30:51.278Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:30:51.278Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:51.279Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:30:51.280Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:30:51.281Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:30:51.282Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:51.283Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:30:51.283Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:51.284Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:30:51.285Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:30:51.286Z","level":"DEBUG","message":"Current balance before update","data":{"total":9831541,"available":9748817,"used":82724,"transactionCount":288}}
{"timestamp":"2025-07-07T15:30:52.936Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:30:52.945Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:30:52.946Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:52.947Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:30:52.948Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:30:52.948Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:52.949Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:30:52.949Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:30:52.950Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:30:52.950Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:52.951Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:30:52.952Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:52.952Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:30:52.953Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:30:52.954Z","level":"DEBUG","message":"Current balance before update","data":{"total":9835291,"available":9752567,"used":82724,"transactionCount":289}}
{"timestamp":"2025-07-07T15:30:53.529Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:30:53.538Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:30:53.539Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:53.540Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:30:53.541Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:30:53.542Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:53.543Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:30:53.544Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:30:53.544Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:30:53.545Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:53.545Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:30:53.546Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:53.547Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:30:53.547Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:30:53.548Z","level":"DEBUG","message":"Current balance before update","data":{"total":9839041,"available":9756317,"used":82724,"transactionCount":290}}
{"timestamp":"2025-07-07T15:30:54.129Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:30:54.138Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:30:54.140Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:54.141Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:30:54.142Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:30:54.143Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:54.143Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:30:54.144Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:30:54.145Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:30:54.146Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:54.146Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:30:54.147Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:54.148Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:30:54.149Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:30:54.149Z","level":"DEBUG","message":"Current balance before update","data":{"total":9842791,"available":9760067,"used":82724,"transactionCount":291}}
{"timestamp":"2025-07-07T15:32:21.947Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:32:21.969Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:32:21.970Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:21.972Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:32:21.974Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:32:21.975Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:21.976Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:32:21.978Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:32:21.979Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:32:21.980Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:21.981Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:32:21.983Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:21.984Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:32:21.985Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:32:21.988Z","level":"DEBUG","message":"Current balance before update","data":{"total":9846541,"available":9763817,"used":82724,"transactionCount":292}}
{"timestamp":"2025-07-07T15:32:56.313Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:32:56.328Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:32:56.329Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:56.330Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:32:56.331Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:32:56.332Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:56.333Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:32:56.334Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:32:56.334Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:32:56.335Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:56.336Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:32:56.336Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:56.337Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:32:56.338Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:32:56.340Z","level":"DEBUG","message":"Current balance before update","data":{"total":9850291,"available":9767567,"used":82724,"transactionCount":293}}
{"timestamp":"2025-07-07T15:33:00.178Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:33:00.198Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:33:00.200Z","level":"DEBUG","message":"Current balance before update","data":{"total":9854041,"available":9771317,"used":82724,"transactionCount":294}}
{"timestamp":"2025-07-07T15:33:05.250Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:33:05.269Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T15:33:05.271Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:33:05.273Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T15:33:05.275Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T15:33:05.276Z","level":"DEBUG","message":"Current balance before update","data":{"total":99650,"available":88651,"used":10999,"transactionCount":46}}
{"timestamp":"2025-07-07T15:38:39.761Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:39.778Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:39.779Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.779Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:39.781Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:39.782Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.783Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:39.784Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:39.786Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:39.787Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.788Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:39.789Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.790Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:39.791Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:39.792Z","level":"DEBUG","message":"Current balance before update","data":{"total":9854041,"available":9771317,"used":82724,"transactionCount":295}}
{"timestamp":"2025-07-07T15:38:39.908Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:39.919Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:39.919Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.920Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:39.921Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:39.922Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.923Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:39.924Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:39.924Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:39.925Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.926Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:39.926Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.927Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:39.928Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:39.929Z","level":"DEBUG","message":"Current balance before update","data":{"total":9857791,"available":9775067,"used":82724,"transactionCount":296}}
{"timestamp":"2025-07-07T15:38:40.074Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:40.088Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:40.089Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.090Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:40.091Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:40.092Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.093Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:40.094Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:40.095Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:40.095Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.096Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:40.097Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.098Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:40.099Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:40.100Z","level":"DEBUG","message":"Current balance before update","data":{"total":9861541,"available":9778817,"used":82724,"transactionCount":297}}
{"timestamp":"2025-07-07T15:38:40.237Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:40.248Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:40.249Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.250Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:40.251Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:40.252Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.253Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:40.255Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:40.255Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:40.256Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.257Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:40.257Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.258Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:40.259Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:40.259Z","level":"DEBUG","message":"Current balance before update","data":{"total":9865291,"available":9782567,"used":82724,"transactionCount":298}}
{"timestamp":"2025-07-07T15:38:40.381Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:40.392Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:40.393Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.394Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:40.395Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:40.396Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.397Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:40.398Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:40.399Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:40.400Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.401Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:40.402Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.403Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:40.404Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:40.406Z","level":"DEBUG","message":"Current balance before update","data":{"total":9869041,"available":9786317,"used":82724,"transactionCount":299}}
{"timestamp":"2025-07-07T15:38:41.965Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:41.978Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:41.979Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:41.980Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:41.981Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:41.982Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:41.983Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:41.984Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:41.985Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:41.986Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:41.987Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:41.988Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:41.989Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:41.990Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:41.991Z","level":"DEBUG","message":"Current balance before update","data":{"total":9872791,"available":9790067,"used":82724,"transactionCount":300}}
{"timestamp":"2025-07-07T15:38:43.943Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:43.955Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:43.957Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.957Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15002}}
{"timestamp":"2025-07-07T15:38:43.958Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:43.959Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:43.960Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:43.961Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:43.962Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:43.963Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.963Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":15302}}
{"timestamp":"2025-07-07T15:38:43.964Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.965Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:43.966Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.967Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-07T15:38:43.969Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:43.970Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.971Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-07T15:38:43.972Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":6,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T15:38:43.973Z","level":"DEBUG","message":"Current balance before update","data":{"total":9876541,"available":9793817,"used":82724,"transactionCount":301}}
{"timestamp":"2025-07-07T15:38:44.115Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:44.124Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:44.125Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.126Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15002}}
{"timestamp":"2025-07-07T15:38:44.126Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.127Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.128Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:44.129Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:44.130Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:44.130Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.131Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.132Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":15302}}
{"timestamp":"2025-07-07T15:38:44.132Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.133Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:44.133Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.135Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-07T15:38:44.136Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.137Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.138Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-07T15:38:44.139Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":6,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T15:38:44.141Z","level":"DEBUG","message":"Current balance before update","data":{"total":9909145,"available":9826421,"used":82724,"transactionCount":302}}
{"timestamp":"2025-07-07T15:38:44.257Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:44.268Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:44.269Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.270Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15002}}
{"timestamp":"2025-07-07T15:38:44.271Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.272Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.273Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:44.274Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:44.275Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:44.275Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.276Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.276Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":15302}}
{"timestamp":"2025-07-07T15:38:44.277Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.278Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:44.279Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.279Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-07T15:38:44.280Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.281Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.282Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-07T15:38:44.282Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":6,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T15:38:44.283Z","level":"DEBUG","message":"Current balance before update","data":{"total":9941749,"available":9859025,"used":82724,"transactionCount":303}}
{"timestamp":"2025-07-07T15:38:46.579Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:46.591Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:38:46.592Z","level":"DEBUG","message":"Current balance before update","data":{"total":9974353,"available":9891629,"used":82724,"transactionCount":304}}
{"timestamp":"2025-07-07T15:38:48.491Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:48.506Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T15:38:48.507Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:48.508Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:48.509Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T15:38:48.510Z","level":"DEBUG","message":"Current balance before update","data":{"total":99800,"available":88801,"used":10999,"transactionCount":47}}
{"timestamp":"2025-07-07T15:38:54.124Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:54.135Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:38:54.136Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:54.137Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:54.138Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:38:54.139Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T15:38:56.132Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:56.144Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T15:38:56.145Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:56.145Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T15:38:56.147Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T15:38:56.148Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T15:39:03.659Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:39:03.674Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:39:03.676Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1}}
{"timestamp":"2025-07-07T15:39:03.677Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1}}
{"timestamp":"2025-07-07T15:39:03.678Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:39:03.679Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T15:39:12.011Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:39:12.027Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T15:39:12.027Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:39:12.028Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-12}}
{"timestamp":"2025-07-07T15:39:12.029Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T15:39:12.030Z","level":"DEBUG","message":"Current balance before update","data":{"total":226,"available":226,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T16:27:50.190Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:27:50.205Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T16:27:50.206Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:27:50.207Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T16:27:50.208Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T16:27:50.209Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:27:50.210Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T16:27:50.211Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T16:27:50.211Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T16:27:50.212Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:27:50.213Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T16:27:50.213Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:27:50.214Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T16:27:50.215Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T16:27:50.217Z","level":"DEBUG","message":"Current balance before update","data":{"total":9974353,"available":9891629,"used":82724,"transactionCount":305}}
{"timestamp":"2025-07-07T16:27:53.290Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:27:53.302Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T16:27:53.304Z","level":"DEBUG","message":"Current balance before update","data":{"total":9978103,"available":9895379,"used":82724,"transactionCount":306}}
{"timestamp":"2025-07-07T16:35:39.815Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:35:39.832Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T16:35:39.834Z","level":"DEBUG","message":"Current balance before update","data":{"total":9978103,"available":9895379,"used":82724,"transactionCount":307}}
{"timestamp":"2025-07-07T16:35:42.712Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:35:42.724Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T16:35:42.725Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:35:42.726Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T16:35:42.729Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T16:35:42.731Z","level":"DEBUG","message":"Current balance before update","data":{"total":99950,"available":88951,"used":10999,"transactionCount":48}}
{"timestamp":"2025-07-07T16:49:05.139Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:49:05.152Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T16:49:05.153Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:49:05.154Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T16:49:05.155Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T16:49:05.156Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:49:05.157Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T16:49:05.158Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T16:49:05.160Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T16:49:05.161Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:49:05.162Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T16:49:05.162Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:49:05.163Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T16:49:05.164Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T16:49:05.165Z","level":"DEBUG","message":"Current balance before update","data":{"total":9978103,"available":9895379,"used":82724,"transactionCount":308}}
{"timestamp":"2025-07-07T17:00:14.835Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T17:00:14.849Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T17:00:14.850Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":111111,"discountedAmount":111111,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T17:00:14.851Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":111111}}
{"timestamp":"2025-07-07T17:00:14.852Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T17:00:14.853Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-07T17:00:14.854Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":111111,"discountedAmount":111111,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T17:00:14.854Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T17:00:14.856Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":111111,"discountedAmount":111111,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T17:00:14.858Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-07T17:00:14.859Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T17:00:14.859Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":111111,"discountedAmount":111111,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T17:00:14.860Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-07T17:00:14.861Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T17:00:14.862Z","level":"DEBUG","message":"Current balance before update","data":{"total":162300,"available":154000,"used":8300,"transactionCount":40}}
{"timestamp":"2025-07-07T18:05:38.667Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T18:05:38.686Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T18:05:38.687Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T18:05:38.689Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":45000}}
{"timestamp":"2025-07-07T18:05:38.691Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T18:05:38.693Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T18:05:38.694Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T18:05:38.695Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":45300}}
{"timestamp":"2025-07-07T18:05:38.695Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T18:05:38.696Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T18:05:38.697Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":15000,"bonus":800,"description":"Basket threshold bonus - TWD 15000+ gets +800 MD"},"rule":"TW Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T18:05:38.698Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T18:05:38.699Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":800}}
{"timestamp":"2025-07-07T18:05:38.701Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T18:05:38.703Z","level":"DEBUG","message":"Current balance before update","data":{"total":43675,"available":43175,"used":500,"transactionCount":25}}
{"timestamp":"2025-07-08T00:35:06.964Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:07.001Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T00:35:07.004Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:07.007Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T00:35:07.012Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T00:35:07.014Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:07.017Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T00:35:07.020Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T00:35:07.022Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T00:35:07.025Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:07.028Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T00:35:07.030Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:07.032Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T00:35:07.034Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T00:35:07.037Z","level":"DEBUG","message":"Current balance before update","data":{"total":9981853,"available":9899129,"used":82724,"transactionCount":309}}
{"timestamp":"2025-07-08T00:35:10.006Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:10.036Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-08T00:35:10.039Z","level":"DEBUG","message":"Current balance before update","data":{"total":9985603,"available":9902879,"used":82724,"transactionCount":310}}
{"timestamp":"2025-07-08T00:35:12.146Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:12.170Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-08T00:35:12.173Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:12.175Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-08T00:35:12.179Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-08T00:35:12.183Z","level":"DEBUG","message":"Current balance before update","data":{"total":100100,"available":89101,"used":10999,"transactionCount":49}}
{"timestamp":"2025-07-08T00:35:20.812Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:20.838Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-08T00:35:20.840Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:20.842Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-08T00:35:20.845Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-08T00:35:20.847Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-08T00:35:37.073Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:37.096Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-08T00:35:37.099Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:37.101Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-08T00:35:37.104Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-08T00:35:37.107Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-08T00:35:40.781Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:40.804Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-08T00:35:40.806Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:40.807Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-08T00:35:40.810Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-08T00:35:40.812Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-08T00:35:43.142Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:43.165Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-08T00:35:43.166Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-08T00:35:43.167Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-08T00:35:43.169Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-08T00:35:43.172Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-08T00:35:48.801Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:48.834Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-08T00:35:48.837Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":8}}
{"timestamp":"2025-07-08T00:35:48.840Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":8}}
{"timestamp":"2025-07-08T00:35:48.842Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-08T00:35:48.846Z","level":"DEBUG","message":"Current balance before update","data":{"total":1300,"available":1300,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-08T00:35:51.869Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:51.895Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-08T00:35:51.899Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:51.901Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-08T00:35:51.903Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-08T00:35:51.905Z","level":"DEBUG","message":"Current balance before update","data":{"total":1308,"available":1308,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-08T00:35:53.429Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:53.457Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-08T00:35:53.459Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:53.460Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-08T00:35:53.462Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-08T00:35:53.464Z","level":"DEBUG","message":"Current balance before update","data":{"total":1308,"available":808,"used":500,"transactionCount":6}}
{"timestamp":"2025-07-08T00:40:31.638Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:40:31.661Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T00:40:31.664Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:40:31.666Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T00:40:31.670Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T00:40:31.672Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:40:31.674Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T00:40:31.676Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T00:40:31.678Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T00:40:31.679Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:40:31.681Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T00:40:31.682Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:40:31.683Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T00:40:31.686Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T00:40:31.688Z","level":"DEBUG","message":"Current balance before update","data":{"total":9985603,"available":9902879,"used":82724,"transactionCount":311}}

{"timestamp":"2025-07-07T14:02:05.718Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:05.720Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:05.721Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:05.723Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:05.726Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:05.727Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:05.729Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:05.730Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:05.732Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:05.733Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:05.735Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:05.736Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:05.737Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:05.738Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:05.739Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:05.740Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:05.740Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:05.741Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:05.742Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:05.749Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:02:05.750Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:05.752Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:02:05.753Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:02:05.754Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:02:05.757Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:02:05.758Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:05.759Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:02:05.761Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:02:05.762Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:05.764Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:02:05.765Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:02:05.766Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:02:05.767Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:05.768Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:02:05.769Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:05.770Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:02:05.771Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:02:05.772Z","level":"DEBUG","message":"Current balance before update","data":{"total":9703198,"available":9638074,"used":65124,"transactionCount":175}}
{"timestamp":"2025-07-07T14:02:05.773Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:05.774Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:02:05.775Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9706948,"newAvailable":9641824,"newUsed":65124}}
{"timestamp":"2025-07-07T14:02:05.776Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9706948,"available":9641824,"used":65124,"transactionCount":176}}}
{"timestamp":"2025-07-07T14:02:05.777Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9703198,"available":9638074,"used":65124,"transactionCount":175}}}
{"timestamp":"2025-07-07T14:02:05.779Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9706948,"available":9641824,"used":65124,"transactionCount":176}}}
{"timestamp":"2025-07-07T14:02:05.781Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:05.798Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:02:05.782Z"}}
{"timestamp":"2025-07-07T14:02:34.065Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:34.067Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:34.069Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:34.070Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:34.073Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:34.074Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:34.077Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:34.079Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:34.080Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:34.081Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:34.084Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:34.085Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:34.087Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:34.088Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:34.089Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:34.090Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:34.091Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:34.092Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:34.094Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:34.101Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:02:34.102Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:34.103Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:02:34.104Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:02:34.105Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:02:34.107Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:02:34.108Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:34.109Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:02:34.110Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:02:34.112Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:34.113Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:02:34.115Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:02:34.116Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:02:34.117Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:34.118Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:02:34.119Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:34.120Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:02:34.121Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:02:34.123Z","level":"DEBUG","message":"Current balance before update","data":{"total":9706948,"available":9641824,"used":65124,"transactionCount":176}}
{"timestamp":"2025-07-07T14:02:34.124Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:34.125Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:02:34.126Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9710698,"newAvailable":9645574,"newUsed":65124}}
{"timestamp":"2025-07-07T14:02:34.128Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9710698,"available":9645574,"used":65124,"transactionCount":177}}}
{"timestamp":"2025-07-07T14:02:34.130Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9706948,"available":9641824,"used":65124,"transactionCount":176}}}
{"timestamp":"2025-07-07T14:02:34.131Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9710698,"available":9645574,"used":65124,"transactionCount":177}}}
{"timestamp":"2025-07-07T14:02:34.134Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:34.150Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:02:34.135Z"}}
{"timestamp":"2025-07-07T14:02:37.273Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:37.275Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:37.277Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:37.279Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:37.281Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:37.283Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:37.285Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:37.286Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:37.287Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:37.289Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:37.291Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:37.293Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:37.295Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:37.296Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:37.297Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:37.299Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:37.300Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:37.301Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:37.302Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:37.308Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:02:37.309Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:37.311Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:02:37.313Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:02:37.314Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:02:37.316Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:02:37.317Z","level":"DEBUG","message":"Current balance before update","data":{"total":9710698,"available":9645574,"used":65124,"transactionCount":177}}
{"timestamp":"2025-07-07T14:02:37.319Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:37.320Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:02:37.321Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9710698,"newAvailable":9645574,"newUsed":65124}}
{"timestamp":"2025-07-07T14:02:37.322Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9710698,"available":9645574,"used":65124,"transactionCount":178}}}
{"timestamp":"2025-07-07T14:02:37.324Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9710698,"available":9645574,"used":65124,"transactionCount":177}}}
{"timestamp":"2025-07-07T14:02:37.325Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9710698,"available":9645574,"used":65124,"transactionCount":178}}}
{"timestamp":"2025-07-07T14:02:37.328Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:02:39.239Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:39.245Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:39.248Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:39.251Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:39.258Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:39.260Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:39.264Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:39.265Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:39.267Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:39.270Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:39.275Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:39.278Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:39.282Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:39.283Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:39.285Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:39.286Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:39.287Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:39.288Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:39.288Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:39.297Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_jp_vip","market":"JP"}}
{"timestamp":"2025-07-07T14:02:39.299Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:02:39.301Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_jp_vip","tier":"VIP_DIAMOND","isVIP":true,"isBirthMonth":false,"recyclingBottles":12}}
{"timestamp":"2025-07-07T14:02:39.302Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_jp_vip","hasData":true}}
{"timestamp":"2025-07-07T14:02:39.302Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_jp_vip","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":false,"market":"JP","recycledCount":12}}
{"timestamp":"2025-07-07T14:02:39.303Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:02:39.305Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:39.306Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:02:39.308Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:02:39.309Z","level":"DEBUG","message":"Current balance before update","data":{"total":98600,"available":87601,"used":10999,"transactionCount":39}}
{"timestamp":"2025-07-07T14:02:39.310Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:39.311Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:02:39.312Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":98750,"newAvailable":87751,"newUsed":10999}}
{"timestamp":"2025-07-07T14:02:39.313Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_jp_vip","balanceData":{"total":98750,"available":87751,"used":10999,"transactionCount":40}}}
{"timestamp":"2025-07-07T14:02:39.314Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_jp_vip","oldBalance":{"total":98600,"available":87601,"used":10999,"transactionCount":39}}}
{"timestamp":"2025-07-07T14:02:39.315Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_jp_vip","newBalance":{"total":98750,"available":87751,"used":10999,"transactionCount":40}}}
{"timestamp":"2025-07-07T14:02:39.317Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:02:52.559Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:02:52.562Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:02:52.563Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:02:52.565Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:02:52.567Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:52.568Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:02:52.571Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:02:52.573Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:02:52.574Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:02:52.575Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:02:52.578Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:52.580Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:02:52.581Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:52.582Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:02:52.583Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:02:52.583Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:52.584Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:02:52.585Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:02:52.586Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:02:52.595Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_jp_vip_001","market":"JP"}}
{"timestamp":"2025-07-07T14:02:52.596Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_jp_vip_001"}}
{"timestamp":"2025-07-07T14:02:52.597Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_jp_vip_001","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:02:52.598Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_jp_vip_001","hasData":true}}
{"timestamp":"2025-07-07T14:02:52.599Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_jp_vip_001","eventType":"PURCHASE","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:02:52.600Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:02:52.601Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":1000,"discountedAmount":1000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:52.601Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":100}}
{"timestamp":"2025-07-07T14:02:52.602Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:02:52.603Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":1000,"discountedAmount":1000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:02:52.604Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":50}}
{"timestamp":"2025-07-07T14:02:52.605Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:02:52.606Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:02:52.607Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:02:52.607Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:02:52.608Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":150,"newAvailable":150,"newUsed":0}}
{"timestamp":"2025-07-07T14:02:52.609Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_jp_vip_001","balanceData":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:02:52.610Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_jp_vip_001","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:02:52.612Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_jp_vip_001","newBalance":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:02:52.614Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_jp_vip_001"}}
{"timestamp":"2025-07-07T14:02:52.634Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_jp_vip_001","timestamp":"2025-07-07T14:02:52.614Z"}}
{"timestamp":"2025-07-07T14:03:35.196Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:03:35.200Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:03:35.202Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:03:35.204Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:03:35.207Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:03:35.208Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:03:35.211Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:03:35.212Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:03:35.213Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:03:35.214Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:03:35.217Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:03:35.218Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:03:35.219Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:03:35.220Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:03:35.221Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:03:35.222Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:03:35.223Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:03:35.224Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:03:35.225Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:03:35.233Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:03:35.234Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:03:35.237Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:03:35.239Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:03:35.240Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:03:35.243Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:03:35.244Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:03:35.245Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:03:35.247Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:03:35.249Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:03:35.250Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:03:35.251Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:03:35.253Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:03:35.254Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:03:35.255Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:03:35.256Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:03:35.258Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:03:35.259Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:03:35.260Z","level":"DEBUG","message":"Current balance before update","data":{"total":9710698,"available":9645574,"used":65124,"transactionCount":178}}
{"timestamp":"2025-07-07T14:03:35.261Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:03:35.262Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:03:35.262Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9714448,"newAvailable":9649324,"newUsed":65124}}
{"timestamp":"2025-07-07T14:03:35.263Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9714448,"available":9649324,"used":65124,"transactionCount":179}}}
{"timestamp":"2025-07-07T14:03:35.264Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9710698,"available":9645574,"used":65124,"transactionCount":178}}}
{"timestamp":"2025-07-07T14:03:35.265Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9714448,"available":9649324,"used":65124,"transactionCount":179}}}
{"timestamp":"2025-07-07T14:03:35.267Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:03:35.289Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:03:35.268Z"}}
{"timestamp":"2025-07-07T14:04:32.102Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:04:32.106Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:04:32.107Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:04:32.108Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:04:32.111Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:04:32.112Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:04:32.114Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:04:32.115Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:04:32.116Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:04:32.117Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:04:32.119Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:04:32.119Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:04:32.120Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:04:32.121Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:04:32.122Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:04:32.123Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:04:32.123Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:04:32.124Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:04:32.125Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:04:32.130Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:04:32.131Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:04:32.132Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:04:32.133Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:04:32.134Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:04:32.137Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:04:32.138Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:04:32.140Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:04:32.142Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:04:32.143Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:04:32.144Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:04:32.145Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:04:32.146Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:04:32.147Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:04:32.147Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:04:32.148Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:04:32.148Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:04:32.149Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:04:32.150Z","level":"DEBUG","message":"Current balance before update","data":{"total":9714448,"available":9649324,"used":65124,"transactionCount":179}}
{"timestamp":"2025-07-07T14:04:32.151Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:04:32.152Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:04:32.152Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9718198,"newAvailable":9653074,"newUsed":65124}}
{"timestamp":"2025-07-07T14:04:32.153Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9718198,"available":9653074,"used":65124,"transactionCount":180}}}
{"timestamp":"2025-07-07T14:04:32.154Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9714448,"available":9649324,"used":65124,"transactionCount":179}}}
{"timestamp":"2025-07-07T14:04:32.155Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9718198,"available":9653074,"used":65124,"transactionCount":180}}}
{"timestamp":"2025-07-07T14:04:32.157Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:04:32.175Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:04:32.158Z"}}
{"timestamp":"2025-07-07T14:07:10.865Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:07:10.868Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:07:10.870Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:07:10.871Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:07:10.875Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:07:10.876Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:07:10.879Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:07:10.880Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:07:10.881Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:07:10.882Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:07:10.885Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:07:10.886Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:07:10.887Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:07:10.888Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:07:10.889Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:07:10.890Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:07:10.890Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:07:10.891Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:07:10.892Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:07:10.897Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:07:10.898Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:07:10.900Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:07:10.901Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:07:10.902Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:07:10.903Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:07:10.904Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:07:10.904Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:07:10.905Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:07:10.906Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:07:10.906Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:07:10.907Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:07:10.908Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:07:10.909Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:07:10.910Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:07:10.910Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:07:10.911Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:07:10.912Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:07:10.913Z","level":"DEBUG","message":"Current balance before update","data":{"total":9718198,"available":9653074,"used":65124,"transactionCount":180}}
{"timestamp":"2025-07-07T14:07:10.913Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:07:10.914Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:07:10.915Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9721948,"newAvailable":9656824,"newUsed":65124}}
{"timestamp":"2025-07-07T14:07:10.916Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9721948,"available":9656824,"used":65124,"transactionCount":181}}}
{"timestamp":"2025-07-07T14:07:10.918Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9718198,"available":9653074,"used":65124,"transactionCount":180}}}
{"timestamp":"2025-07-07T14:07:10.919Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9721948,"available":9656824,"used":65124,"transactionCount":181}}}
{"timestamp":"2025-07-07T14:07:10.921Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:07:10.939Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:07:10.921Z"}}
{"timestamp":"2025-07-07T14:15:11.471Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:15:11.473Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:15:11.474Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:15:11.474Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:15:11.477Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:15:11.477Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:15:11.479Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:15:11.479Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:15:11.480Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:15:11.481Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:15:11.482Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:15:11.483Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:15:11.483Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:15:11.484Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:15:11.485Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:15:11.486Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:15:11.486Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:15:11.487Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:15:11.487Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:15:11.492Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"123456","market":"JP"}}
{"timestamp":"2025-07-07T14:15:11.493Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"123456"}}
{"timestamp":"2025-07-07T14:15:11.494Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"123456","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:15:11.495Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"123456","hasData":true}}
{"timestamp":"2025-07-07T14:15:11.496Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"123456","eventType":"PURCHASE","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:15:11.499Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:15:11.500Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:15:11.501Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-07T14:15:11.503Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:15:11.504Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:15:11.505Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":0}}
{"timestamp":"2025-07-07T14:15:11.506Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:15:11.507Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:15:11.508Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:15:11.509Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:15:11.509Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":0,"newAvailable":0,"newUsed":0}}
{"timestamp":"2025-07-07T14:15:11.510Z","level":"DEBUG","message":"New balance to update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:15:11.510Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"123456","balanceData":{"total":0,"available":0,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:15:11.511Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"123456","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:15:11.512Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"123456","newBalance":{"total":0,"available":0,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:15:11.514Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"123456"}}
{"timestamp":"2025-07-07T14:15:11.531Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"123456","timestamp":"2025-07-07T14:15:11.514Z"}}
{"timestamp":"2025-07-07T14:16:10.753Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:16:10.754Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:16:10.755Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:16:10.756Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:16:10.758Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:10.759Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:10.760Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:16:10.761Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:16:10.762Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:16:10.763Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:16:10.765Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:10.765Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:10.766Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:10.766Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:16:10.767Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:10.768Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:10.769Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:16:10.770Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:16:10.770Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:10.776Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:16:10.776Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:16:10.778Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:16:10.778Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:16:10.779Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:16:10.780Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:16:10.781Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:10.782Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:16:10.783Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:16:10.783Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:10.784Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:16:10.785Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:16:10.786Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:16:10.786Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:10.787Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:16:10.788Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:10.789Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:16:10.789Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:16:10.790Z","level":"DEBUG","message":"Current balance before update","data":{"total":9721948,"available":9656824,"used":65124,"transactionCount":181}}
{"timestamp":"2025-07-07T14:16:10.791Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:16:10.792Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:16:10.793Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9725698,"newAvailable":9660574,"newUsed":65124}}
{"timestamp":"2025-07-07T14:16:10.794Z","level":"DEBUG","message":"New balance to update","data":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}
{"timestamp":"2025-07-07T14:16:10.794Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}}
{"timestamp":"2025-07-07T14:16:10.795Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9721948,"available":9656824,"used":65124,"transactionCount":181}}}
{"timestamp":"2025-07-07T14:16:10.796Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}}
{"timestamp":"2025-07-07T14:16:10.798Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:16:10.814Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:16:10.798Z"}}
{"timestamp":"2025-07-07T14:16:14.218Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:16:14.220Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:16:14.220Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:16:14.221Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:16:14.222Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:14.223Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:14.225Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:16:14.225Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:16:14.227Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:16:14.227Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:16:14.229Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:14.229Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:14.230Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:14.231Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:16:14.231Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:14.232Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:14.232Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:16:14.233Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:16:14.234Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:14.238Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:16:14.239Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:16:14.240Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:16:14.241Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:16:14.242Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:16:14.243Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:16:14.244Z","level":"DEBUG","message":"Current balance before update","data":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}
{"timestamp":"2025-07-07T14:16:14.245Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:16:14.245Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:16:14.246Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9725698,"newAvailable":9660574,"newUsed":65124}}
{"timestamp":"2025-07-07T14:16:14.247Z","level":"DEBUG","message":"New balance to update","data":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}
{"timestamp":"2025-07-07T14:16:14.247Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}}
{"timestamp":"2025-07-07T14:16:14.248Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9725698,"available":9660574,"used":65124,"transactionCount":182}}}
{"timestamp":"2025-07-07T14:16:14.249Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}}
{"timestamp":"2025-07-07T14:16:14.251Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:16:17.836Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:16:17.837Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:16:17.838Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:16:17.840Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:16:17.842Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:17.843Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:16:17.845Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:16:17.846Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:16:17.847Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:16:17.848Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:16:17.850Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:17.851Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:16:17.852Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:17.853Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:16:17.853Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:16:17.854Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:17.855Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:16:17.856Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:16:17.858Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:16:17.863Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_jp_vip","market":"JP"}}
{"timestamp":"2025-07-07T14:16:17.864Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:16:17.865Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_jp_vip","tier":"VIP_DIAMOND","isVIP":true,"isBirthMonth":false,"recyclingBottles":12}}
{"timestamp":"2025-07-07T14:16:17.866Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_jp_vip","hasData":true}}
{"timestamp":"2025-07-07T14:16:17.866Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_jp_vip","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":false,"market":"JP","recycledCount":12}}
{"timestamp":"2025-07-07T14:16:17.867Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:16:17.868Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:16:17.869Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:16:17.870Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:16:17.871Z","level":"DEBUG","message":"Current balance before update","data":{"total":98750,"available":87751,"used":10999,"transactionCount":40}}
{"timestamp":"2025-07-07T14:16:17.872Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:16:17.873Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:16:17.874Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":98900,"newAvailable":87901,"newUsed":10999}}
{"timestamp":"2025-07-07T14:16:17.874Z","level":"DEBUG","message":"New balance to update","data":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}
{"timestamp":"2025-07-07T14:16:17.875Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_jp_vip","balanceData":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}}
{"timestamp":"2025-07-07T14:16:17.876Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_jp_vip","oldBalance":{"total":98750,"available":87751,"used":10999,"transactionCount":40}}}
{"timestamp":"2025-07-07T14:16:17.876Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_jp_vip","newBalance":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}}
{"timestamp":"2025-07-07T14:16:17.878Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:20:18.307Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:20:18.309Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:20:18.310Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:20:18.311Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:20:18.313Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:20:18.313Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:20:18.315Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:20:18.316Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:20:18.317Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:20:18.317Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:20:18.319Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:20:18.320Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:20:18.321Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:20:18.322Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:20:18.322Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:20:18.323Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:20:18.324Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:20:18.325Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:20:18.325Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:20:18.331Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"789012","market":"JP"}}
{"timestamp":"2025-07-07T14:20:18.332Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"789012"}}
{"timestamp":"2025-07-07T14:20:18.333Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"789012","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:20:18.334Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"789012","hasData":true}}
{"timestamp":"2025-07-07T14:20:18.334Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"789012","eventType":"PURCHASE","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:20:18.335Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:20:18.336Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:18.337Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-07T14:20:18.338Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:20:18.339Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:18.340Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":0}}
{"timestamp":"2025-07-07T14:20:18.341Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:20:18.341Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:20:18.342Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:20:18.343Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:20:18.344Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":0,"newAvailable":0,"newUsed":0}}
{"timestamp":"2025-07-07T14:20:18.345Z","level":"DEBUG","message":"New balance to update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:20:18.346Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"789012","balanceData":{"total":0,"available":0,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:20:18.348Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"789012","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:20:18.348Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"789012","newBalance":{"total":0,"available":0,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:20:18.351Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"789012"}}
{"timestamp":"2025-07-07T14:20:18.369Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"789012","timestamp":"2025-07-07T14:20:18.352Z"}}
{"timestamp":"2025-07-07T14:20:58.594Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:20:58.596Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:20:58.597Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:20:58.598Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:20:58.599Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:20:58.600Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:20:58.602Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:20:58.602Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:20:58.603Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:20:58.604Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:20:58.605Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:20:58.606Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:20:58.606Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:20:58.607Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:20:58.608Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:20:58.608Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:20:58.609Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:20:58.609Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:20:58.611Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:20:58.615Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:20:58.616Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:20:58.617Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:20:58.618Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:20:58.618Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:20:58.619Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:20:58.621Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:58.621Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:20:58.622Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:20:58.623Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:58.624Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:20:58.625Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:20:58.626Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:20:58.627Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:58.628Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:20:58.629Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:20:58.630Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:20:58.631Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:20:58.632Z","level":"DEBUG","message":"Current balance before update","data":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}
{"timestamp":"2025-07-07T14:20:58.632Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:20:58.633Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:20:58.634Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9729448,"newAvailable":9664324,"newUsed":65124}}
{"timestamp":"2025-07-07T14:20:58.634Z","level":"DEBUG","message":"New balance to update","data":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}
{"timestamp":"2025-07-07T14:20:58.635Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}}
{"timestamp":"2025-07-07T14:20:58.636Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9725698,"available":9660574,"used":65124,"transactionCount":183}}}
{"timestamp":"2025-07-07T14:20:58.636Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}}
{"timestamp":"2025-07-07T14:20:58.638Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:20:58.658Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:20:58.639Z"}}
{"timestamp":"2025-07-07T14:21:00.019Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:00.020Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:00.021Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:00.022Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:00.023Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:00.024Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:00.025Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:00.026Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:00.027Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:00.027Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:00.029Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:00.030Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:00.031Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:00.031Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:00.032Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:00.033Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:00.034Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:00.034Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:00.035Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:00.039Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:21:00.040Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:21:00.041Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:21:00.041Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:21:00.042Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"PURCHASE","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:21:00.043Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:21:00.044Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:00.045Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:21:00.046Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:21:00.047Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:00.048Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:00.048Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:21:00.049Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:21:00.050Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:00.051Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:21:00.051Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:00.052Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:21:00.053Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:21:00.054Z","level":"DEBUG","message":"Current balance before update","data":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}
{"timestamp":"2025-07-07T14:21:00.054Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":3750,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:00.055Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":3750}}
{"timestamp":"2025-07-07T14:21:00.056Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9733198,"newAvailable":9668074,"newUsed":65124}}
{"timestamp":"2025-07-07T14:21:00.057Z","level":"DEBUG","message":"New balance to update","data":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}
{"timestamp":"2025-07-07T14:21:00.057Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}}
{"timestamp":"2025-07-07T14:21:00.058Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9729448,"available":9664324,"used":65124,"transactionCount":184}}}
{"timestamp":"2025-07-07T14:21:00.059Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}}
{"timestamp":"2025-07-07T14:21:00.062Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:21:00.078Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"user_hk_vip_birthday","timestamp":"2025-07-07T14:21:00.063Z"}}
{"timestamp":"2025-07-07T14:21:04.058Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:04.061Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:04.063Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:04.064Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:04.068Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:04.069Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:04.072Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:04.073Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:04.074Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:04.076Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:04.079Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:04.080Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:04.081Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:04.082Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:04.083Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:04.084Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:04.086Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:04.087Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:04.088Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:04.095Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_hk_vip_birthday","market":"HK"}}
{"timestamp":"2025-07-07T14:21:04.096Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:21:04.098Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_hk_vip_birthday","tier":"VIP_PLATINUM","isVIP":true,"isBirthMonth":true,"recyclingBottles":8}}
{"timestamp":"2025-07-07T14:21:04.100Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_hk_vip_birthday","hasData":true}}
{"timestamp":"2025-07-07T14:21:04.101Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_hk_vip_birthday","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":true,"market":"HK","recycledCount":8}}
{"timestamp":"2025-07-07T14:21:04.103Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:21:04.105Z","level":"DEBUG","message":"Current balance before update","data":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}
{"timestamp":"2025-07-07T14:21:04.106Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":0,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:04.106Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":0}}
{"timestamp":"2025-07-07T14:21:04.107Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":9733198,"newAvailable":9668074,"newUsed":65124}}
{"timestamp":"2025-07-07T14:21:04.108Z","level":"DEBUG","message":"New balance to update","data":{"total":9733198,"available":9668074,"used":65124,"transactionCount":186}}
{"timestamp":"2025-07-07T14:21:04.109Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_hk_vip_birthday","balanceData":{"total":9733198,"available":9668074,"used":65124,"transactionCount":186}}}
{"timestamp":"2025-07-07T14:21:04.111Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_hk_vip_birthday","oldBalance":{"total":9733198,"available":9668074,"used":65124,"transactionCount":185}}}
{"timestamp":"2025-07-07T14:21:04.113Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_hk_vip_birthday","newBalance":{"total":9733198,"available":9668074,"used":65124,"transactionCount":186}}}
{"timestamp":"2025-07-07T14:21:04.116Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_hk_vip_birthday"}}
{"timestamp":"2025-07-07T14:21:07.664Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:07.667Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:07.669Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:07.670Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:07.673Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:07.674Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:07.677Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:07.679Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:07.680Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:07.681Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:07.684Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:07.685Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:07.686Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:07.687Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:07.688Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:07.689Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:07.690Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:07.691Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:07.692Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:07.700Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"user_jp_vip","market":"JP"}}
{"timestamp":"2025-07-07T14:21:07.700Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:21:07.702Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"user_jp_vip","tier":"VIP_DIAMOND","isVIP":true,"isBirthMonth":false,"recyclingBottles":12}}
{"timestamp":"2025-07-07T14:21:07.704Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"user_jp_vip","hasData":true}}
{"timestamp":"2025-07-07T14:21:07.705Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"user_jp_vip","eventType":"REGISTRATION","isVIP":true,"isBirthMonth":false,"market":"JP","recycledCount":12}}
{"timestamp":"2025-07-07T14:21:07.707Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:21:07.708Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:07.709Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:07.711Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:21:07.714Z","level":"DEBUG","message":"Current balance before update","data":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}
{"timestamp":"2025-07-07T14:21:07.715Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:07.716Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:21:07.718Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":99050,"newAvailable":88051,"newUsed":10999}}
{"timestamp":"2025-07-07T14:21:07.719Z","level":"DEBUG","message":"New balance to update","data":{"total":99050,"available":88051,"used":10999,"transactionCount":42}}
{"timestamp":"2025-07-07T14:21:07.719Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"user_jp_vip","balanceData":{"total":99050,"available":88051,"used":10999,"transactionCount":42}}}
{"timestamp":"2025-07-07T14:21:07.720Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"user_jp_vip","oldBalance":{"total":98900,"available":87901,"used":10999,"transactionCount":41}}}
{"timestamp":"2025-07-07T14:21:07.722Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"user_jp_vip","newBalance":{"total":99050,"available":88051,"used":10999,"transactionCount":42}}}
{"timestamp":"2025-07-07T14:21:07.724Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"user_jp_vip"}}
{"timestamp":"2025-07-07T14:21:10.025Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:10.029Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:10.030Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:10.032Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:10.036Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:10.037Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:10.041Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:10.042Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:10.044Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:10.045Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:10.048Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:10.049Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:10.051Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:10.052Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:10.053Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:10.053Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:10.055Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:10.056Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:10.057Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:10.063Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"fafafa","market":"JP"}}
{"timestamp":"2025-07-07T14:21:10.065Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:10.067Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"fafafa","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:21:10.068Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"fafafa","hasData":true}}
{"timestamp":"2025-07-07T14:21:10.070Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"fafafa","eventType":"REGISTRATION","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:21:10.073Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:21:10.074Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:10.076Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:10.078Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:21:10.080Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:21:10.081Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:10.082Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:21:10.083Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":150,"newAvailable":150,"newUsed":0}}
{"timestamp":"2025-07-07T14:21:10.085Z","level":"DEBUG","message":"New balance to update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:21:10.086Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"fafafa","balanceData":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:21:10.088Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"fafafa","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:21:10.089Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"fafafa","newBalance":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:21:10.093Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:11.115Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:11.118Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:11.119Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:11.120Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:11.123Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:11.125Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:11.128Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:11.129Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:11.131Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:11.132Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:11.135Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:11.136Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:11.138Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:11.139Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:11.140Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:11.141Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:11.142Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:11.143Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:11.145Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:11.151Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"fafafa","market":"JP"}}
{"timestamp":"2025-07-07T14:21:11.152Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:11.153Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"fafafa","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:21:11.154Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"fafafa","hasData":true}}
{"timestamp":"2025-07-07T14:21:11.155Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"fafafa","eventType":"REGISTRATION","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:21:11.156Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:21:11.157Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:11.157Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:11.159Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:21:11.161Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:21:11.162Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:11.163Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:21:11.165Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":300,"newAvailable":300,"newUsed":0}}
{"timestamp":"2025-07-07T14:21:11.166Z","level":"DEBUG","message":"New balance to update","data":{"total":300,"available":300,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T14:21:11.167Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"fafafa","balanceData":{"total":300,"available":300,"used":0,"transactionCount":2}}}
{"timestamp":"2025-07-07T14:21:11.169Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"fafafa","oldBalance":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:21:11.169Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"fafafa","newBalance":{"total":300,"available":300,"used":0,"transactionCount":2}}}
{"timestamp":"2025-07-07T14:21:11.171Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:12.127Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:12.131Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:12.132Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:12.134Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:12.137Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:12.138Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:12.141Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:12.143Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:12.144Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:12.145Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:12.148Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:12.149Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:12.150Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:12.152Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:12.153Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:12.154Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:12.155Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:12.157Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:12.158Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:12.165Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"fafafa","market":"JP"}}
{"timestamp":"2025-07-07T14:21:12.167Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:12.169Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"fafafa","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:21:12.170Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"fafafa","hasData":true}}
{"timestamp":"2025-07-07T14:21:12.171Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"fafafa","eventType":"REGISTRATION","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:21:12.173Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:21:12.174Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:12.175Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:21:12.178Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:21:12.180Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T14:21:12.181Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:12.182Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:21:12.184Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":450,"newAvailable":450,"newUsed":0}}
{"timestamp":"2025-07-07T14:21:12.185Z","level":"DEBUG","message":"New balance to update","data":{"total":450,"available":450,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T14:21:12.186Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"fafafa","balanceData":{"total":450,"available":450,"used":0,"transactionCount":3}}}
{"timestamp":"2025-07-07T14:21:12.188Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"fafafa","oldBalance":{"total":300,"available":300,"used":0,"transactionCount":2}}}
{"timestamp":"2025-07-07T14:21:12.189Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"fafafa","newBalance":{"total":450,"available":450,"used":0,"transactionCount":3}}}
{"timestamp":"2025-07-07T14:21:12.193Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:18.108Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:21:18.112Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:21:18.113Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:21:18.114Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:21:18.117Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:18.119Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:21:18.121Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:21:18.122Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:21:18.124Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:21:18.125Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:21:18.129Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:18.130Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:21:18.131Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:18.131Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:21:18.132Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:21:18.133Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:18.134Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:21:18.135Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:21:18.135Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:21:18.140Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"fafafa","market":"JP"}}
{"timestamp":"2025-07-07T14:21:18.141Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:18.142Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"fafafa","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:21:18.143Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"fafafa","hasData":true}}
{"timestamp":"2025-07-07T14:21:18.145Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"fafafa","eventType":"PURCHASE","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:21:18.146Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:21:18.147Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:18.148Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-07T14:21:18.149Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:21:18.149Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:21:18.150Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-07T14:21:18.151Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:21:18.152Z","level":"DEBUG","message":"Current balance before update","data":{"total":450,"available":450,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T14:21:18.153Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":22500,"isRedemption":false}}
{"timestamp":"2025-07-07T14:21:18.154Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":22500}}
{"timestamp":"2025-07-07T14:21:18.155Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":22950,"newAvailable":22950,"newUsed":0}}
{"timestamp":"2025-07-07T14:21:18.156Z","level":"DEBUG","message":"New balance to update","data":{"total":22950,"available":22950,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T14:21:18.156Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"fafafa","balanceData":{"total":22950,"available":22950,"used":0,"transactionCount":4}}}
{"timestamp":"2025-07-07T14:21:18.158Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"fafafa","oldBalance":{"total":450,"available":450,"used":0,"transactionCount":3}}}
{"timestamp":"2025-07-07T14:21:18.159Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"fafafa","newBalance":{"total":22950,"available":22950,"used":0,"transactionCount":4}}}
{"timestamp":"2025-07-07T14:21:18.163Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"fafafa"}}
{"timestamp":"2025-07-07T14:21:18.182Z","level":"DEBUG","message":"Updated last order date for consumer","data":{"consumerId":"fafafa","timestamp":"2025-07-07T14:21:18.164Z"}}
{"timestamp":"2025-07-07T14:22:03.945Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:22:03.947Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]}}}
{"timestamp":"2025-07-07T14:22:03.947Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":10000}]}}}
{"timestamp":"2025-07-07T14:22:03.948Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"TW"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":15000}]}}}
{"timestamp":"2025-07-07T14:22:03.950Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isBirthMonth","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:22:03.950Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"isVIP","operator":"equal","value":true}]}}}
{"timestamp":"2025-07-07T14:22:03.952Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"FTE_SKU_001"}]}}}
{"timestamp":"2025-07-07T14:22:03.952Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"productLine","operator":"equal","value":"ESSENCE_SERIES"}]}}}
{"timestamp":"2025-07-07T14:22:03.953Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_X"},{"fact":"attributes.skuList","operator":"contains","value":"SKU_Y"}]}}}
{"timestamp":"2025-07-07T14:22:03.954Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"attributes.comboTag","operator":"equal","value":"COMBO_MOISTURE_SET"}]}}}
{"timestamp":"2025-07-07T14:22:03.955Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_REGISTRY_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REGISTRATION"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:22:03.956Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"}]}}}
{"timestamp":"2025-07-07T14:22:03.956Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_BASE_POINT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:22:03.957Z","level":"DEBUG","message":"Added rule","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"JP"},{"fact":"eventDate","operator":"greaterThanInclusive","value":"2025-06-01"},{"fact":"eventDate","operator":"lessThanInclusive","value":"2025-08-31"}]}}}
{"timestamp":"2025-07-07T14:22:03.958Z","level":"DEBUG","message":"Added rule","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"in","value":["HK","TW"]}]}}}
{"timestamp":"2025-07-07T14:22:03.959Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"RECYCLE"},{"fact":"attributes.recycledCount","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:22:03.960Z","level":"DEBUG","message":"Added rule","data":{"eventType":"CONSULTATION_BONUS","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"CONSULTATION"},{"fact":"attributes.skinTestDate","operator":"notEqual","value":null}]}}}
{"timestamp":"2025-07-07T14:22:03.960Z","level":"DEBUG","message":"Added rule","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"ADJUSTMENT"}]}}}
{"timestamp":"2025-07-07T14:22:03.961Z","level":"DEBUG","message":"Added rule","data":{"eventType":"REDEMPTION_DEDUCTION","conditions":{"all":[{"fact":"eventType","operator":"equal","value":"REDEMPTION"},{"fact":"redemptionPoints","operator":"greaterThan","value":0}]}}}
{"timestamp":"2025-07-07T14:22:03.965Z","level":"DEBUG","message":"Set market for consumer","data":{"consumerId":"TEST_USER","market":"JP"}}
{"timestamp":"2025-07-07T14:22:03.966Z","level":"DEBUG","message":"Fetching enriched consumer data from CDP","data":{"consumerId":"TEST_USER"}}
{"timestamp":"2025-07-07T14:22:03.967Z","level":"DEBUG","message":"CDP enriched data","data":{"consumerId":"TEST_USER","isVIP":false,"isBirthMonth":false,"recyclingBottles":0}}
{"timestamp":"2025-07-07T14:22:03.968Z","level":"DEBUG","message":"CDP enriched attributes received","data":{"consumerId":"TEST_USER","hasData":true}}
{"timestamp":"2025-07-07T14:22:03.968Z","level":"DEBUG","message":"Enriched event data with CDP","data":{"consumerId":"TEST_USER","eventType":"REGISTRATION","isVIP":false,"isBirthMonth":false,"market":"JP","recycledCount":0}}
{"timestamp":"2025-07-07T14:22:03.969Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:22:03.970Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:22:03.970Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:22:03.971Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:22:03.973Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:22:03.973Z","level":"DEBUG","message":"Balance calculation","data":{"totalRewardsAwarded":150,"isRedemption":false}}
{"timestamp":"2025-07-07T14:22:03.974Z","level":"DEBUG","message":"Processing earning","data":{"pointsToAdd":150}}
{"timestamp":"2025-07-07T14:22:03.974Z","level":"DEBUG","message":"Earning logic applied","data":{"newTotal":150,"newAvailable":150,"newUsed":0}}
{"timestamp":"2025-07-07T14:22:03.975Z","level":"DEBUG","message":"New balance to update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:22:03.976Z","level":"DEBUG","message":"Updating balance","data":{"consumerId":"TEST_USER","balanceData":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:22:03.977Z","level":"DEBUG","message":"Previous balance","data":{"consumerId":"TEST_USER","oldBalance":{"total":0,"available":0,"used":0,"version":1}}}
{"timestamp":"2025-07-07T14:22:03.978Z","level":"DEBUG","message":"New balance updated","data":{"consumerId":"TEST_USER","newBalance":{"total":150,"available":150,"used":0,"transactionCount":1}}}
{"timestamp":"2025-07-07T14:22:03.980Z","level":"DEBUG","message":"Balance update complete","data":{"consumerId":"TEST_USER"}}
{"timestamp":"2025-07-07T14:23:55.890Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:23:55.903Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:23:55.904Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:55.905Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:23:55.907Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:23:55.907Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:55.908Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:23:55.909Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:23:55.909Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:23:55.910Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:55.911Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:23:55.912Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:55.912Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:23:55.913Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:23:55.914Z","level":"DEBUG","message":"Current balance before update","data":{"total":9733198,"available":9668074,"used":65124,"transactionCount":186}}
{"timestamp":"2025-07-07T14:23:57.677Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:23:57.688Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:23:57.689Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:57.690Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:23:57.691Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:23:57.692Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:57.693Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:23:57.693Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:23:57.694Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:23:57.695Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:57.695Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:23:57.696Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:57.696Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:23:57.697Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:23:57.698Z","level":"DEBUG","message":"Current balance before update","data":{"total":9736948,"available":9671824,"used":65124,"transactionCount":187}}
{"timestamp":"2025-07-07T14:23:58.089Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:23:58.098Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:23:58.099Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:58.100Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:23:58.101Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:23:58.102Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:58.103Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:23:58.104Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:23:58.104Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:23:58.105Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:58.106Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:23:58.107Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:23:58.107Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:23:58.108Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:23:58.109Z","level":"DEBUG","message":"Current balance before update","data":{"total":9740698,"available":9675574,"used":65124,"transactionCount":188}}
{"timestamp":"2025-07-07T14:24:01.324Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:01.337Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:01.339Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:01.340Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:01.341Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:01.342Z","level":"DEBUG","message":"Current balance before update","data":{"total":99050,"available":88051,"used":10999,"transactionCount":42}}
{"timestamp":"2025-07-07T14:24:02.815Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:02.826Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:02.826Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:02.827Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:02.828Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:02.829Z","level":"DEBUG","message":"Current balance before update","data":{"total":99200,"available":88201,"used":10999,"transactionCount":43}}
{"timestamp":"2025-07-07T14:24:03.872Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:03.880Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:03.881Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:03.882Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:03.883Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:03.884Z","level":"DEBUG","message":"Current balance before update","data":{"total":99350,"available":88351,"used":10999,"transactionCount":44}}
{"timestamp":"2025-07-07T14:24:17.725Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:17.736Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:17.737Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:17.738Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:17.739Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:17.740Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:24:36.544Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:24:36.555Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:24:36.556Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:24:36.557Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:24:36.558Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:24:36.559Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:25:03.278Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:03.295Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:25:03.296Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:25:03.298Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:25:03.299Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:25:03.300Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:25:04.109Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:04.128Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:25:04.128Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:25:04.130Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:25:04.131Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:25:04.133Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T14:25:06.981Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:06.996Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:25:06.997Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:25:06.998Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:25:07.000Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:25:07.002Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T14:25:10.567Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:10.586Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:25:10.587Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T14:25:10.588Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T14:25:10.589Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:25:10.590Z","level":"DEBUG","message":"Current balance before update","data":{"total":375,"available":375,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T14:25:10.782Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:10.800Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:25:10.802Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T14:25:10.803Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T14:25:10.804Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:25:10.806Z","level":"DEBUG","message":"Current balance before update","data":{"total":1375,"available":1375,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-07T14:25:10.987Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:11.002Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:25:11.003Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T14:25:11.004Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T14:25:11.005Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:25:11.006Z","level":"DEBUG","message":"Current balance before update","data":{"total":2375,"available":2375,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-07T14:25:13.018Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:13.035Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:25:13.037Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":123}}
{"timestamp":"2025-07-07T14:25:13.038Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":123}}
{"timestamp":"2025-07-07T14:25:13.040Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:25:13.041Z","level":"DEBUG","message":"Current balance before update","data":{"total":3375,"available":3375,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-07T14:25:42.061Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:42.077Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:25:42.078Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679324,"used":65124,"transactionCount":189}}
{"timestamp":"2025-07-07T14:25:42.603Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:25:42.613Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:25:42.615Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679324,"used":65124,"transactionCount":190}}
{"timestamp":"2025-07-07T14:27:50.751Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:30:27.565Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:30:27.579Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:30:27.580Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:30:27.581Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":100}}
{"timestamp":"2025-07-07T14:30:27.582Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:30:27.583Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:31:00.344Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:31:00.368Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:31:00.371Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:32:34.850Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:32:44.880Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:32:44.894Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:32:44.895Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679324,"used":65124,"transactionCount":191}}
{"timestamp":"2025-07-07T14:32:51.892Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:32:51.902Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:32:51.903Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:32:51.904Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-100}}
{"timestamp":"2025-07-07T14:32:51.905Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:32:51.906Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679324,"used":65124,"transactionCount":192}}
{"timestamp":"2025-07-07T14:33:17.668Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:33:17.686Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:33:17.687Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:33:17.687Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:33:17.689Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:33:17.690Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744448,"available":9679224,"used":65224,"transactionCount":193}}
{"timestamp":"2025-07-07T14:37:00.753Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:37:00.770Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:37:00.771Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:37:00.773Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:37:00.775Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:37:00.776Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:37:32.799Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:37:32.810Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:37:32.811Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:37:32.812Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:37:32.813Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:37:32.814Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:37:41.777Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:37:41.788Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:37:41.789Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:37:41.790Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-50}}
{"timestamp":"2025-07-07T14:37:41.791Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:37:41.791Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:38:15.427Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:38:15.439Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:38:15.439Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:15.440Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:38:15.441Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:38:15.442Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:38:38.605Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:38:38.616Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:38:38.616Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:38.617Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:38:38.618Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:38:38.619Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:38.620Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:38:38.622Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:38:38.622Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:38:38.623Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:38.624Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:38:38.624Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:38.625Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:38:38.626Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:38:38.628Z","level":"DEBUG","message":"Current balance before update","data":{"total":9744523,"available":9679299,"used":65224,"transactionCount":194}}
{"timestamp":"2025-07-07T14:38:47.577Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:38:47.594Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:38:47.595Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:47.597Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:38:47.598Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:38:47.599Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:47.600Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:38:47.601Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:38:47.602Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:38:47.604Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:47.605Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:38:47.606Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:38:47.608Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:38:47.610Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:38:47.611Z","level":"DEBUG","message":"Current balance before update","data":{"total":9748273,"available":9683049,"used":65224,"transactionCount":195}}
{"timestamp":"2025-07-07T14:40:17.639Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:40:17.653Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:40:17.655Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:17.655Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:40:17.659Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:40:17.660Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:17.661Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:40:17.663Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:40:17.663Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:40:17.664Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:17.665Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:40:17.666Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:17.666Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:40:17.667Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:40:17.669Z","level":"DEBUG","message":"Current balance before update","data":{"total":9752023,"available":9686799,"used":65224,"transactionCount":196}}
{"timestamp":"2025-07-07T14:40:25.759Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:40:25.772Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:40:25.773Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:25.775Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:40:25.776Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:40:25.778Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755773,"available":9690549,"used":65224,"transactionCount":197}}
{"timestamp":"2025-07-07T14:40:45.240Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:40:45.256Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:40:45.256Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:45.258Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:40:45.260Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:40:45.262Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755848,"available":9690624,"used":65224,"transactionCount":198}}
{"timestamp":"2025-07-07T14:40:55.073Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:40:55.090Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:40:55.091Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:55.092Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":50}}
{"timestamp":"2025-07-07T14:40:55.094Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:40:55.095Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:40:55.097Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":25}}
{"timestamp":"2025-07-07T14:40:55.099Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:40:55.100Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:41:06.504Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:06.516Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:41:06.519Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:41:07.246Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:07.268Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:41:07.269Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:41:08.804Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:08.815Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:41:08.817Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:41:08.818Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:41:08.820Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:41:08.822Z","level":"DEBUG","message":"Current balance before update","data":{"total":99500,"available":88501,"used":10999,"transactionCount":45}}
{"timestamp":"2025-07-07T14:41:14.922Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:14.942Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:41:14.943Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:41:14.944Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:41:14.946Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:41:14.948Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:41:48.730Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:41:48.746Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:41:48.747Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:41:48.748Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:41:48.752Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:41:48.754Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:46:20.140Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:20.151Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:46:20.152Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:20.153Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:46:20.154Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:46:20.155Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T14:46:37.603Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:37.616Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:37.618Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:37.621Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:37.623Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:37.624Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T14:46:38.771Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:38.784Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:38.785Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:38.786Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:38.788Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:38.789Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T14:46:41.105Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:41.127Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:41.129Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:41.130Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:41.131Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:41.132Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-07T14:46:41.594Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:41.617Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:41.619Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:41.620Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:41.622Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:41.625Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-07T14:46:41.895Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:41.916Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:41.918Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:41.920Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:41.921Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:41.923Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-07T14:46:42.050Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:42.072Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:42.074Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:42.075Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:42.076Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:42.078Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":8}}
{"timestamp":"2025-07-07T14:46:42.215Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:46:42.233Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:46:42.234Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:46:42.235Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:46:42.235Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:46:42.236Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":9}}
{"timestamp":"2025-07-07T14:47:11.312Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:11.340Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:47:11.342Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:11.343Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-07T14:47:11.347Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:47:11.349Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:11.350Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-07T14:47:11.351Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:47:11.353Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":10}}
{"timestamp":"2025-07-07T14:47:11.582Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:11.604Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:47:11.606Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:11.607Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-07T14:47:11.610Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:47:11.611Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:11.612Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-07T14:47:11.614Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:47:11.616Z","level":"DEBUG","message":"Current balance before update","data":{"total":22800,"available":22800,"used":0,"transactionCount":11}}
{"timestamp":"2025-07-07T14:47:14.536Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:14.551Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:47:14.552Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:14.553Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:47:14.553Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:47:14.555Z","level":"DEBUG","message":"Current balance before update","data":{"total":45300,"available":45300,"used":0,"transactionCount":12}}
{"timestamp":"2025-07-07T14:47:24.545Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:24.556Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:24.557Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:24.558Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:24.559Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:24.560Z","level":"DEBUG","message":"Current balance before update","data":{"total":45300,"available":44800,"used":500,"transactionCount":13}}
{"timestamp":"2025-07-07T14:47:25.060Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:25.074Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:25.075Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:25.076Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:25.078Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:25.079Z","level":"DEBUG","message":"Current balance before update","data":{"total":45450,"available":44950,"used":500,"transactionCount":14}}
{"timestamp":"2025-07-07T14:47:25.498Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:25.509Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:25.510Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:25.511Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:25.512Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:25.513Z","level":"DEBUG","message":"Current balance before update","data":{"total":45600,"available":45100,"used":500,"transactionCount":15}}
{"timestamp":"2025-07-07T14:47:25.678Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:25.690Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:25.691Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:25.692Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:25.693Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:25.694Z","level":"DEBUG","message":"Current balance before update","data":{"total":45750,"available":45250,"used":500,"transactionCount":16}}
{"timestamp":"2025-07-07T14:47:25.956Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:25.966Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:25.967Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:25.968Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:25.969Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:25.970Z","level":"DEBUG","message":"Current balance before update","data":{"total":45900,"available":45400,"used":500,"transactionCount":17}}
{"timestamp":"2025-07-07T14:47:26.100Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:26.112Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:26.114Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:26.115Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:26.117Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:26.119Z","level":"DEBUG","message":"Current balance before update","data":{"total":46050,"available":45550,"used":500,"transactionCount":18}}
{"timestamp":"2025-07-07T14:47:31.552Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:31.565Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:31.567Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":4,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:31.568Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":200}}
{"timestamp":"2025-07-07T14:47:31.569Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:31.570Z","level":"DEBUG","message":"Current balance before update","data":{"total":46200,"available":45700,"used":500,"transactionCount":19}}
{"timestamp":"2025-07-07T14:47:33.658Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:33.670Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:33.671Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:33.672Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":250}}
{"timestamp":"2025-07-07T14:47:33.673Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:33.674Z","level":"DEBUG","message":"Current balance before update","data":{"total":46400,"available":45900,"used":500,"transactionCount":20}}
{"timestamp":"2025-07-07T14:47:55.372Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:55.384Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-07T14:47:55.384Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:55.385Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-07T14:47:55.387Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-07T14:47:55.388Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:55.388Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-07T14:47:55.389Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-07T14:47:55.390Z","level":"DEBUG","message":"Current balance before update","data":{"total":46650,"available":46150,"used":500,"transactionCount":21}}
{"timestamp":"2025-07-07T14:47:57.350Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:57.360Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T14:47:57.361Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:57.362Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:57.363Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T14:47:57.364Z","level":"DEBUG","message":"Current balance before update","data":{"total":69150,"available":68650,"used":500,"transactionCount":22}}
{"timestamp":"2025-07-07T14:47:59.938Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:47:59.957Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:47:59.958Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:47:59.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:47:59.961Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:47:59.962Z","level":"DEBUG","message":"Current balance before update","data":{"total":69300,"available":68800,"used":500,"transactionCount":23}}
{"timestamp":"2025-07-07T14:48:01.972Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:01.990Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:01.992Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:01.993Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:01.996Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:01.998Z","level":"DEBUG","message":"Current balance before update","data":{"total":69450,"available":68950,"used":500,"transactionCount":24}}
{"timestamp":"2025-07-07T14:48:02.463Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:02.480Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:02.481Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:02.482Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:02.483Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:02.483Z","level":"DEBUG","message":"Current balance before update","data":{"total":69600,"available":69100,"used":500,"transactionCount":25}}
{"timestamp":"2025-07-07T14:48:02.600Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:02.619Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:02.620Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:02.622Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:02.624Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:02.626Z","level":"DEBUG","message":"Current balance before update","data":{"total":69750,"available":69250,"used":500,"transactionCount":26}}
{"timestamp":"2025-07-07T14:48:02.767Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:02.784Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:02.785Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:02.786Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:02.788Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:02.791Z","level":"DEBUG","message":"Current balance before update","data":{"total":69900,"available":69400,"used":500,"transactionCount":27}}
{"timestamp":"2025-07-07T14:48:02.923Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:02.939Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:02.941Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:02.942Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:02.944Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:02.946Z","level":"DEBUG","message":"Current balance before update","data":{"total":70050,"available":69550,"used":500,"transactionCount":28}}
{"timestamp":"2025-07-07T14:48:03.106Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:03.124Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:03.125Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:03.127Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:03.128Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:03.130Z","level":"DEBUG","message":"Current balance before update","data":{"total":70200,"available":69700,"used":500,"transactionCount":29}}
{"timestamp":"2025-07-07T14:48:03.394Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:03.411Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:03.412Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:03.413Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:03.415Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:03.417Z","level":"DEBUG","message":"Current balance before update","data":{"total":70350,"available":69850,"used":500,"transactionCount":30}}
{"timestamp":"2025-07-07T14:48:03.717Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:03.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:03.736Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:03.737Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:48:03.738Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:03.741Z","level":"DEBUG","message":"Current balance before update","data":{"total":70500,"available":70000,"used":500,"transactionCount":31}}
{"timestamp":"2025-07-07T14:48:08.094Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:08.120Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:08.122Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:08.123Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T14:48:08.125Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:08.127Z","level":"DEBUG","message":"Current balance before update","data":{"total":70650,"available":70150,"used":500,"transactionCount":32}}
{"timestamp":"2025-07-07T14:48:11.688Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:11.705Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:11.707Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:11.708Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T14:48:11.710Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:11.712Z","level":"DEBUG","message":"Current balance before update","data":{"total":70700,"available":70200,"used":500,"transactionCount":33}}
{"timestamp":"2025-07-07T14:48:14.023Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:14.041Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:14.043Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:14.044Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T14:48:14.045Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:14.047Z","level":"DEBUG","message":"Current balance before update","data":{"total":70750,"available":70250,"used":500,"transactionCount":34}}
{"timestamp":"2025-07-07T14:48:18.005Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:48:18.018Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:48:18.019Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":4,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:48:18.019Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":200}}
{"timestamp":"2025-07-07T14:48:18.021Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:48:18.023Z","level":"DEBUG","message":"Current balance before update","data":{"total":70800,"available":70300,"used":500,"transactionCount":35}}
{"timestamp":"2025-07-07T14:49:08.728Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:08.744Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:08.745Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:08.746Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:08.747Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:08.748Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9690699,"used":65224,"transactionCount":199}}
{"timestamp":"2025-07-07T14:49:10.043Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:10.056Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:10.057Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:10.058Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:10.059Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:10.060Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9690199,"used":65724,"transactionCount":200}}
{"timestamp":"2025-07-07T14:49:10.247Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:10.259Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:10.260Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:10.261Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:10.261Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:10.262Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9689699,"used":66224,"transactionCount":201}}
{"timestamp":"2025-07-07T14:49:10.531Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:10.552Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:10.554Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:10.555Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:10.557Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:10.558Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9689199,"used":66724,"transactionCount":202}}
{"timestamp":"2025-07-07T14:49:10.839Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:10.851Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:10.852Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:10.854Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:10.855Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:10.857Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9688699,"used":67224,"transactionCount":203}}
{"timestamp":"2025-07-07T14:49:11.165Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:11.184Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:11.186Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:11.188Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:11.190Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:11.192Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9688199,"used":67724,"transactionCount":204}}
{"timestamp":"2025-07-07T14:49:11.491Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:11.507Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:11.508Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:11.509Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:11.511Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:11.512Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9687699,"used":68224,"transactionCount":205}}
{"timestamp":"2025-07-07T14:49:11.793Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:11.814Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:11.815Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:11.817Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:11.818Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:11.820Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9687199,"used":68724,"transactionCount":206}}
{"timestamp":"2025-07-07T14:49:11.964Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:11.980Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:11.981Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:11.983Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:11.984Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:11.986Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9686699,"used":69224,"transactionCount":207}}
{"timestamp":"2025-07-07T14:49:12.185Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:12.203Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:12.205Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:12.206Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:12.207Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:12.209Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9686199,"used":69724,"transactionCount":208}}
{"timestamp":"2025-07-07T14:49:12.526Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:12.547Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:12.548Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:12.550Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:12.551Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:12.553Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9685699,"used":70224,"transactionCount":209}}
{"timestamp":"2025-07-07T14:49:12.835Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:12.854Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:12.855Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:12.856Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:12.857Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:12.858Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9685199,"used":70724,"transactionCount":210}}
{"timestamp":"2025-07-07T14:49:12.999Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:13.015Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:13.016Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:13.017Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:13.019Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:13.020Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9684699,"used":71224,"transactionCount":211}}
{"timestamp":"2025-07-07T14:49:13.158Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:13.176Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:13.177Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:13.178Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:13.180Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:13.181Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9684199,"used":71724,"transactionCount":212}}
{"timestamp":"2025-07-07T14:49:13.499Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:13.518Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:49:13.519Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:13.521Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:49:13.522Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:49:13.524Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9683699,"used":72224,"transactionCount":213}}
{"timestamp":"2025-07-07T14:49:18.722Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:18.732Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:18.734Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:18.735Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:18.736Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:18.738Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755923,"available":9683199,"used":72724,"transactionCount":214}}
{"timestamp":"2025-07-07T14:49:20.087Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.097Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.098Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.099Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.100Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.102Z","level":"DEBUG","message":"Current balance before update","data":{"total":9755998,"available":9683274,"used":72724,"transactionCount":215}}
{"timestamp":"2025-07-07T14:49:20.500Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.513Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.514Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.515Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.517Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.518Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756073,"available":9683349,"used":72724,"transactionCount":216}}
{"timestamp":"2025-07-07T14:49:20.658Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.674Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.676Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.677Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.679Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.681Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756148,"available":9683424,"used":72724,"transactionCount":217}}
{"timestamp":"2025-07-07T14:49:20.806Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.816Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.817Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.818Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.820Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.822Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756223,"available":9683499,"used":72724,"transactionCount":218}}
{"timestamp":"2025-07-07T14:49:20.944Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:20.958Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:20.958Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:20.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:20.960Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:20.961Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756298,"available":9683574,"used":72724,"transactionCount":219}}
{"timestamp":"2025-07-07T14:49:21.086Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:21.099Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:49:21.099Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:21.101Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:49:21.102Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:49:21.103Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756373,"available":9683649,"used":72724,"transactionCount":220}}
{"timestamp":"2025-07-07T14:49:24.488Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:49:24.498Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T14:49:24.498Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:49:24.499Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":0}}
{"timestamp":"2025-07-07T14:49:24.500Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T14:49:24.501Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:50:33.936Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:33.955Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:33.957Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:33.958Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:33.958Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:33.960Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9683724,"used":72724,"transactionCount":221}}
{"timestamp":"2025-07-07T14:50:34.814Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:34.835Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:34.837Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:34.838Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:34.839Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:34.840Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9683224,"used":73224,"transactionCount":222}}
{"timestamp":"2025-07-07T14:50:35.115Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:35.130Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:35.132Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:35.133Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:35.134Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:35.135Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9682724,"used":73724,"transactionCount":223}}
{"timestamp":"2025-07-07T14:50:35.430Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:35.446Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:35.447Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:35.448Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:35.450Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:35.451Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9682224,"used":74224,"transactionCount":224}}
{"timestamp":"2025-07-07T14:50:35.747Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:35.765Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:35.767Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:35.768Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:35.769Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:35.771Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9681724,"used":74724,"transactionCount":225}}
{"timestamp":"2025-07-07T14:50:36.046Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:36.060Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:36.062Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:36.063Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:36.065Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:36.066Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9681224,"used":75224,"transactionCount":226}}
{"timestamp":"2025-07-07T14:50:36.419Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:36.434Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:36.435Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:36.436Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:36.437Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:36.438Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9680724,"used":75724,"transactionCount":227}}
{"timestamp":"2025-07-07T14:50:36.614Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:36.635Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:36.637Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:36.638Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:36.639Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:36.641Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9680224,"used":76224,"transactionCount":228}}
{"timestamp":"2025-07-07T14:50:36.975Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:36.994Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:36.995Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:36.997Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:36.998Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.001Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9679724,"used":76724,"transactionCount":229}}
{"timestamp":"2025-07-07T14:50:37.157Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:37.176Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:37.177Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:37.179Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:37.180Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.182Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9679224,"used":77224,"transactionCount":230}}
{"timestamp":"2025-07-07T14:50:37.376Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:37.396Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:37.397Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:37.398Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:37.400Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.401Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9678724,"used":77724,"transactionCount":231}}
{"timestamp":"2025-07-07T14:50:37.737Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:37.756Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:37.757Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:37.758Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:37.759Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.760Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9678224,"used":78224,"transactionCount":232}}
{"timestamp":"2025-07-07T14:50:37.933Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:37.951Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:37.953Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:37.954Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:37.955Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:37.957Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9677724,"used":78724,"transactionCount":233}}
{"timestamp":"2025-07-07T14:50:38.173Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:38.188Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:38.189Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:38.190Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:38.191Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:38.192Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9677224,"used":79224,"transactionCount":234}}
{"timestamp":"2025-07-07T14:50:38.401Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:38.413Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:38.413Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:38.415Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:38.416Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:38.418Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9676724,"used":79724,"transactionCount":235}}
{"timestamp":"2025-07-07T14:50:38.720Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:38.745Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:38.747Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:38.748Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:38.749Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:38.751Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9676224,"used":80224,"transactionCount":236}}
{"timestamp":"2025-07-07T14:50:38.949Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:38.967Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:38.968Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:38.969Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:38.970Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:38.971Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9675724,"used":80724,"transactionCount":237}}
{"timestamp":"2025-07-07T14:50:44.357Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:44.373Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:44.374Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:44.375Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:44.376Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:44.377Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9675224,"used":81224,"transactionCount":238}}
{"timestamp":"2025-07-07T14:50:44.870Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:50:44.882Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:50:44.884Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:50:44.885Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:50:44.886Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:50:44.888Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9674724,"used":81724,"transactionCount":239}}
{"timestamp":"2025-07-07T14:55:04.824Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:04.838Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:55:04.840Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:04.841Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T14:55:04.842Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:55:04.843Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:04.844Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T14:55:04.845Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:55:04.845Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:55:04.846Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:04.847Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T14:55:04.847Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:04.848Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:55:04.849Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:55:04.850Z","level":"DEBUG","message":"Current balance before update","data":{"total":9756448,"available":9674224,"used":82224,"transactionCount":240}}
{"timestamp":"2025-07-07T14:55:08.286Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:08.296Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T14:55:08.297Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":31,"discountedAmount":31,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:08.298Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":31}}
{"timestamp":"2025-07-07T14:55:08.300Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T14:55:08.301Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":31,"discountedAmount":31,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:08.302Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":3}}
{"timestamp":"2025-07-07T14:55:08.303Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T14:55:08.305Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T14:55:08.306Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":31,"discountedAmount":31,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:08.307Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":331}}
{"timestamp":"2025-07-07T14:55:08.308Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":31,"discountedAmount":31,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:08.310Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T14:55:08.312Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T14:55:08.314Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760198,"available":9677974,"used":82224,"transactionCount":241}}
{"timestamp":"2025-07-07T14:55:21.607Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:21.628Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:55:21.629Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:21.631Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:55:21.633Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:55:21.635Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:55:23.881Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:23.899Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:55:23.900Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:23.901Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:55:23.903Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:55:23.905Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:55:39.721Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:39.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T14:55:39.737Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:39.738Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T14:55:39.740Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T14:55:39.741Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:55:48.194Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:55:48.213Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:55:48.213Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:55:48.214Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:55:48.215Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:55:48.218Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T14:56:24.494Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:56:24.512Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T14:56:24.513Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T14:57:46.154Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:57:46.164Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T14:57:46.165Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:57:46.166Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T14:57:46.167Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T14:57:46.168Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760863,"available":9678639,"used":82224,"transactionCount":242}}
{"timestamp":"2025-07-07T14:57:49.588Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T14:57:49.603Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T14:57:49.605Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T14:57:49.606Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T14:57:49.607Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T14:57:49.608Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760938,"available":9678714,"used":82224,"transactionCount":243}}
{"timestamp":"2025-07-07T15:02:19.395Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:19.415Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:02:19.416Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760938,"available":9678214,"used":82724,"transactionCount":244}}
{"timestamp":"2025-07-07T15:02:27.965Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:27.982Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:02:27.983Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T15:02:33.517Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:33.529Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:33.530Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:33.531Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:33.532Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:33.533Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T15:02:34.672Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:34.688Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:34.689Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:34.690Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:34.692Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:34.693Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T15:02:34.919Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:34.930Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:34.931Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:34.933Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:34.935Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:34.936Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T15:02:35.057Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.074Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.075Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.076Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.078Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.079Z","level":"DEBUG","message":"Current balance before update","data":{"total":450,"available":450,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T15:02:35.224Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.241Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.242Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.243Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.244Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.246Z","level":"DEBUG","message":"Current balance before update","data":{"total":600,"available":600,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-07T15:02:35.374Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.391Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.392Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.393Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.395Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.396Z","level":"DEBUG","message":"Current balance before update","data":{"total":750,"available":750,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-07T15:02:35.514Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.527Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.528Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.529Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.530Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.531Z","level":"DEBUG","message":"Current balance before update","data":{"total":900,"available":900,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-07T15:02:35.718Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:35.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:02:35.736Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:35.737Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:02:35.738Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:02:35.739Z","level":"DEBUG","message":"Current balance before update","data":{"total":1050,"available":1050,"used":0,"transactionCount":8}}
{"timestamp":"2025-07-07T15:02:37.526Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:37.543Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T15:02:37.544Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:37.545Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T15:02:37.547Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T15:02:37.550Z","level":"DEBUG","message":"Current balance before update","data":{"total":1200,"available":1200,"used":0,"transactionCount":9}}
{"timestamp":"2025-07-07T15:02:40.043Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:02:40.061Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T15:02:40.062Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:02:40.064Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T15:02:40.065Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T15:02:40.067Z","level":"DEBUG","message":"Current balance before update","data":{"total":1275,"available":1275,"used":0,"transactionCount":10}}
{"timestamp":"2025-07-07T15:06:41.362Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:06:41.376Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T15:06:41.377Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:06:41.379Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T15:06:41.381Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T15:06:41.382Z","level":"DEBUG","message":"Current balance before update","data":{"total":9760938,"available":9678214,"used":82724,"transactionCount":245}}
{"timestamp":"2025-07-07T15:06:50.967Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:06:50.976Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:06:50.976Z","level":"DEBUG","message":"Current balance before update","data":{"total":9761013,"available":9678289,"used":82724,"transactionCount":246}}
{"timestamp":"2025-07-07T15:10:44.950Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:10:44.963Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:10:44.964Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:10:44.964Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:10:44.965Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:10:44.966Z","level":"DEBUG","message":"Current balance before update","data":{"total":9761013,"available":9678289,"used":82724,"transactionCount":247}}
{"timestamp":"2025-07-07T15:10:47.090Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:10:47.106Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:10:47.107Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:10:47.108Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:10:47.109Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:10:47.111Z","level":"DEBUG","message":"Current balance before update","data":{"total":9762013,"available":9679289,"used":82724,"transactionCount":248}}
{"timestamp":"2025-07-07T15:10:51.789Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:10:51.802Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:10:51.803Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:10:51.803Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:10:51.804Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:10:51.805Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763013,"available":9680289,"used":82724,"transactionCount":249}}
{"timestamp":"2025-07-07T15:11:07.104Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:07.119Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:07.120Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:07.121Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:07.121Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:07.122Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763016,"available":9680292,"used":82724,"transactionCount":250}}
{"timestamp":"2025-07-07T15:11:07.899Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:07.911Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:07.912Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:07.913Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:07.914Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:07.915Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763019,"available":9680295,"used":82724,"transactionCount":251}}
{"timestamp":"2025-07-07T15:11:08.068Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:08.081Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:08.082Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:08.083Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:08.084Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:08.086Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763022,"available":9680298,"used":82724,"transactionCount":252}}
{"timestamp":"2025-07-07T15:11:08.791Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:08.805Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:08.806Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:08.807Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:08.808Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:08.810Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763025,"available":9680301,"used":82724,"transactionCount":253}}
{"timestamp":"2025-07-07T15:11:09.156Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:11:09.167Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:11:09.168Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:11:09.169Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":3}}
{"timestamp":"2025-07-07T15:11:09.170Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:11:09.171Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763028,"available":9680304,"used":82724,"transactionCount":254}}
{"timestamp":"2025-07-07T15:12:07.761Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:07.775Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:07.776Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:12:07.777Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:07.779Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:07.780Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:12:07.781Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:07.783Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:07.784Z","level":"DEBUG","message":"Current balance before update","data":{"total":156950,"available":148850,"used":8100,"transactionCount":35}}
{"timestamp":"2025-07-07T15:12:20.043Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:20.054Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:20.054Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":2000,"discountedAmount":2000,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:12:20.056Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":2000}}
{"timestamp":"2025-07-07T15:12:20.058Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:20.059Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":2000,"discountedAmount":2000,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:12:20.059Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:20.060Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:20.061Z","level":"DEBUG","message":"Current balance before update","data":{"total":158750,"available":150650,"used":8100,"transactionCount":36}}
{"timestamp":"2025-07-07T15:12:26.886Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:26.897Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:26.898Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:26.898Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:26.899Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:26.900Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:26.901Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:26.901Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:26.902Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:26.903Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:26.903Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:26.904Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:26.905Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:26.905Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:26.906Z","level":"DEBUG","message":"Current balance before update","data":{"total":9763031,"available":9680307,"used":82724,"transactionCount":255}}
{"timestamp":"2025-07-07T15:12:27.575Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:27.587Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:27.588Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.590Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:27.592Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:27.593Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.593Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:27.595Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:27.595Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:27.596Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.597Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:27.597Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.598Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:27.599Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:27.601Z","level":"DEBUG","message":"Current balance before update","data":{"total":9766781,"available":9684057,"used":82724,"transactionCount":256}}
{"timestamp":"2025-07-07T15:12:27.760Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:27.776Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:27.776Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.777Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:27.779Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:27.781Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.783Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:27.784Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:27.785Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:27.786Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.787Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:27.788Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.789Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:27.790Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:27.791Z","level":"DEBUG","message":"Current balance before update","data":{"total":9770531,"available":9687807,"used":82724,"transactionCount":257}}
{"timestamp":"2025-07-07T15:12:27.949Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:27.962Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:27.963Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.964Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:27.967Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:27.969Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.970Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:27.971Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:27.972Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:27.973Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.974Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:27.975Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:27.975Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:27.976Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:27.977Z","level":"DEBUG","message":"Current balance before update","data":{"total":9774281,"available":9691557,"used":82724,"transactionCount":258}}
{"timestamp":"2025-07-07T15:12:28.093Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.108Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.109Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.110Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.112Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.113Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.114Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.116Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.116Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.117Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.118Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.119Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.120Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.122Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.124Z","level":"DEBUG","message":"Current balance before update","data":{"total":9778031,"available":9695307,"used":82724,"transactionCount":259}}
{"timestamp":"2025-07-07T15:12:28.245Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.263Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.264Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.264Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.266Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.267Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.268Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.269Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.270Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.271Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.272Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.273Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.274Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.275Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.276Z","level":"DEBUG","message":"Current balance before update","data":{"total":9781781,"available":9699057,"used":82724,"transactionCount":260}}
{"timestamp":"2025-07-07T15:12:28.399Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.412Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.413Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.413Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.415Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.415Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.416Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.417Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.418Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.419Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.419Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.420Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.421Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.422Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.424Z","level":"DEBUG","message":"Current balance before update","data":{"total":9785531,"available":9702807,"used":82724,"transactionCount":261}}
{"timestamp":"2025-07-07T15:12:28.564Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.576Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.577Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.585Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.586Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.587Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.588Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.589Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.590Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.591Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.592Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.593Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.594Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.595Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.596Z","level":"DEBUG","message":"Current balance before update","data":{"total":9789281,"available":9706557,"used":82724,"transactionCount":262}}
{"timestamp":"2025-07-07T15:12:28.718Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:28.729Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:28.730Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.731Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:12:28.732Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:28.733Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.733Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:12:28.734Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:28.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:28.736Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.737Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:12:28.737Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:28.738Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:28.740Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:28.741Z","level":"DEBUG","message":"Current balance before update","data":{"total":9793031,"available":9710307,"used":82724,"transactionCount":263}}
{"timestamp":"2025-07-07T15:12:32.517Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:32.528Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:32.529Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.530Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:12:32.530Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:32.531Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.532Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:12:32.533Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:32.533Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:32.534Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.535Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:12:32.536Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.537Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:32.538Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:32.539Z","level":"DEBUG","message":"Current balance before update","data":{"total":9796781,"available":9714057,"used":82724,"transactionCount":264}}
{"timestamp":"2025-07-07T15:12:32.825Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:32.837Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:32.838Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.840Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:12:32.841Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:32.842Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.842Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:12:32.843Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:32.844Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:32.845Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.846Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:12:32.847Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:32.848Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:32.849Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:32.850Z","level":"DEBUG","message":"Current balance before update","data":{"total":9797383,"available":9714659,"used":82724,"transactionCount":265}}
{"timestamp":"2025-07-07T15:12:33.117Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:33.127Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:33.128Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.129Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:12:33.129Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:33.130Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.131Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:12:33.131Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:33.132Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:33.133Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.134Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:12:33.134Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.135Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:33.136Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:33.137Z","level":"DEBUG","message":"Current balance before update","data":{"total":9797985,"available":9715261,"used":82724,"transactionCount":266}}
{"timestamp":"2025-07-07T15:12:33.310Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:12:33.327Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:12:33.329Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.330Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:12:33.330Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:12:33.331Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.332Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:12:33.333Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:12:33.334Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:12:33.335Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.336Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:12:33.337Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:12:33.338Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:12:33.340Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:12:33.341Z","level":"DEBUG","message":"Current balance before update","data":{"total":9798587,"available":9715863,"used":82724,"transactionCount":267}}
{"timestamp":"2025-07-07T15:13:09.179Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:13:09.192Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:13:09.194Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:13:09.195Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-07T15:13:09.196Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:13:09.197Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:13:09.199Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-07T15:13:09.200Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:13:09.201Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:13:09.202Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:13:09.203Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":301}}
{"timestamp":"2025-07-07T15:13:09.205Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1,"discountedAmount":1,"itemCount":8,"adjustmentValue":3}}
{"timestamp":"2025-07-07T15:13:09.206Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:13:09.209Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:13:09.211Z","level":"DEBUG","message":"Current balance before update","data":{"total":9799189,"available":9716465,"used":82724,"transactionCount":268}}
{"timestamp":"2025-07-07T15:18:14.544Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:18:14.557Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:18:14.559Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":500}}
{"timestamp":"2025-07-07T15:18:14.560Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":500}}
{"timestamp":"2025-07-07T15:18:14.560Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:18:14.562Z","level":"DEBUG","message":"Current balance before update","data":{"total":161050,"available":152950,"used":8100,"transactionCount":37}}
{"timestamp":"2025-07-07T15:19:14.183Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:14.194Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:19:14.195Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:14.196Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:19:14.196Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:19:14.197Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:14.198Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:14.198Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:19:14.199Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:19:14.200Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:14.201Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:19:14.201Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:14.202Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:19:14.204Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:19:14.207Z","level":"DEBUG","message":"Current balance before update","data":{"total":9799791,"available":9717067,"used":82724,"transactionCount":269}}
{"timestamp":"2025-07-07T15:19:15.158Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:15.169Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:19:15.170Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.170Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:19:15.171Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:19:15.172Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.173Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:15.173Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:19:15.174Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:19:15.175Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.175Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:19:15.176Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.176Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:19:15.177Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:19:15.179Z","level":"DEBUG","message":"Current balance before update","data":{"total":9803541,"available":9720817,"used":82724,"transactionCount":270}}
{"timestamp":"2025-07-07T15:19:15.615Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:15.627Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:19:15.628Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.628Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:19:15.629Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:19:15.630Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.631Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:15.632Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:19:15.633Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:19:15.634Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.635Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:19:15.636Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.637Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:19:15.638Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:19:15.639Z","level":"DEBUG","message":"Current balance before update","data":{"total":9807291,"available":9724567,"used":82724,"transactionCount":271}}
{"timestamp":"2025-07-07T15:19:15.765Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:15.774Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:19:15.775Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.776Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:19:15.776Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:19:15.777Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.778Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:15.779Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:19:15.779Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:19:15.780Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.781Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:19:15.782Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:15.783Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:19:15.783Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:19:15.784Z","level":"DEBUG","message":"Current balance before update","data":{"total":9811041,"available":9728317,"used":82724,"transactionCount":272}}
{"timestamp":"2025-07-07T15:19:17.710Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:17.724Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:19:17.726Z","level":"DEBUG","message":"Current balance before update","data":{"total":9814791,"available":9732067,"used":82724,"transactionCount":273}}
{"timestamp":"2025-07-07T15:19:22.931Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:22.946Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:19:22.947Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:22.948Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:19:22.950Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:19:22.952Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T15:19:28.866Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:28.882Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:19:28.884Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:28.885Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T15:19:28.886Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:19:28.888Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T15:19:30.140Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:30.152Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:19:30.154Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:30.155Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-07T15:19:30.156Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:19:30.158Z","level":"DEBUG","message":"Current balance before update","data":{"total":200,"available":200,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T15:19:35.412Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:35.424Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T15:19:35.425Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:35.426Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T15:19:35.427Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T15:19:35.429Z","level":"DEBUG","message":"Current balance before update","data":{"total":250,"available":250,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T15:19:39.559Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:39.576Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:19:39.577Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:19:39.579Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:19:39.579Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:19:39.581Z","level":"DEBUG","message":"Current balance before update","data":{"total":325,"available":325,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-07T15:19:51.810Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:51.822Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T15:19:51.824Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:51.825Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T15:19:51.825Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T15:19:51.827Z","level":"DEBUG","message":"Current balance before update","data":{"total":1325,"available":1325,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-07T15:19:53.787Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:19:53.800Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T15:19:53.801Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:19:53.802Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-07T15:19:53.803Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T15:19:53.805Z","level":"DEBUG","message":"Current balance before update","data":{"total":1325,"available":825,"used":500,"transactionCount":6}}
{"timestamp":"2025-07-07T15:22:44.573Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:22:44.591Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:22:44.593Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":-200}}
{"timestamp":"2025-07-07T15:22:44.594Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":-200}}
{"timestamp":"2025-07-07T15:22:44.595Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:22:44.597Z","level":"DEBUG","message":"Current balance before update","data":{"total":161550,"available":153450,"used":8100,"transactionCount":38}}
{"timestamp":"2025-07-07T15:22:58.569Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:22:58.580Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:22:58.581Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":750}}
{"timestamp":"2025-07-07T15:22:58.582Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":750}}
{"timestamp":"2025-07-07T15:22:58.583Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:22:58.584Z","level":"DEBUG","message":"Current balance before update","data":{"total":161550,"available":153250,"used":8300,"transactionCount":39}}
{"timestamp":"2025-07-07T15:23:04.793Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:04.802Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:23:04.803Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:23:04.804Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:23:04.805Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:23:04.806Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:23:04.806Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:23:04.807Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:23:04.808Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:23:04.808Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:23:04.809Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:23:04.810Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:23:04.811Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:23:04.812Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:23:04.813Z","level":"DEBUG","message":"Current balance before update","data":{"total":9814791,"available":9732067,"used":82724,"transactionCount":274}}
{"timestamp":"2025-07-07T15:23:08.960Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:08.980Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:08.982Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:08.983Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:08.984Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:08.985Z","level":"DEBUG","message":"Current balance before update","data":{"total":9818541,"available":9735817,"used":82724,"transactionCount":275}}
{"timestamp":"2025-07-07T15:23:10.265Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:10.285Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:10.286Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:10.287Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:10.289Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:10.290Z","level":"DEBUG","message":"Current balance before update","data":{"total":9819541,"available":9736817,"used":82724,"transactionCount":276}}
{"timestamp":"2025-07-07T15:23:10.599Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:10.617Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:10.618Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:10.619Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:10.620Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:10.621Z","level":"DEBUG","message":"Current balance before update","data":{"total":9820541,"available":9737817,"used":82724,"transactionCount":277}}
{"timestamp":"2025-07-07T15:23:10.915Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:10.934Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:10.935Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:10.936Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:10.938Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:10.939Z","level":"DEBUG","message":"Current balance before update","data":{"total":9821541,"available":9738817,"used":82724,"transactionCount":278}}
{"timestamp":"2025-07-07T15:23:11.221Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:11.238Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:11.239Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:11.240Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:11.241Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:11.242Z","level":"DEBUG","message":"Current balance before update","data":{"total":9822541,"available":9739817,"used":82724,"transactionCount":279}}
{"timestamp":"2025-07-07T15:23:11.420Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:11.438Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:11.439Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:11.440Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:11.441Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:11.443Z","level":"DEBUG","message":"Current balance before update","data":{"total":9823541,"available":9740817,"used":82724,"transactionCount":280}}
{"timestamp":"2025-07-07T15:23:16.897Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:16.918Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:16.919Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:16.920Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:16.921Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:16.923Z","level":"DEBUG","message":"Current balance before update","data":{"total":9824541,"available":9741817,"used":82724,"transactionCount":281}}
{"timestamp":"2025-07-07T15:23:17.612Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:17.632Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:17.633Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:17.635Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:17.636Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:17.638Z","level":"DEBUG","message":"Current balance before update","data":{"total":9825541,"available":9742817,"used":82724,"transactionCount":282}}
{"timestamp":"2025-07-07T15:23:17.944Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:17.962Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:17.963Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:17.964Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:17.966Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:17.968Z","level":"DEBUG","message":"Current balance before update","data":{"total":9826541,"available":9743817,"used":82724,"transactionCount":283}}
{"timestamp":"2025-07-07T15:23:18.307Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:18.321Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:18.322Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:18.323Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:18.324Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:18.326Z","level":"DEBUG","message":"Current balance before update","data":{"total":9827541,"available":9744817,"used":82724,"transactionCount":284}}
{"timestamp":"2025-07-07T15:23:18.677Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:18.691Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:18.692Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:18.693Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:18.694Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:18.695Z","level":"DEBUG","message":"Current balance before update","data":{"total":9828541,"available":9745817,"used":82724,"transactionCount":285}}
{"timestamp":"2025-07-07T15:23:19.285Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:19.304Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:19.305Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:19.306Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:19.307Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:19.309Z","level":"DEBUG","message":"Current balance before update","data":{"total":9829541,"available":9746817,"used":82724,"transactionCount":286}}
{"timestamp":"2025-07-07T15:23:19.849Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:23:19.871Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:23:19.873Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":1000}}
{"timestamp":"2025-07-07T15:23:19.874Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-07T15:23:19.875Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:23:19.877Z","level":"DEBUG","message":"Current balance before update","data":{"total":9830541,"available":9747817,"used":82724,"transactionCount":287}}
{"timestamp":"2025-07-07T15:30:51.264Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:30:51.275Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:30:51.276Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:51.277Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:30:51.278Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:30:51.278Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:51.279Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:30:51.280Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:30:51.281Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:30:51.282Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:51.283Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:30:51.283Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:51.284Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:30:51.285Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:30:51.286Z","level":"DEBUG","message":"Current balance before update","data":{"total":9831541,"available":9748817,"used":82724,"transactionCount":288}}
{"timestamp":"2025-07-07T15:30:52.936Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:30:52.945Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:30:52.946Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:52.947Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:30:52.948Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:30:52.948Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:52.949Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:30:52.949Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:30:52.950Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:30:52.950Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:52.951Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:30:52.952Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:52.952Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:30:52.953Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:30:52.954Z","level":"DEBUG","message":"Current balance before update","data":{"total":9835291,"available":9752567,"used":82724,"transactionCount":289}}
{"timestamp":"2025-07-07T15:30:53.529Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:30:53.538Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:30:53.539Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:53.540Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:30:53.541Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:30:53.542Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:53.543Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:30:53.544Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:30:53.544Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:30:53.545Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:53.545Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:30:53.546Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:53.547Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:30:53.547Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:30:53.548Z","level":"DEBUG","message":"Current balance before update","data":{"total":9839041,"available":9756317,"used":82724,"transactionCount":290}}
{"timestamp":"2025-07-07T15:30:54.129Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:30:54.138Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:30:54.140Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:54.141Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:30:54.142Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:30:54.143Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:54.143Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:30:54.144Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:30:54.145Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:30:54.146Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:54.146Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:30:54.147Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:30:54.148Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:30:54.149Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:30:54.149Z","level":"DEBUG","message":"Current balance before update","data":{"total":9842791,"available":9760067,"used":82724,"transactionCount":291}}
{"timestamp":"2025-07-07T15:32:21.947Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:32:21.969Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:32:21.970Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:21.972Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:32:21.974Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:32:21.975Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:21.976Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:32:21.978Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:32:21.979Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:32:21.980Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:21.981Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:32:21.983Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:21.984Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:32:21.985Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:32:21.988Z","level":"DEBUG","message":"Current balance before update","data":{"total":9846541,"available":9763817,"used":82724,"transactionCount":292}}
{"timestamp":"2025-07-07T15:32:56.313Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:32:56.328Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:32:56.329Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:56.330Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:32:56.331Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:32:56.332Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:56.333Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:32:56.334Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:32:56.334Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:32:56.335Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:56.336Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:32:56.336Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:32:56.337Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:32:56.338Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:32:56.340Z","level":"DEBUG","message":"Current balance before update","data":{"total":9850291,"available":9767567,"used":82724,"transactionCount":293}}
{"timestamp":"2025-07-07T15:33:00.178Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:33:00.198Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:33:00.200Z","level":"DEBUG","message":"Current balance before update","data":{"total":9854041,"available":9771317,"used":82724,"transactionCount":294}}
{"timestamp":"2025-07-07T15:33:05.250Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:33:05.269Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T15:33:05.271Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:33:05.273Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T15:33:05.275Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T15:33:05.276Z","level":"DEBUG","message":"Current balance before update","data":{"total":99650,"available":88651,"used":10999,"transactionCount":46}}
{"timestamp":"2025-07-07T15:38:39.761Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:39.778Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:39.779Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.779Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:39.781Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:39.782Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.783Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:39.784Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:39.786Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:39.787Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.788Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:39.789Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.790Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:39.791Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:39.792Z","level":"DEBUG","message":"Current balance before update","data":{"total":9854041,"available":9771317,"used":82724,"transactionCount":295}}
{"timestamp":"2025-07-07T15:38:39.908Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:39.919Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:39.919Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.920Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:39.921Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:39.922Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.923Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:39.924Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:39.924Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:39.925Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.926Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:39.926Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:39.927Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:39.928Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:39.929Z","level":"DEBUG","message":"Current balance before update","data":{"total":9857791,"available":9775067,"used":82724,"transactionCount":296}}
{"timestamp":"2025-07-07T15:38:40.074Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:40.088Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:40.089Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.090Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:40.091Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:40.092Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.093Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:40.094Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:40.095Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:40.095Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.096Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:40.097Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.098Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:40.099Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:40.100Z","level":"DEBUG","message":"Current balance before update","data":{"total":9861541,"available":9778817,"used":82724,"transactionCount":297}}
{"timestamp":"2025-07-07T15:38:40.237Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:40.248Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:40.249Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.250Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:40.251Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:40.252Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.253Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:40.255Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:40.255Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:40.256Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.257Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:40.257Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.258Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:40.259Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:40.259Z","level":"DEBUG","message":"Current balance before update","data":{"total":9865291,"available":9782567,"used":82724,"transactionCount":298}}
{"timestamp":"2025-07-07T15:38:40.381Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:40.392Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:40.393Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.394Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:40.395Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:40.396Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.397Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:40.398Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:40.399Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:40.400Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.401Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:40.402Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:40.403Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:40.404Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:40.406Z","level":"DEBUG","message":"Current balance before update","data":{"total":9869041,"available":9786317,"used":82724,"transactionCount":299}}
{"timestamp":"2025-07-07T15:38:41.965Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:41.978Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:41.979Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:41.980Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:41.981Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:41.982Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:41.983Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:41.984Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:41.985Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:41.986Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:41.987Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T15:38:41.988Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:41.989Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:41.990Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T15:38:41.991Z","level":"DEBUG","message":"Current balance before update","data":{"total":9872791,"available":9790067,"used":82724,"transactionCount":300}}
{"timestamp":"2025-07-07T15:38:43.943Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:43.955Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:43.957Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.957Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15002}}
{"timestamp":"2025-07-07T15:38:43.958Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:43.959Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:43.960Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:43.961Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:43.962Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:43.963Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.963Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":15302}}
{"timestamp":"2025-07-07T15:38:43.964Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.965Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:43.966Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.967Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-07T15:38:43.969Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:43.970Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:43.971Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-07T15:38:43.972Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":6,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T15:38:43.973Z","level":"DEBUG","message":"Current balance before update","data":{"total":9876541,"available":9793817,"used":82724,"transactionCount":301}}
{"timestamp":"2025-07-07T15:38:44.115Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:44.124Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:44.125Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.126Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15002}}
{"timestamp":"2025-07-07T15:38:44.126Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.127Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.128Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:44.129Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:44.130Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:44.130Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.131Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.132Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":15302}}
{"timestamp":"2025-07-07T15:38:44.132Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.133Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:44.133Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.135Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-07T15:38:44.136Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.137Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.138Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-07T15:38:44.139Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":6,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T15:38:44.141Z","level":"DEBUG","message":"Current balance before update","data":{"total":9909145,"available":9826421,"used":82724,"transactionCount":302}}
{"timestamp":"2025-07-07T15:38:44.257Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:44.268Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T15:38:44.269Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.270Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15002}}
{"timestamp":"2025-07-07T15:38:44.271Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.272Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.273Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1500}}
{"timestamp":"2025-07-07T15:38:44.274Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T15:38:44.275Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T15:38:44.275Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.276Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.276Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":15302}}
{"timestamp":"2025-07-07T15:38:44.277Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.278Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T15:38:44.279Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.279Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-07T15:38:44.280Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T15:38:44.281Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":15002,"discountedAmount":15002,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:44.282Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-07T15:38:44.282Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":6,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T15:38:44.283Z","level":"DEBUG","message":"Current balance before update","data":{"total":9941749,"available":9859025,"used":82724,"transactionCount":303}}
{"timestamp":"2025-07-07T15:38:46.579Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:46.591Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T15:38:46.592Z","level":"DEBUG","message":"Current balance before update","data":{"total":9974353,"available":9891629,"used":82724,"transactionCount":304}}
{"timestamp":"2025-07-07T15:38:48.491Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:48.506Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T15:38:48.507Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:48.508Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:48.509Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T15:38:48.510Z","level":"DEBUG","message":"Current balance before update","data":{"total":99800,"available":88801,"used":10999,"transactionCount":47}}
{"timestamp":"2025-07-07T15:38:54.124Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:54.135Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-07T15:38:54.136Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:54.137Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-07T15:38:54.138Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-07T15:38:54.139Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-07T15:38:56.132Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:38:56.144Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-07T15:38:56.145Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:38:56.145Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-07T15:38:56.147Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-07T15:38:56.148Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-07T15:39:03.659Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:39:03.674Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-07T15:39:03.676Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1}}
{"timestamp":"2025-07-07T15:39:03.677Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1}}
{"timestamp":"2025-07-07T15:39:03.678Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-07T15:39:03.679Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-07T15:39:12.011Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T15:39:12.027Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-07T15:39:12.027Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-07T15:39:12.028Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-12}}
{"timestamp":"2025-07-07T15:39:12.029Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-07T15:39:12.030Z","level":"DEBUG","message":"Current balance before update","data":{"total":226,"available":226,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-07T16:27:50.190Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:27:50.205Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T16:27:50.206Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:27:50.207Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T16:27:50.208Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T16:27:50.209Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:27:50.210Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T16:27:50.211Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T16:27:50.211Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T16:27:50.212Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:27:50.213Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T16:27:50.213Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:27:50.214Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T16:27:50.215Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T16:27:50.217Z","level":"DEBUG","message":"Current balance before update","data":{"total":9974353,"available":9891629,"used":82724,"transactionCount":305}}
{"timestamp":"2025-07-07T16:27:53.290Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:27:53.302Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T16:27:53.304Z","level":"DEBUG","message":"Current balance before update","data":{"total":9978103,"available":9895379,"used":82724,"transactionCount":306}}
{"timestamp":"2025-07-07T16:35:39.815Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:35:39.832Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-07T16:35:39.834Z","level":"DEBUG","message":"Current balance before update","data":{"total":9978103,"available":9895379,"used":82724,"transactionCount":307}}
{"timestamp":"2025-07-07T16:35:42.712Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:35:42.724Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-07T16:35:42.725Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:35:42.726Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-07T16:35:42.729Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-07T16:35:42.731Z","level":"DEBUG","message":"Current balance before update","data":{"total":99950,"available":88951,"used":10999,"transactionCount":48}}
{"timestamp":"2025-07-07T16:49:05.139Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T16:49:05.152Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T16:49:05.153Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:49:05.154Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-07T16:49:05.155Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-07T16:49:05.156Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:49:05.157Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-07T16:49:05.158Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T16:49:05.160Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T16:49:05.161Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:49:05.162Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-07T16:49:05.162Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-07T16:49:05.163Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T16:49:05.164Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-07T16:49:05.165Z","level":"DEBUG","message":"Current balance before update","data":{"total":9978103,"available":9895379,"used":82724,"transactionCount":308}}
{"timestamp":"2025-07-07T17:00:14.835Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T17:00:14.849Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T17:00:14.850Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":111111,"discountedAmount":111111,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T17:00:14.851Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":111111}}
{"timestamp":"2025-07-07T17:00:14.852Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T17:00:14.853Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-07T17:00:14.854Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":111111,"discountedAmount":111111,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T17:00:14.854Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T17:00:14.856Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":111111,"discountedAmount":111111,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T17:00:14.858Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-07T17:00:14.859Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T17:00:14.859Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":111111,"discountedAmount":111111,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-07T17:00:14.860Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-07T17:00:14.861Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T17:00:14.862Z","level":"DEBUG","message":"Current balance before update","data":{"total":162300,"available":154000,"used":8300,"transactionCount":40}}
{"timestamp":"2025-07-07T18:05:38.667Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-07T18:05:38.686Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-07T18:05:38.687Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T18:05:38.689Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":45000}}
{"timestamp":"2025-07-07T18:05:38.691Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-07T18:05:38.693Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-07T18:05:38.694Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T18:05:38.695Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":45300}}
{"timestamp":"2025-07-07T18:05:38.695Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T18:05:38.696Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-07T18:05:38.697Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":15000,"bonus":800,"description":"Basket threshold bonus - TWD 15000+ gets +800 MD"},"rule":"TW Premium Purchase Bonus"}}
{"timestamp":"2025-07-07T18:05:38.698Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-07T18:05:38.699Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":800}}
{"timestamp":"2025-07-07T18:05:38.701Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-07T18:05:38.703Z","level":"DEBUG","message":"Current balance before update","data":{"total":43675,"available":43175,"used":500,"transactionCount":25}}
{"timestamp":"2025-07-08T00:35:06.964Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:07.001Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T00:35:07.004Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:07.007Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T00:35:07.012Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T00:35:07.014Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:07.017Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T00:35:07.020Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T00:35:07.022Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T00:35:07.025Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:07.028Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T00:35:07.030Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:07.032Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T00:35:07.034Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T00:35:07.037Z","level":"DEBUG","message":"Current balance before update","data":{"total":9981853,"available":9899129,"used":82724,"transactionCount":309}}
{"timestamp":"2025-07-08T00:35:10.006Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:10.036Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-08T00:35:10.039Z","level":"DEBUG","message":"Current balance before update","data":{"total":9985603,"available":9902879,"used":82724,"transactionCount":310}}
{"timestamp":"2025-07-08T00:35:12.146Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:12.170Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-08T00:35:12.173Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:12.175Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-08T00:35:12.179Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-08T00:35:12.183Z","level":"DEBUG","message":"Current balance before update","data":{"total":100100,"available":89101,"used":10999,"transactionCount":49}}
{"timestamp":"2025-07-08T00:35:20.812Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:20.838Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-08T00:35:20.840Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:20.842Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-08T00:35:20.845Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-08T00:35:20.847Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-08T00:35:37.073Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:37.096Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-08T00:35:37.099Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:37.101Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-08T00:35:37.104Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-08T00:35:37.107Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-08T00:35:40.781Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:40.804Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-08T00:35:40.806Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:40.807Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-08T00:35:40.810Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-08T00:35:40.812Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-08T00:35:43.142Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:43.165Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-08T00:35:43.166Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-08T00:35:43.167Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-08T00:35:43.169Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-08T00:35:43.172Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-08T00:35:48.801Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:48.834Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-08T00:35:48.837Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":8}}
{"timestamp":"2025-07-08T00:35:48.840Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":8}}
{"timestamp":"2025-07-08T00:35:48.842Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-08T00:35:48.846Z","level":"DEBUG","message":"Current balance before update","data":{"total":1300,"available":1300,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-08T00:35:51.869Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:51.895Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-08T00:35:51.899Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:51.901Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-08T00:35:51.903Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-08T00:35:51.905Z","level":"DEBUG","message":"Current balance before update","data":{"total":1308,"available":1308,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-08T00:35:53.429Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:35:53.457Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-08T00:35:53.459Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:35:53.460Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-08T00:35:53.462Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-08T00:35:53.464Z","level":"DEBUG","message":"Current balance before update","data":{"total":1308,"available":808,"used":500,"transactionCount":6}}
{"timestamp":"2025-07-08T00:40:31.638Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T00:40:31.661Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T00:40:31.664Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:40:31.666Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T00:40:31.670Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T00:40:31.672Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:40:31.674Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T00:40:31.676Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T00:40:31.678Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T00:40:31.679Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:40:31.681Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T00:40:31.682Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T00:40:31.683Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T00:40:31.686Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T00:40:31.688Z","level":"DEBUG","message":"Current balance before update","data":{"total":9985603,"available":9902879,"used":82724,"transactionCount":311}}
{"timestamp":"2025-07-08T02:41:17.232Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T02:41:17.270Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T02:41:17.274Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:41:17.277Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T02:41:17.280Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T02:41:17.281Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:41:17.283Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T02:41:17.290Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T02:41:17.294Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T02:41:17.297Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:41:17.300Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T02:41:17.303Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:41:17.308Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T02:41:17.312Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T02:41:17.315Z","level":"DEBUG","message":"Current balance before update","data":{"total":9989353,"available":9906629,"used":82724,"transactionCount":312}}
{"timestamp":"2025-07-08T02:45:34.190Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T02:45:34.231Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T02:45:34.235Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:45:34.237Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T02:45:34.243Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T02:45:34.245Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:45:34.247Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T02:45:34.249Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T02:45:34.251Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T02:45:34.253Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:45:34.256Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T02:45:34.258Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:45:34.261Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T02:45:34.263Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T02:45:34.268Z","level":"DEBUG","message":"Current balance before update","data":{"total":9993103,"available":9910379,"used":82724,"transactionCount":313}}
{"timestamp":"2025-07-08T02:47:04.484Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T02:47:04.523Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-08T02:47:04.526Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:47:04.527Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-08T02:47:04.530Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-08T02:47:04.532Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-08T02:47:04.534Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-08T02:47:04.540Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-08T02:47:04.545Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-08T04:51:42.148Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T04:51:42.171Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T04:51:42.172Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T04:51:42.173Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T04:51:42.175Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T04:51:42.176Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T04:51:42.178Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T04:51:42.181Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T04:51:42.182Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T04:51:42.184Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T04:51:42.186Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T04:51:42.187Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T04:51:42.188Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T04:51:42.190Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T04:51:42.193Z","level":"DEBUG","message":"Current balance before update","data":{"total":9996853,"available":9914129,"used":82724,"transactionCount":314}}
{"timestamp":"2025-07-08T04:51:46.682Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T04:51:46.701Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T04:51:46.703Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T04:51:46.704Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T04:51:46.706Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T04:51:46.707Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T04:51:46.708Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T04:51:46.710Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T04:51:46.711Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T04:51:46.712Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T04:51:46.713Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T04:51:46.714Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T04:51:46.715Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T04:51:46.717Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T04:51:46.719Z","level":"DEBUG","message":"Current balance before update","data":{"total":10000603,"available":9917879,"used":82724,"transactionCount":315}}
{"timestamp":"2025-07-08T05:06:09.862Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:06:09.890Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T05:06:09.891Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:06:09.893Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":12}}
{"timestamp":"2025-07-08T05:06:09.897Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T05:06:09.898Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:06:09.900Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1}}
{"timestamp":"2025-07-08T05:06:09.902Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T05:06:09.905Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T05:06:09.907Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:06:09.909Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":312}}
{"timestamp":"2025-07-08T05:06:09.910Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:06:09.912Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T05:06:09.913Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T05:06:09.916Z","level":"DEBUG","message":"Current balance before update","data":{"total":10004353,"available":9921629,"used":82724,"transactionCount":316}}
{"timestamp":"2025-07-08T05:07:07.619Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:07:07.641Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-08T05:07:07.643Z","level":"DEBUG","message":"Current balance before update","data":{"total":10004978,"available":9922254,"used":82724,"transactionCount":317}}
{"timestamp":"2025-07-08T05:07:18.009Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:07:18.037Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-08T05:07:18.039Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:07:18.041Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-08T05:07:18.045Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-08T05:07:18.049Z","level":"DEBUG","message":"Current balance before update","data":{"total":100250,"available":89251,"used":10999,"transactionCount":50}}
{"timestamp":"2025-07-08T05:07:38.423Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:07:38.443Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-08T05:07:38.444Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:07:38.445Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-08T05:07:38.447Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-08T05:07:38.448Z","level":"DEBUG","message":"Current balance before update","data":{"total":100400,"available":89401,"used":10999,"transactionCount":51}}
{"timestamp":"2025-07-08T05:07:53.355Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:07:53.375Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-08T05:07:53.377Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":12}}
{"timestamp":"2025-07-08T05:07:53.378Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":12}}
{"timestamp":"2025-07-08T05:07:53.380Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-08T05:07:53.382Z","level":"DEBUG","message":"Current balance before update","data":{"total":100475,"available":89476,"used":10999,"transactionCount":52}}
{"timestamp":"2025-07-08T05:08:04.083Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:08:04.103Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-08T05:08:04.104Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:08:04.106Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-100}}
{"timestamp":"2025-07-08T05:08:04.107Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-08T05:08:04.110Z","level":"DEBUG","message":"Current balance before update","data":{"total":100487,"available":89488,"used":10999,"transactionCount":53}}
{"timestamp":"2025-07-08T05:08:12.160Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:08:12.178Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-08T05:08:12.180Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:08:12.181Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-100}}
{"timestamp":"2025-07-08T05:08:12.182Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-08T05:08:12.185Z","level":"DEBUG","message":"Current balance before update","data":{"total":10004978,"available":9922254,"used":82724,"transactionCount":318}}
{"timestamp":"2025-07-08T05:08:13.077Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:08:13.100Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-08T05:08:13.102Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:08:13.103Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-100}}
{"timestamp":"2025-07-08T05:08:13.104Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-08T05:08:13.106Z","level":"DEBUG","message":"Current balance before update","data":{"total":10004978,"available":9922154,"used":82824,"transactionCount":319}}
{"timestamp":"2025-07-08T05:13:29.331Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T05:13:29.350Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T05:13:29.352Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:13:29.354Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T05:13:29.356Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T05:13:29.357Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:13:29.358Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T05:13:29.359Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T05:13:29.360Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T05:13:29.362Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:13:29.364Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T05:13:29.365Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T05:13:29.368Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T05:13:29.371Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T05:13:29.374Z","level":"DEBUG","message":"Current balance before update","data":{"total":10004978,"available":9922054,"used":82924,"transactionCount":320}}
{"timestamp":"2025-07-08T07:54:49.927Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T07:54:49.956Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T07:54:49.958Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T07:54:49.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T07:54:49.961Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T07:54:49.962Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T07:54:49.963Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T07:54:49.965Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T07:54:49.967Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T07:54:49.969Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T07:54:49.970Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T07:54:49.972Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T07:54:49.973Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T07:54:49.975Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T07:54:49.976Z","level":"DEBUG","message":"Current balance before update","data":{"total":10008728,"available":9925804,"used":82924,"transactionCount":321}}
{"timestamp":"2025-07-08T08:17:19.539Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-08T08:17:19.576Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-08T08:17:19.577Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T08:17:19.578Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-08T08:17:19.580Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-08T08:17:19.582Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T08:17:19.583Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-08T08:17:19.585Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-08T08:17:19.587Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-08T08:17:19.588Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T08:17:19.591Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-08T08:17:19.593Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-08T08:17:19.594Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-08T08:17:19.598Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-08T08:17:19.600Z","level":"DEBUG","message":"Current balance before update","data":{"total":10012478,"available":9929554,"used":82924,"transactionCount":322}}
{"timestamp":"2025-07-09T04:51:42.602Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-09T04:51:42.634Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-09T04:51:42.637Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-09T04:51:42.640Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-09T04:51:42.643Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-09T04:51:42.644Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-09T04:51:42.646Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-09T04:51:42.648Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-09T04:51:42.649Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-09T04:51:42.651Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-09T04:51:42.652Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-09T04:51:42.654Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-09T04:51:42.655Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-09T04:51:42.658Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-09T04:51:42.660Z","level":"DEBUG","message":"Current balance before update","data":{"total":10016228,"available":9933304,"used":82924,"transactionCount":323}}
{"timestamp":"2025-07-09T05:19:13.831Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-09T05:19:13.870Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-09T05:19:13.873Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-09T05:19:13.875Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-09T05:19:13.880Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-09T05:19:13.882Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-09T05:19:13.884Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-09T05:19:13.886Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-09T05:19:13.887Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-09T05:19:13.888Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-09T05:19:13.889Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-09T05:19:13.891Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-09T05:19:13.893Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-09T05:19:13.896Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-09T05:19:13.901Z","level":"DEBUG","message":"Current balance before update","data":{"total":10019978,"available":9937054,"used":82924,"transactionCount":324}}
{"timestamp":"2025-07-10T01:51:53.050Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:51:53.088Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T01:51:53.091Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:51:53.093Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T01:51:53.096Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T01:51:53.098Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:51:53.099Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T01:51:53.104Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T01:51:53.107Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T01:51:53.108Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:51:53.109Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T01:51:53.111Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:51:53.112Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T01:51:53.114Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T01:51:53.116Z","level":"DEBUG","message":"Current balance before update","data":{"total":10023728,"available":9940804,"used":82924,"transactionCount":325}}
{"timestamp":"2025-07-10T01:52:05.103Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:52:05.138Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T01:52:05.145Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:52:05.156Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T01:52:05.159Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T01:52:05.161Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:52:05.163Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T01:52:05.165Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T01:52:05.167Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T01:52:05.169Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:52:05.171Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T01:52:05.172Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:52:05.174Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T01:52:05.176Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T01:52:05.179Z","level":"DEBUG","message":"Current balance before update","data":{"total":10027478,"available":9944554,"used":82924,"transactionCount":326}}
{"timestamp":"2025-07-10T01:52:07.817Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:52:07.844Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T01:52:07.847Z","level":"DEBUG","message":"Current balance before update","data":{"total":10031228,"available":9948304,"used":82924,"transactionCount":327}}
{"timestamp":"2025-07-10T01:52:11.025Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:52:11.052Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T01:52:11.055Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:52:11.058Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T01:52:11.061Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T01:52:11.063Z","level":"DEBUG","message":"Current balance before update","data":{"total":100487,"available":89388,"used":11099,"transactionCount":54}}
{"timestamp":"2025-07-10T01:52:17.512Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:52:17.546Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T01:52:17.548Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:52:17.550Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T01:52:17.554Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T01:52:17.557Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T01:52:20.525Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:52:20.551Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T01:52:20.554Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-10T01:52:20.556Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-10T01:52:20.558Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T01:52:20.560Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T01:52:24.087Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:52:24.108Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T01:52:24.110Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:52:24.111Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T01:52:24.112Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T01:52:24.114Z","level":"DEBUG","message":"Current balance before update","data":{"total":1150,"available":1150,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T01:56:19.510Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:56:19.531Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T01:56:19.534Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:56:19.536Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T01:56:19.539Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T01:56:19.541Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:56:19.543Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T01:56:19.544Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T01:56:19.547Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T01:56:19.549Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:56:19.551Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T01:56:19.554Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:56:19.556Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T01:56:19.559Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T01:56:19.562Z","level":"DEBUG","message":"Current balance before update","data":{"total":10031228,"available":9948304,"used":82924,"transactionCount":328}}
{"timestamp":"2025-07-10T01:58:00.694Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T01:58:00.714Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T01:58:00.716Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:58:00.717Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T01:58:00.719Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T01:58:00.720Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:58:00.722Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T01:58:00.723Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T01:58:00.725Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T01:58:00.726Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:58:00.727Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T01:58:00.728Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T01:58:00.730Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T01:58:00.732Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T01:58:00.735Z","level":"DEBUG","message":"Current balance before update","data":{"total":10034978,"available":9952054,"used":82924,"transactionCount":329}}
{"timestamp":"2025-07-10T02:40:05.899Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:40:05.932Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T02:40:05.934Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:40:05.936Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T02:40:05.941Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T02:40:05.949Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:40:05.952Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T02:40:05.955Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T02:40:05.963Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T02:40:05.965Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:40:05.966Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T02:40:05.967Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:40:05.968Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T02:40:19.231Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:41:04.180Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:41:04.202Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T02:41:04.204Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:41:04.206Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T02:41:04.210Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T02:41:04.212Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:41:04.213Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T02:41:04.215Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T02:41:04.217Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T02:41:04.218Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:41:04.220Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T02:41:04.222Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:41:04.224Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T02:41:08.273Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":38,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:52:27.725Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:52:27.740Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T02:52:27.742Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":6000,"discountedAmount":6000,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:27.742Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":6000}}
{"timestamp":"2025-07-10T02:52:27.744Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T02:52:27.745Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-10T02:52:27.746Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":6000,"discountedAmount":6000,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:27.747Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T02:52:27.747Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":6000,"discountedAmount":6000,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:27.748Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-10T02:52:27.750Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-10T02:52:27.751Z","level":"DEBUG","message":"Current balance before update","data":{"total":274211,"available":265911,"used":8300,"transactionCount":41}}
{"timestamp":"2025-07-10T02:52:44.519Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:52:44.529Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T02:52:44.530Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":12000,"discountedAmount":12000,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:44.531Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":12000}}
{"timestamp":"2025-07-10T02:52:44.531Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T02:52:44.532Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":12000,"discountedAmount":12000,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:44.533Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1200}}
{"timestamp":"2025-07-10T02:52:44.533Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T02:52:44.534Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T02:52:44.535Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus - HKD 5000+ gets +200 MD","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-10T02:52:44.535Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":12000,"discountedAmount":12000,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:44.536Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":12300}}
{"timestamp":"2025-07-10T02:52:44.537Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":12000,"discountedAmount":12000,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:44.538Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T02:52:44.539Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":12000,"discountedAmount":12000,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:44.539Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-10T02:52:44.540Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus - HKD 10000+ gets +500 MD"},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-10T02:52:44.541Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":12000,"discountedAmount":12000,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:52:44.541Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-10T02:52:44.543Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":6,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-10T02:52:44.544Z","level":"DEBUG","message":"Current balance before update","data":{"total":10038728,"available":9955804,"used":82924,"transactionCount":330}}
{"timestamp":"2025-07-10T02:53:59.699Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:53:59.713Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T02:53:59.714Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:53:59.715Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T02:53:59.717Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T02:53:59.718Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:53:59.719Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T02:53:59.720Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T02:53:59.721Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T02:53:59.722Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:53:59.723Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T02:53:59.723Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:53:59.724Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T02:53:59.726Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T02:53:59.728Z","level":"DEBUG","message":"Current balance before update","data":{"total":10065028,"available":9982104,"used":82924,"transactionCount":331}}
{"timestamp":"2025-07-10T02:54:01.983Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:54:01.999Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T02:54:02.001Z","level":"DEBUG","message":"Current balance before update","data":{"total":10068778,"available":9985854,"used":82924,"transactionCount":332}}
{"timestamp":"2025-07-10T02:54:04.127Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:54:04.140Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T02:54:04.141Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:54:04.142Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T02:54:04.145Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T02:54:04.146Z","level":"DEBUG","message":"Current balance before update","data":{"total":100637,"available":89538,"used":11099,"transactionCount":55}}
{"timestamp":"2025-07-10T02:54:08.779Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:54:08.790Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T02:54:08.791Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:54:08.792Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T02:54:08.793Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T02:54:08.794Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T02:54:12.257Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:54:12.270Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T02:54:12.271Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:54:12.273Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T02:54:12.276Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T02:54:12.277Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T02:54:15.341Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:54:15.354Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T02:54:15.355Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-10T02:54:15.356Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-10T02:54:15.357Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T02:54:15.358Z","level":"DEBUG","message":"Current balance before update","data":{"total":225,"available":225,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T02:54:17.931Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T02:54:17.947Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T02:54:17.948Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T02:54:17.950Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T02:54:17.951Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T02:54:17.952Z","level":"DEBUG","message":"Current balance before update","data":{"total":1225,"available":1225,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T04:43:44.798Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:43:44.813Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T04:43:44.814Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:43:44.815Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T04:43:44.817Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T04:43:44.818Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:43:44.818Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T04:43:44.819Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T04:43:44.820Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T04:43:44.821Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:43:44.822Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T04:43:44.822Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:43:44.823Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T04:43:44.824Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T04:43:44.825Z","level":"DEBUG","message":"Current balance before update","data":{"total":10068778,"available":9985854,"used":82924,"transactionCount":333}}
{"timestamp":"2025-07-10T04:43:46.652Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:43:46.662Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T04:43:46.663Z","level":"DEBUG","message":"Current balance before update","data":{"total":10072528,"available":9989604,"used":82924,"transactionCount":334}}
{"timestamp":"2025-07-10T04:43:48.393Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:43:48.403Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T04:43:48.404Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:43:48.405Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T04:43:48.406Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T04:43:48.407Z","level":"DEBUG","message":"Current balance before update","data":{"total":100787,"available":89688,"used":11099,"transactionCount":56}}
{"timestamp":"2025-07-10T04:43:52.694Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:43:52.704Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T04:43:52.705Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:43:52.706Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T04:43:52.707Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T04:43:52.708Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T04:43:59.111Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:43:59.120Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T04:43:59.121Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":1,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:43:59.122Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":50}}
{"timestamp":"2025-07-10T04:43:59.123Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T04:43:59.124Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T04:44:06.322Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:44:06.332Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T04:44:06.333Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:44:06.334Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":100}}
{"timestamp":"2025-07-10T04:44:06.335Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T04:44:06.336Z","level":"DEBUG","message":"Current balance before update","data":{"total":200,"available":200,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T04:44:13.376Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:44:13.386Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T04:44:13.387Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:44:13.387Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":250}}
{"timestamp":"2025-07-10T04:44:13.389Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T04:44:13.389Z","level":"DEBUG","message":"Current balance before update","data":{"total":300,"available":300,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T04:44:24.063Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:44:24.072Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T04:44:24.073Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:44:24.074Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T04:44:24.074Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T04:44:24.075Z","level":"DEBUG","message":"Current balance before update","data":{"total":280511,"available":272211,"used":8300,"transactionCount":42}}
{"timestamp":"2025-07-10T04:44:28.548Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:44:28.557Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion - 75 MD"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T04:44:28.558Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:44:28.558Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T04:44:28.559Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T04:44:28.560Z","level":"DEBUG","message":"Current balance before update","data":{"total":100937,"available":89838,"used":11099,"transactionCount":57}}
{"timestamp":"2025-07-10T04:44:32.479Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:44:32.490Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T04:44:32.491Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":123}}
{"timestamp":"2025-07-10T04:44:32.491Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":123}}
{"timestamp":"2025-07-10T04:44:32.492Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T04:44:32.494Z","level":"DEBUG","message":"Current balance before update","data":{"total":101012,"available":89913,"used":11099,"transactionCount":58}}
{"timestamp":"2025-07-10T04:44:45.195Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:44:45.204Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T04:44:45.204Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:44:45.205Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T04:44:45.206Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T04:44:45.206Z","level":"DEBUG","message":"Current balance before update","data":{"total":101135,"available":90036,"used":11099,"transactionCount":59}}
{"timestamp":"2025-07-10T04:46:01.933Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:46:01.946Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T04:46:01.947Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:46:01.948Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T04:46:01.949Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T04:46:01.950Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:46:01.951Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T04:46:01.951Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T04:46:01.953Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T04:46:01.954Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:46:01.954Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T04:46:01.955Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:46:01.956Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T04:46:01.957Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T04:46:01.958Z","level":"DEBUG","message":"Current balance before update","data":{"total":10072528,"available":9989604,"used":82924,"transactionCount":335}}
{"timestamp":"2025-07-10T04:49:47.979Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:49:47.988Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T04:49:47.989Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:49:47.990Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T04:49:47.991Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T04:49:47.991Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:49:47.992Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T04:49:47.993Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T04:49:47.993Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T04:49:47.994Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:49:47.995Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T04:49:47.995Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:49:47.996Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T04:49:47.998Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T04:49:47.999Z","level":"DEBUG","message":"Current balance before update","data":{"total":10076278,"available":9993354,"used":82924,"transactionCount":336}}
{"timestamp":"2025-07-10T04:50:03.401Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:50:03.410Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T04:50:03.411Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:50:03.411Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T04:50:03.412Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T04:50:03.413Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:50:03.414Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T04:50:03.414Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T04:50:03.416Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T04:50:03.417Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:50:03.418Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T04:50:03.418Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:50:03.419Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T04:50:03.420Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T04:50:03.421Z","level":"DEBUG","message":"Current balance before update","data":{"total":10080028,"available":9997104,"used":82924,"transactionCount":337}}
{"timestamp":"2025-07-10T04:50:05.296Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:50:05.304Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T04:50:05.305Z","level":"DEBUG","message":"Current balance before update","data":{"total":10083778,"available":10000854,"used":82924,"transactionCount":338}}
{"timestamp":"2025-07-10T04:52:19.140Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:52:19.149Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T04:52:19.150Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:19.150Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T04:52:19.151Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T04:52:19.152Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:19.153Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T04:52:19.154Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T04:52:19.154Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T04:52:19.156Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:19.156Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T04:52:19.157Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:19.157Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T04:52:19.158Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T04:52:19.159Z","level":"DEBUG","message":"Current balance before update","data":{"total":10083778,"available":10000854,"used":82924,"transactionCount":339}}
{"timestamp":"2025-07-10T04:52:25.178Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:52:25.190Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T04:52:25.190Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:25.191Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T04:52:25.192Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T04:52:25.192Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:25.193Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T04:52:25.195Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T04:52:25.196Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T04:52:25.197Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:25.198Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T04:52:25.199Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:25.200Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T04:52:25.201Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T04:52:25.202Z","level":"DEBUG","message":"Current balance before update","data":{"total":10087528,"available":10004604,"used":82924,"transactionCount":340}}
{"timestamp":"2025-07-10T04:52:37.831Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:52:37.840Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T04:52:37.841Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:37.842Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T04:52:37.843Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T04:52:37.844Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:37.845Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T04:52:37.846Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T04:52:37.847Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T04:52:37.848Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:37.848Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T04:52:37.849Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:52:37.850Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T04:52:37.851Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T04:52:37.852Z","level":"DEBUG","message":"Current balance before update","data":{"total":10091278,"available":10008354,"used":82924,"transactionCount":341}}
{"timestamp":"2025-07-10T04:55:37.514Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T04:55:37.529Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T04:55:37.531Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:55:37.532Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T04:55:37.534Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T04:55:37.535Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:55:37.536Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T04:55:37.538Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T04:55:37.539Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T04:55:37.540Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:55:37.541Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T04:55:37.542Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T04:55:37.543Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T04:55:37.545Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T04:55:37.547Z","level":"DEBUG","message":"Current balance before update","data":{"total":10095028,"available":10012104,"used":82924,"transactionCount":342}}
{"timestamp":"2025-07-10T05:00:37.672Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:00:37.685Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T05:00:37.686Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:00:37.687Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:00:37.688Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T05:00:37.690Z","level":"DEBUG","message":"Current balance before update","data":{"total":101135,"available":89536,"used":11599,"transactionCount":60}}
{"timestamp":"2025-07-10T05:00:47.036Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:00:47.050Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus - 150 MD"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T05:00:47.051Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:00:47.052Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:00:47.053Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T05:00:47.054Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T05:01:01.034Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:01:01.046Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:01:01.048Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:01:01.049Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:01:01.051Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus - +300 MD"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:01:01.053Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:01:01.054Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:01:01.056Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:01:01.057Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T05:03:32.948Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:03:32.961Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:03:32.962Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:03:32.963Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T05:03:32.963Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:03:32.966Z","level":"DEBUG","message":"Current balance before update","data":{"total":101285,"available":89686,"used":11599,"transactionCount":61}}
{"timestamp":"2025-07-10T05:03:41.161Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:03:41.176Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:03:41.177Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:03:41.178Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T05:03:41.179Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:03:41.180Z","level":"DEBUG","message":"Current balance before update","data":{"total":1950,"available":1950,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T05:04:07.044Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:04:07.059Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:04:07.060Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:04:07.062Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T05:04:07.062Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:04:07.063Z","level":"DEBUG","message":"Current balance before update","data":{"total":1950,"available":1450,"used":500,"transactionCount":3}}
{"timestamp":"2025-07-10T05:04:07.535Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:04:07.548Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:04:07.550Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:04:07.550Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T05:04:07.551Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:04:07.552Z","level":"DEBUG","message":"Current balance before update","data":{"total":1950,"available":950,"used":1000,"transactionCount":4}}
{"timestamp":"2025-07-10T05:12:52.815Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:12:52.825Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:12:52.826Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":100,"discountedAmount":100,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:12:52.827Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":100}}
{"timestamp":"2025-07-10T05:12:52.828Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:12:52.828Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":100,"discountedAmount":100,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:12:52.829Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":10}}
{"timestamp":"2025-07-10T05:12:52.830Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:12:52.831Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:12:52.832Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":100,"discountedAmount":100,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:12:52.833Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":400}}
{"timestamp":"2025-07-10T05:12:52.834Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":100,"discountedAmount":100,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:12:52.835Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:12:52.836Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:12:52.837Z","level":"DEBUG","message":"Current balance before update","data":{"total":10098778,"available":10015854,"used":82924,"transactionCount":343}}
{"timestamp":"2025-07-10T05:13:30.537Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:13:30.548Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:13:30.549Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"TW","baseAmount":150,"discountedAmount":150,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:13:30.550Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:13:30.552Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:13:30.553Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"TW","baseAmount":150,"discountedAmount":150,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:13:30.554Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:13:30.555Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:13:30.556Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T05:17:07.327Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:17:07.346Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T05:17:07.347Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:17:07.349Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:17:07.350Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T05:17:07.351Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T05:17:07.749Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:17:07.767Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T05:17:07.768Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:17:07.769Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:17:07.771Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T05:17:07.772Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T05:17:48.856Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:17:48.866Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T05:17:48.867Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:17:48.868Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:17:48.869Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T05:17:48.870Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T05:21:05.030Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:21:05.041Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T05:21:05.042Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:21:05.044Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-10T05:21:05.045Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T05:21:05.046Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:21:05.048Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-10T05:21:05.049Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:21:05.050Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:21:05.051Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":15000}}
{"timestamp":"2025-07-10T05:21:05.052Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_VIP_MULTIPLIER"]}}
{"timestamp":"2025-07-10T05:21:05.053Z","level":"DEBUG","message":"Current balance before update","data":{"total":101285,"available":89186,"used":12099,"transactionCount":62}}
{"timestamp":"2025-07-10T05:21:10.863Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:21:10.876Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T05:21:10.876Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:21:10.877Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:21:10.879Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T05:21:10.880Z","level":"DEBUG","message":"Current balance before update","data":{"total":138785,"available":126686,"used":12099,"transactionCount":63}}
{"timestamp":"2025-07-10T05:21:33.530Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:21:33.541Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:21:33.542Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:21:33.542Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:21:33.543Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:21:33.544Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:21:33.545Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:21:33.546Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:21:33.548Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T05:21:37.631Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:21:37.642Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T05:21:37.643Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:21:37.644Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:21:37.645Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T05:21:37.646Z","level":"DEBUG","message":"Current balance before update","data":{"total":138935,"available":126836,"used":12099,"transactionCount":64}}
{"timestamp":"2025-07-10T05:21:50.111Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:21:50.125Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:21:50.126Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:21:50.127Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T05:21:50.128Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:21:50.129Z","level":"DEBUG","message":"Current balance before update","data":{"total":10099588,"available":10016664,"used":82924,"transactionCount":344}}
{"timestamp":"2025-07-10T05:22:03.013Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:22:03.026Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:22:03.027Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:22:03.028Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T05:22:03.029Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:22:03.030Z","level":"DEBUG","message":"Current balance before update","data":{"total":1800,"available":1800,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T05:22:04.499Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:22:04.509Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:22:04.510Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:22:04.510Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T05:22:04.511Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:22:04.512Z","level":"DEBUG","message":"Current balance before update","data":{"total":1800,"available":1300,"used":500,"transactionCount":2}}
{"timestamp":"2025-07-10T05:22:05.370Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:22:05.381Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:22:05.382Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:22:05.383Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T05:22:05.384Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:22:05.385Z","level":"DEBUG","message":"Current balance before update","data":{"total":1800,"available":800,"used":1000,"transactionCount":3}}
{"timestamp":"2025-07-10T05:25:40.676Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:25:40.692Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:25:40.693Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:25:40.695Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-12}}
{"timestamp":"2025-07-10T05:25:40.696Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T05:25:40.698Z","level":"DEBUG","message":"Current balance before update","data":{"total":10099588,"available":10016164,"used":83424,"transactionCount":345}}
{"timestamp":"2025-07-10T05:30:07.944Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:30:07.957Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:30:07.958Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:07.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:30:07.960Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:30:07.961Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:07.961Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:30:07.962Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:30:07.963Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:30:07.964Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:07.965Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:30:07.965Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:07.967Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:30:07.968Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:30:07.970Z","level":"DEBUG","message":"Current balance before update","data":{"total":10099588,"available":10016152,"used":83436,"transactionCount":346}}
{"timestamp":"2025-07-10T05:30:20.843Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:30:20.857Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:30:20.858Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:20.859Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":12}}
{"timestamp":"2025-07-10T05:30:20.861Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:30:20.862Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:20.862Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1}}
{"timestamp":"2025-07-10T05:30:20.863Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:30:20.864Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:30:20.865Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:20.865Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":312}}
{"timestamp":"2025-07-10T05:30:20.866Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:20.867Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:30:20.869Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:30:20.871Z","level":"DEBUG","message":"Current balance before update","data":{"total":10103338,"available":10019902,"used":83436,"transactionCount":347}}
{"timestamp":"2025-07-10T05:30:39.305Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:30:39.317Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:30:39.318Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:39.318Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":12}}
{"timestamp":"2025-07-10T05:30:39.319Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:30:39.320Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:30:39.321Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:30:39.322Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:30:39.323Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T05:37:54.938Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:37:54.951Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:37:54.952Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:37:54.953Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:37:54.954Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:37:54.955Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:37:54.956Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:37:54.956Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:37:54.957Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:37:54.958Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:37:54.959Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:37:54.960Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:37:54.960Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:37:54.962Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:37:54.963Z","level":"DEBUG","message":"Current balance before update","data":{"total":10103963,"available":10020527,"used":83436,"transactionCount":348}}
{"timestamp":"2025-07-10T05:42:53.026Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:42:53.036Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:42:53.038Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:42:53.039Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:42:53.040Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:42:53.041Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:42:53.043Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:42:53.044Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:42:53.046Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:42:53.047Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:42:53.048Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:42:53.050Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:42:53.050Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:42:53.051Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:42:53.052Z","level":"DEBUG","message":"Current balance before update","data":{"total":10107713,"available":10024277,"used":83436,"transactionCount":349}}
{"timestamp":"2025-07-10T05:43:30.392Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:43:30.406Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:43:30.408Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:43:30.409Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":500}}
{"timestamp":"2025-07-10T05:43:30.410Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:43:30.410Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:43:30.411Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:43:30.412Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:43:30.414Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T05:47:09.545Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:47:09.557Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:47:09.558Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:47:09.560Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:47:09.561Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:47:09.563Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:47:09.564Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:47:09.565Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:47:09.566Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:47:09.567Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:47:09.568Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:47:09.568Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:47:09.569Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:47:09.570Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T05:47:09.571Z","level":"DEBUG","message":"Current balance before update","data":{"total":10111463,"available":10028027,"used":83436,"transactionCount":350}}
{"timestamp":"2025-07-10T05:47:11.784Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:47:11.797Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T05:47:11.799Z","level":"DEBUG","message":"Current balance before update","data":{"total":10115213,"available":10031777,"used":83436,"transactionCount":351}}
{"timestamp":"2025-07-10T05:47:14.508Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:47:14.519Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"registrationBonus":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T05:47:14.520Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:47:14.522Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T05:47:14.523Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T05:47:14.524Z","level":"DEBUG","message":"Current balance before update","data":{"total":139085,"available":126986,"used":12099,"transactionCount":65}}
{"timestamp":"2025-07-10T05:53:43.120Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:53:43.132Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:53:43.133Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:53:43.133Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:53:43.134Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:53:43.135Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:53:43.136Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:53:43.137Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:53:43.138Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:53:43.138Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:53:43.140Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:53:43.140Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:53:43.141Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:54:02.524Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:54:02.533Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:54:02.533Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:54:02.534Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:54:02.535Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:54:02.536Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:54:02.537Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:54:02.538Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:54:02.539Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:54:02.539Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:54:02.540Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:54:02.541Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:54:02.541Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:54:05.634Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:54:18.852Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:54:18.861Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:54:18.862Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:54:18.862Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:54:18.864Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:54:18.866Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:54:18.866Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:54:18.867Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:54:18.868Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:54:18.869Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:54:18.870Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:54:18.871Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:54:18.872Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:55:32.385Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:55:32.395Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:55:32.395Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:32.396Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:55:32.397Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:55:32.398Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:32.399Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:55:32.400Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:55:32.400Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:55:32.401Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:32.402Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:55:32.402Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:32.403Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:55:35.331Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:55:35.341Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:55:35.341Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:35.342Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:55:35.343Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:55:35.343Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:35.344Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:55:35.345Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:55:35.346Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:55:35.347Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:35.347Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:55:35.348Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:35.349Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:55:57.331Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:55:57.340Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:55:57.341Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:57.343Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:55:57.343Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:55:57.344Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:57.345Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:55:57.346Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:55:57.346Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:55:57.347Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:57.348Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:55:57.349Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:55:57.351Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:57:34.968Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:57:34.979Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T05:57:34.980Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:57:34.981Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T05:57:34.982Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T05:57:34.983Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:57:34.984Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":150}}
{"timestamp":"2025-07-10T05:57:34.985Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T05:57:34.986Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T05:57:34.986Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:57:34.987Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":1800}}
{"timestamp":"2025-07-10T05:57:34.988Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:57:34.989Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T05:57:39.162Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:57:40.948Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:57:50.905Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":40,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T05:57:50.920Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T05:57:50.921Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T05:57:50.922Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:01:50.589Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:01:50.604Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:01:50.606Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:01:50.606Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:01:50.608Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:01:50.609Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:01:50.610Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:01:50.611Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:01:50.612Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:01:50.613Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:02:01.685Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:01.696Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:02:01.696Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:02:01.697Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:02:01.698Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:02:01.699Z","level":"DEBUG","message":"Current balance before update","data":{"total":10115213,"available":10031777,"used":83436,"transactionCount":352}}
{"timestamp":"2025-07-10T06:02:04.786Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:04.798Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:02:04.799Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:02:04.800Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:02:04.801Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T06:02:04.802Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:02:04.802Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1650}}
{"timestamp":"2025-07-10T06:02:04.803Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:02:04.804Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:02:04.804Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:02:04.805Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T06:02:04.806Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:02:04.806Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:02:04.807Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:02:04.808Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":5,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:02:04.809Z","level":"DEBUG","message":"Current balance before update","data":{"total":10115213,"available":10031777,"used":83436,"transactionCount":353}}
{"timestamp":"2025-07-10T06:02:09.718Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:09.733Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T06:02:09.734Z","level":"DEBUG","message":"Current balance before update","data":{"total":10119863,"available":10036427,"used":83436,"transactionCount":354}}
{"timestamp":"2025-07-10T06:02:11.885Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:11.899Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"calculationMethod":"fixed","fixedPoints":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T06:02:11.900Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:02:11.901Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T06:02:11.902Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T06:02:11.904Z","level":"DEBUG","message":"Current balance before update","data":{"total":139235,"available":127136,"used":12099,"transactionCount":66}}
{"timestamp":"2025-07-10T06:02:19.633Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:19.648Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:02:19.650Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:02:19.651Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:02:19.652Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:02:19.653Z","level":"DEBUG","message":"Current balance before update","data":{"total":139385,"available":127286,"used":12099,"transactionCount":67}}
{"timestamp":"2025-07-10T06:02:30.608Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:30.623Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T06:02:30.624Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":1000}}
{"timestamp":"2025-07-10T06:02:30.625Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-10T06:02:30.627Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T06:02:30.628Z","level":"DEBUG","message":"Current balance before update","data":{"total":139385,"available":127286,"used":12099,"transactionCount":68}}
{"timestamp":"2025-07-10T06:02:34.625Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:34.639Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T06:02:34.640Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:34.642Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":10}}
{"timestamp":"2025-07-10T06:02:34.643Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T06:02:34.645Z","level":"DEBUG","message":"Current balance before update","data":{"total":140385,"available":128286,"used":12099,"transactionCount":69}}
{"timestamp":"2025-07-10T06:02:38.227Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:38.240Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:02:38.241Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:38.242Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-10T06:02:38.243Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:02:38.244Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:38.245Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":225000}}
{"timestamp":"2025-07-10T06:02:38.246Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:02:38.247Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:38.249Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":300000}}
{"timestamp":"2025-07-10T06:02:38.251Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_VIP_MULTIPLIER"]}}
{"timestamp":"2025-07-10T06:02:38.253Z","level":"DEBUG","message":"Current balance before update","data":{"total":140395,"available":128296,"used":12099,"transactionCount":70}}
{"timestamp":"2025-07-10T06:02:43.448Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:43.459Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:02:43.460Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":50,"discountedAmount":50,"itemCount":12,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:43.462Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":5}}
{"timestamp":"2025-07-10T06:02:43.463Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:02:43.464Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":50,"discountedAmount":50,"itemCount":12,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:43.466Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":75}}
{"timestamp":"2025-07-10T06:02:43.468Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:02:43.468Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"JP","baseAmount":50,"discountedAmount":50,"itemCount":12,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:43.470Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":100}}
{"timestamp":"2025-07-10T06:02:43.471Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_VIP_MULTIPLIER"]}}
{"timestamp":"2025-07-10T06:02:43.472Z","level":"DEBUG","message":"Current balance before update","data":{"total":680395,"available":668296,"used":12099,"transactionCount":71}}
{"timestamp":"2025-07-10T06:02:55.801Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:02:55.815Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:02:55.816Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":50,"discountedAmount":50,"itemCount":0,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:55.817Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":5}}
{"timestamp":"2025-07-10T06:02:55.818Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:02:55.819Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":50,"discountedAmount":50,"itemCount":0,"adjustmentValue":10}}
{"timestamp":"2025-07-10T06:02:55.820Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":75}}
{"timestamp":"2025-07-10T06:02:55.821Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-10T06:02:55.822Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:10:23.377Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:10:23.386Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":[],"totalRules":18}}
{"timestamp":"2025-07-10T06:10:23.398Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:10:23.400Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:10:23.401Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:10:23.402Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:10:23.405Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:11:00.675Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:11:00.683Z","level":"DEBUG","message":"Scanning rules for event types...","data":{"totalRules":18}}
{"timestamp":"2025-07-10T06:11:00.685Z","level":"DEBUG","message":"Rule 0:","data":{"name":"HK High Value Purchase Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.686Z","level":"DEBUG","message":"Rule 1:","data":{"name":"HK Premium Purchase Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.687Z","level":"DEBUG","message":"Rule 2:","data":{"name":"TW Premium Purchase Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.688Z","level":"DEBUG","message":"Rule 3:","data":{"name":"Birth Month Purchase Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.690Z","level":"DEBUG","message":"Rule 4:","data":{"name":"VIP Status Multiplier","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.692Z","level":"DEBUG","message":"Rule 5:","data":{"name":"FTE SKU Multiplier","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"contains\",\n     ..."}}
{"timestamp":"2025-07-10T06:11:00.693Z","level":"DEBUG","message":"Rule 6:","data":{"name":"Moisture Set Combo Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"contains\",\n     ..."}}
{"timestamp":"2025-07-10T06:11:00.694Z","level":"DEBUG","message":"Rule 7:","data":{"name":"Full Regimen Combo Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.695Z","level":"DEBUG","message":"Rule 8:","data":{"name":"JP Registration Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"REGISTRATION\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n    ..."}}
{"timestamp":"2025-07-10T06:11:00.696Z","level":"DEBUG","message":"Rule 9:","data":{"name":"JP Base Purchase Points","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.697Z","level":"DEBUG","message":"Rule 10:","data":{"name":"HK/TW Base Purchase Points","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"in\",\n        \"va..."}}
{"timestamp":"2025-07-10T06:11:00.698Z","level":"DEBUG","message":"Rule 11:","data":{"name":"JP Campaign Multiplier","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.699Z","level":"DEBUG","message":"Rule 12:","data":{"name":"HK/TW Campaign Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"in\",\n        \"va..."}}
{"timestamp":"2025-07-10T06:11:00.700Z","level":"DEBUG","message":"Rule 13:","data":{"name":"Bottle Recycling Reward","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"RECYCLE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"greaterThan\",\n   ..."}}
{"timestamp":"2025-07-10T06:11:00.701Z","level":"DEBUG","message":"Rule 14:","data":{"name":"Skin Consultation Bonus","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"CONSULTATION\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"notEqual\",\n ..."}}
{"timestamp":"2025-07-10T06:11:00.702Z","level":"DEBUG","message":"Rule 15:","data":{"name":"Manual Admin Adjustment","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"ADJUSTMENT\",\n        \"fact\": \"eventType\"\n      }\n    ]\n  },\n  \"priority\": 1,\n  \"event\": {\n   ..."}}
{"timestamp":"2025-07-10T06:11:00.703Z","level":"DEBUG","message":"Rule 16:","data":{"name":"Point Redemption - All Markets","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"REDEMPTION\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"greaterThan\",\n..."}}
{"timestamp":"2025-07-10T06:11:00.704Z","level":"DEBUG","message":"Rule 17:","data":{"name":"STEVE_JOBS_RULE","hasEvent":false,"entireRule":"{\n  \"conditions\": {\n    \"priority\": 1,\n    \"all\": [\n      {\n        \"operator\": \"equal\",\n        \"value\": \"PURCHASE\",\n        \"fact\": \"eventType\"\n      },\n      {\n        \"operator\": \"equal\",\n        ..."}}
{"timestamp":"2025-07-10T06:11:00.706Z","level":"DEBUG","message":"Final discovered event types:","data":[]}
{"timestamp":"2025-07-10T06:11:00.707Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":[],"totalRules":18}}
{"timestamp":"2025-07-10T06:11:00.718Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:11:00.720Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:11:00.723Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:11:00.725Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:11:00.727Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T06:11:30.557Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:11:30.566Z","level":"DEBUG","message":"Scanning rules for event types...","data":{"totalRules":18}}
{"timestamp":"2025-07-10T06:11:30.566Z","level":"DEBUG","message":"Rule 0 analysis:","data":{"name":"HK High Value Purchase Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.568Z","level":"DEBUG","message":"Rule 1 analysis:","data":{"name":"HK Premium Purchase Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.569Z","level":"DEBUG","message":"Rule 2 analysis:","data":{"name":"TW Premium Purchase Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.571Z","level":"DEBUG","message":"Rule 3 analysis:","data":{"name":"Birth Month Purchase Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.572Z","level":"DEBUG","message":"Rule 4 analysis:","data":{"name":"VIP Status Multiplier","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.573Z","level":"DEBUG","message":"Rule 5 analysis:","data":{"name":"FTE SKU Multiplier","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.574Z","level":"DEBUG","message":"Rule 6 analysis:","data":{"name":"Moisture Set Combo Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.575Z","level":"DEBUG","message":"Rule 7 analysis:","data":{"name":"Full Regimen Combo Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.576Z","level":"DEBUG","message":"Rule 8 analysis:","data":{"name":"JP Registration Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.577Z","level":"DEBUG","message":"Rule 9 analysis:","data":{"name":"JP Base Purchase Points","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.579Z","level":"DEBUG","message":"Rule 10 analysis:","data":{"name":"HK/TW Base Purchase Points","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.580Z","level":"DEBUG","message":"Rule 11 analysis:","data":{"name":"JP Campaign Multiplier","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.582Z","level":"DEBUG","message":"Rule 12 analysis:","data":{"name":"HK/TW Campaign Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.583Z","level":"DEBUG","message":"Rule 13 analysis:","data":{"name":"Bottle Recycling Reward","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.583Z","level":"DEBUG","message":"Rule 14 analysis:","data":{"name":"Skin Consultation Bonus","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.584Z","level":"DEBUG","message":"Rule 15 analysis:","data":{"name":"Manual Admin Adjustment","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.585Z","level":"DEBUG","message":"Rule 16 analysis:","data":{"name":"Point Redemption - All Markets","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.586Z","level":"DEBUG","message":"Rule 17 analysis:","data":{"name":"STEVE_JOBS_RULE","eventType":null,"hasToJSON":true,"hasEvent":false,"hasDef":false,"keys":["_events","_newListener","_removeListener","verboseMemoryLeak","conditions","name","priority","ruleEvent","engine"]}}
{"timestamp":"2025-07-10T06:11:30.587Z","level":"DEBUG","message":"Final discovered event types:","data":[]}
{"timestamp":"2025-07-10T06:11:30.588Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":[],"totalRules":18}}
{"timestamp":"2025-07-10T06:11:30.598Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:11:30.599Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:11:30.601Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:11:30.602Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:11:30.603Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T06:11:59.855Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:11:59.863Z","level":"DEBUG","message":"Scanning rules for event types...","data":{"totalRules":18}}
{"timestamp":"2025-07-10T06:11:59.863Z","level":"DEBUG","message":"Rule 0 \"HK High Value Purchase Bonus\":","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","hasRuleEvent":true,"ruleEventType":"FLEXIBLE_BASKET_AMOUNT"}}
{"timestamp":"2025-07-10T06:11:59.864Z","level":"DEBUG","message":"✅ Added event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:11:59.865Z","level":"DEBUG","message":"Rule 1 \"HK Premium Purchase Bonus\":","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","hasRuleEvent":true,"ruleEventType":"FLEXIBLE_BASKET_AMOUNT"}}
{"timestamp":"2025-07-10T06:11:59.866Z","level":"DEBUG","message":"✅ Added event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:11:59.866Z","level":"DEBUG","message":"Rule 2 \"TW Premium Purchase Bonus\":","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","hasRuleEvent":true,"ruleEventType":"FLEXIBLE_BASKET_AMOUNT"}}
{"timestamp":"2025-07-10T06:11:59.868Z","level":"DEBUG","message":"✅ Added event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:11:59.869Z","level":"DEBUG","message":"Rule 3 \"Birth Month Purchase Bonus\":","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","hasRuleEvent":true,"ruleEventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS"}}
{"timestamp":"2025-07-10T06:11:59.870Z","level":"DEBUG","message":"✅ Added event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:11:59.870Z","level":"DEBUG","message":"Rule 4 \"VIP Status Multiplier\":","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","hasRuleEvent":true,"ruleEventType":"FLEXIBLE_VIP_MULTIPLIER"}}
{"timestamp":"2025-07-10T06:11:59.871Z","level":"DEBUG","message":"✅ Added event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:11:59.872Z","level":"DEBUG","message":"Rule 5 \"FTE SKU Multiplier\":","data":{"eventType":"FLEXIBLE_PRODUCT_MULTIPLIER","hasRuleEvent":true,"ruleEventType":"FLEXIBLE_PRODUCT_MULTIPLIER"}}
{"timestamp":"2025-07-10T06:11:59.872Z","level":"DEBUG","message":"✅ Added event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:11:59.873Z","level":"DEBUG","message":"Rule 6 \"Moisture Set Combo Bonus\":","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","hasRuleEvent":true,"ruleEventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}}
{"timestamp":"2025-07-10T06:11:59.874Z","level":"DEBUG","message":"✅ Added event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:11:59.875Z","level":"DEBUG","message":"Rule 7 \"Full Regimen Combo Bonus\":","data":{"eventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","hasRuleEvent":true,"ruleEventType":"FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}}
{"timestamp":"2025-07-10T06:11:59.876Z","level":"DEBUG","message":"✅ Added event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:11:59.876Z","level":"DEBUG","message":"Rule 8 \"JP Registration Bonus\":","data":{"eventType":"INTERACTION_REGISTRY_POINT","hasRuleEvent":true,"ruleEventType":"INTERACTION_REGISTRY_POINT"}}
{"timestamp":"2025-07-10T06:11:59.877Z","level":"DEBUG","message":"✅ Added event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:11:59.878Z","level":"DEBUG","message":"Rule 9 \"JP Base Purchase Points\":","data":{"eventType":"ORDER_BASE_POINT","hasRuleEvent":true,"ruleEventType":"ORDER_BASE_POINT"}}
{"timestamp":"2025-07-10T06:11:59.878Z","level":"DEBUG","message":"✅ Added event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:11:59.879Z","level":"DEBUG","message":"Rule 10 \"HK/TW Base Purchase Points\":","data":{"eventType":"ORDER_BASE_POINT","hasRuleEvent":true,"ruleEventType":"ORDER_BASE_POINT"}}
{"timestamp":"2025-07-10T06:11:59.880Z","level":"DEBUG","message":"✅ Added event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:11:59.880Z","level":"DEBUG","message":"Rule 11 \"JP Campaign Multiplier\":","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","hasRuleEvent":true,"ruleEventType":"ORDER_MULTIPLE_POINT_LIMIT"}}
{"timestamp":"2025-07-10T06:11:59.881Z","level":"DEBUG","message":"✅ Added event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:11:59.881Z","level":"DEBUG","message":"Rule 12 \"HK/TW Campaign Bonus\":","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","hasRuleEvent":true,"ruleEventType":"FLEXIBLE_CAMPAIGN_BONUS"}}
{"timestamp":"2025-07-10T06:11:59.882Z","level":"DEBUG","message":"✅ Added event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:11:59.883Z","level":"DEBUG","message":"Rule 13 \"Bottle Recycling Reward\":","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","hasRuleEvent":true,"ruleEventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}}
{"timestamp":"2025-07-10T06:11:59.883Z","level":"DEBUG","message":"✅ Added event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:11:59.884Z","level":"DEBUG","message":"Rule 14 \"Skin Consultation Bonus\":","data":{"eventType":"CONSULTATION_BONUS","hasRuleEvent":true,"ruleEventType":"CONSULTATION_BONUS"}}
{"timestamp":"2025-07-10T06:11:59.885Z","level":"DEBUG","message":"✅ Added event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:11:59.886Z","level":"DEBUG","message":"Rule 15 \"Manual Admin Adjustment\":","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","hasRuleEvent":true,"ruleEventType":"INTERACTION_ADJUST_POINT_BY_MANAGER"}}
{"timestamp":"2025-07-10T06:11:59.886Z","level":"DEBUG","message":"✅ Added event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:11:59.887Z","level":"DEBUG","message":"Rule 16 \"Point Redemption - All Markets\":","data":{"eventType":"REDEMPTION_DEDUCTION","hasRuleEvent":true,"ruleEventType":"REDEMPTION_DEDUCTION"}}
{"timestamp":"2025-07-10T06:11:59.887Z","level":"DEBUG","message":"✅ Added event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:11:59.888Z","level":"DEBUG","message":"Rule 17 \"STEVE_JOBS_RULE\":","data":{"eventType":"PURCHASE","hasRuleEvent":true,"ruleEventType":"PURCHASE"}}
{"timestamp":"2025-07-10T06:11:59.889Z","level":"DEBUG","message":"✅ Added event type: PURCHASE"}
{"timestamp":"2025-07-10T06:11:59.889Z","level":"DEBUG","message":"Final discovered event types:","data":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"]}
{"timestamp":"2025-07-10T06:11:59.890Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:11:59.891Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:11:59.892Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:11:59.892Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:11:59.893Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:11:59.894Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:11:59.894Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:11:59.895Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:11:59.895Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:11:59.896Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:11:59.896Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:11:59.897Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:11:59.898Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:11:59.898Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:11:59.899Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:11:59.909Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:11:59.910Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:11:59.911Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:11:59.913Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:11:59.914Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:11:59.914Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:11:59.915Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:11:59.916Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:11:59.917Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T06:11:59.917Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:11:59.918Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-10T06:12:44.152Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:12:44.158Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:12:44.159Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:12:44.160Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:12:44.161Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:12:44.161Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:12:44.162Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:12:44.162Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:12:44.163Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:12:44.164Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:12:44.165Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:12:44.166Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:12:44.167Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:12:44.168Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:12:44.169Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:12:44.169Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:12:44.178Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:12:44.179Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:12:44.180Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:12:44.182Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T06:12:44.183Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:12:44.184Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1650}}
{"timestamp":"2025-07-10T06:12:44.186Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:12:44.187Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:12:44.188Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:12:44.189Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T06:12:44.189Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:12:44.190Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:12:44.191Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:12:44.191Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:12:44.192Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T06:12:44.193Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":5,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:12:44.194Z","level":"DEBUG","message":"Current balance before update","data":{"total":10119863,"available":10036427,"used":83436,"transactionCount":355}}
{"timestamp":"2025-07-10T06:13:00.411Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:13:00.419Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:13:00.420Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:13:00.421Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:13:00.422Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:00.423Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:00.423Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:00.424Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:13:00.424Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:13:00.425Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:13:00.426Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:13:00.426Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:13:00.427Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:13:00.427Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:13:00.428Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:13:00.428Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:13:00.435Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:13:00.436Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:00.437Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:13:00.438Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:13:00.438Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:00.439Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:13:00.440Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:13:00.441Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:13:03.477Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:13:03.483Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:13:03.484Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:13:03.485Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:13:03.486Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:03.486Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:03.487Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:03.488Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:13:03.488Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:13:03.489Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:13:03.490Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:13:03.491Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:13:03.491Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:13:03.492Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:13:03.493Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:13:03.493Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:13:03.504Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:13:03.505Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:03.506Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:13:03.507Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:13:03.508Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":500,"discountedAmount":500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:03.509Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:13:03.511Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:13:03.512Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:13:14.646Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:13:14.652Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:13:14.654Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:13:14.655Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:13:14.655Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:14.656Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:14.657Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:14.658Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:13:14.659Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:13:14.660Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:13:14.661Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:13:14.662Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:13:14.663Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:13:14.664Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:13:14.666Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:13:14.666Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:13:14.674Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:13:14.675Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:14.676Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-10T06:13:14.677Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:13:14.678Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:14.678Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":18}}
{"timestamp":"2025-07-10T06:13:14.679Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:13:14.680Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:14.681Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":24}}
{"timestamp":"2025-07-10T06:13:14.682Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_VIP_MULTIPLIER"]}}
{"timestamp":"2025-07-10T06:13:14.683Z","level":"DEBUG","message":"Current balance before update","data":{"total":680575,"available":668476,"used":12099,"transactionCount":72}}
{"timestamp":"2025-07-10T06:13:19.243Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:13:19.250Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:13:19.251Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:13:19.252Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:13:19.253Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:19.253Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:19.253Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:19.254Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:13:19.255Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:13:19.256Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:13:19.256Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:13:19.257Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:13:19.258Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:13:19.258Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:13:19.259Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:13:19.260Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:13:19.267Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:13:19.269Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:19.270Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-10T06:13:19.271Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:13:19.273Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:19.274Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":18}}
{"timestamp":"2025-07-10T06:13:19.275Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-10T06:13:19.277Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:13:22.730Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:13:22.736Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:13:22.736Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:13:22.737Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:13:22.737Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:22.738Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:22.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:22.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:13:22.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:13:22.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:13:22.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:13:22.742Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:13:22.742Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:13:22.743Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:13:22.744Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:13:22.744Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:13:22.752Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:13:22.754Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:22.755Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-10T06:13:22.756Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:13:22.757Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:22.757Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":18}}
{"timestamp":"2025-07-10T06:13:22.759Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-10T06:13:22.760Z","level":"DEBUG","message":"Current balance before update","data":{"total":19,"available":19,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:13:23.436Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:13:23.443Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:13:23.444Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:13:23.445Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:13:23.446Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:23.447Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:23.447Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:13:23.448Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:13:23.449Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:13:23.450Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:13:23.451Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:13:23.452Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:13:23.453Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:13:23.453Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:13:23.454Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:13:23.455Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:13:23.461Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:13:23.462Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:23.463Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-10T06:13:23.464Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:13:23.465Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:13:23.466Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":18}}
{"timestamp":"2025-07-10T06:13:23.467Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-10T06:13:23.468Z","level":"DEBUG","message":"Current balance before update","data":{"total":38,"available":38,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T06:14:02.676Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:02.684Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:02.685Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:02.686Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:02.687Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:02.687Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:02.688Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:02.689Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:02.689Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:02.690Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:02.691Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:02.691Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:02.692Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:02.693Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:02.693Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:02.694Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:02.702Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:02.703Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:02.704Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:02.706Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:02.707Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T06:14:05.823Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:05.829Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:05.831Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:05.832Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:05.833Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:05.834Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:05.835Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:05.836Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:05.837Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:05.838Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:05.839Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:05.840Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:05.840Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:05.841Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:05.842Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:05.843Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:05.855Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:05.856Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:05.857Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:05.859Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:05.860Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-10T06:14:09.350Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:09.358Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:09.359Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:09.360Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:09.361Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:09.362Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:09.363Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:09.363Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:09.364Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:09.364Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:09.365Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:09.366Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:09.367Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:09.368Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:09.369Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:09.370Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:09.378Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:09.379Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:09.380Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:09.381Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:09.383Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-10T06:14:09.920Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:09.926Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:09.927Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:09.927Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:09.928Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:09.929Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:09.930Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:09.930Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:09.931Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:09.932Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:09.933Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:09.934Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:09.935Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:09.935Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:09.936Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:09.936Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:09.944Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:09.945Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:09.945Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:09.946Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:09.948Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-10T06:14:10.436Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:10.443Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:10.445Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:10.446Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:10.447Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:10.448Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:10.449Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:10.450Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:10.451Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:10.452Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:10.453Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:10.453Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:10.454Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:10.455Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:10.456Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:10.457Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:10.466Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:10.467Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:10.468Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:10.469Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:10.470Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-10T06:14:10.750Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:10.759Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:10.760Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:10.762Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:10.762Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:10.763Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:10.764Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:10.765Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:10.767Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:10.768Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:10.768Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:10.769Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:10.770Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:10.770Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:10.772Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:10.772Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:10.783Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:10.784Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:10.786Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:10.788Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:10.790Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":8}}
{"timestamp":"2025-07-10T06:14:11.004Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:11.013Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:11.014Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:11.015Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:11.017Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.018Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.019Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.020Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:11.021Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:11.022Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:11.023Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:11.024Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:11.025Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:11.026Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:11.027Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:11.028Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:11.040Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:11.041Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:11.042Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:11.043Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:11.045Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":9}}
{"timestamp":"2025-07-10T06:14:11.312Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:11.322Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:11.324Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:11.325Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:11.326Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.327Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.328Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.329Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:11.330Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:11.331Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:11.332Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:11.333Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:11.334Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:11.336Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:11.337Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:11.338Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:11.350Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:11.352Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:11.353Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:11.355Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:11.357Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":10}}
{"timestamp":"2025-07-10T06:14:11.661Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:11.669Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:11.671Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:11.672Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:11.673Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.674Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.675Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.676Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:11.677Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:11.678Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:11.679Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:11.680Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:11.681Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:11.682Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:11.683Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:11.684Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:11.693Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:11.693Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:11.694Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:11.695Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:11.698Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":11}}
{"timestamp":"2025-07-10T06:14:11.981Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:11.990Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:11.992Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:11.993Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:11.994Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.995Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.995Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:11.996Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:11.997Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:11.998Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:11.999Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:12.000Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:12.001Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:12.002Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:12.003Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:12.004Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:12.011Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:12.012Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:12.012Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:12.013Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:12.014Z","level":"DEBUG","message":"Current balance before update","data":{"total":57,"available":57,"used":0,"transactionCount":12}}
{"timestamp":"2025-07-10T06:14:28.927Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:28.933Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:28.935Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:28.935Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:28.936Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:28.936Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:28.937Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:28.937Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:28.938Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:28.939Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:28.939Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:28.940Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:28.941Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:28.941Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:28.942Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:28.943Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:28.955Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:28.956Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:28.957Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:28.958Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:28.959Z","level":"DEBUG","message":"Current balance before update","data":{"total":10124863,"available":10041427,"used":83436,"transactionCount":356}}
{"timestamp":"2025-07-10T06:14:30.528Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:30.533Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:30.534Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:30.534Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:30.535Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:30.536Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:30.536Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:30.537Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:30.537Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:30.538Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:30.539Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:30.539Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:30.540Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:30.541Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:30.541Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:30.542Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:30.551Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:14:30.552Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:30.553Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:30.554Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:14:30.555Z","level":"DEBUG","message":"Current balance before update","data":{"total":10124863,"available":10041427,"used":83436,"transactionCount":357}}
{"timestamp":"2025-07-10T06:14:36.829Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:36.833Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:36.834Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:36.835Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:36.836Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:36.837Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:36.837Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:36.838Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:36.839Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:36.840Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:36.840Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:36.841Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:36.842Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:36.842Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:36.843Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:36.843Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:36.854Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T06:14:36.855Z","level":"DEBUG","message":"Current balance before update","data":{"total":10124863,"available":10041427,"used":83436,"transactionCount":358}}
{"timestamp":"2025-07-10T06:14:39.914Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:39.921Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:39.922Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:39.922Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:39.924Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:39.924Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:39.925Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:39.926Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:39.926Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:39.928Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:39.929Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:39.930Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:39.930Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:39.931Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:39.933Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:39.934Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:39.940Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"calculationMethod":"fixed","fixedPoints":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T06:14:39.940Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:39.941Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T06:14:39.942Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T06:14:39.943Z","level":"DEBUG","message":"Current balance before update","data":{"total":680618,"available":668519,"used":12099,"transactionCount":73}}
{"timestamp":"2025-07-10T06:14:45.386Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:45.390Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:45.391Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:45.392Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:45.392Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:45.393Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:45.394Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:45.395Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:45.396Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:45.397Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:45.398Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:45.398Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:45.399Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:45.400Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:45.400Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:45.401Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:45.407Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:14:45.408Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:45.408Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:45.410Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:14:45.411Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:14:49.732Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:49.738Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:49.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:49.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:49.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:49.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:49.742Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:49.743Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:49.744Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:49.745Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:49.745Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:49.746Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:49.747Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:49.748Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:49.749Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:49.750Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:49.757Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:14:49.758Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:49.759Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:49.761Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:14:49.762Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:14:52.288Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:52.294Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:52.295Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:52.296Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:52.297Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:52.298Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:52.299Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:52.299Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:52.300Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:52.301Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:52.301Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:52.302Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:52.303Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:52.303Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:52.304Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:52.305Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:52.314Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:14:52.315Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:52.316Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:52.318Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:14:52.319Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T06:14:52.906Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:52.912Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:52.913Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:52.914Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:52.914Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:52.916Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:52.917Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:52.917Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:52.918Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:52.920Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:52.921Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:52.922Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:52.923Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:52.924Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:52.925Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:52.927Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:52.935Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:14:52.936Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:52.937Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:52.938Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:14:52.940Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T06:14:53.231Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:53.237Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:53.238Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:53.239Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:53.239Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:53.240Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:53.241Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:53.241Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:53.242Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:53.243Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:53.244Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:53.245Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:53.246Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:53.248Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:53.249Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:53.249Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:53.256Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:14:53.257Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:53.258Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:53.259Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:14:53.261Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-10T06:14:53.395Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:14:53.400Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:14:53.401Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:14:53.402Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:14:53.403Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:53.404Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:53.404Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:14:53.405Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:14:53.405Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:14:53.406Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:14:53.407Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:14:53.407Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:14:53.408Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:14:53.408Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:14:53.409Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:14:53.410Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:14:53.418Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:14:53.419Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:14:53.419Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:14:53.421Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:14:53.422Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-10T06:15:04.569Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:04.577Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:04.578Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:04.580Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:04.581Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:04.582Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:04.582Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:04.583Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:04.585Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:04.585Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:04.586Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:04.586Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:04.587Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:04.588Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:04.589Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:04.589Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:04.596Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:04.597Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:04.598Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:04.599Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:04.600Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-10T06:15:51.807Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:51.812Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:51.813Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:51.813Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:51.814Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:51.815Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:51.815Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:51.816Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:51.816Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:51.817Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:51.817Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:51.818Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:51.818Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:51.819Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:51.820Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:51.820Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:51.827Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T06:15:51.827Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1000}}
{"timestamp":"2025-07-10T06:15:51.828Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1000}}
{"timestamp":"2025-07-10T06:15:51.829Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T06:15:51.830Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-10T06:15:54.197Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:54.201Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:54.202Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:54.203Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:54.203Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:54.204Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:54.205Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:54.205Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:54.206Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:54.207Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:54.207Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:54.208Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:54.208Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:54.209Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:54.210Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:54.210Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:54.216Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:54.217Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:54.218Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:54.219Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:54.220Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":8}}
{"timestamp":"2025-07-10T06:15:57.029Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:57.034Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:57.034Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:57.035Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:57.036Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.036Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.037Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.038Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:57.039Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:57.039Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:57.040Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:57.041Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:57.042Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:57.042Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:57.043Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:57.043Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:57.050Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:57.051Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:57.052Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:57.053Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:57.055Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":9}}
{"timestamp":"2025-07-10T06:15:57.200Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:57.205Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:57.206Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:57.207Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:57.208Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.208Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.210Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.211Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:57.212Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:57.213Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:57.214Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:57.215Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:57.216Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:57.217Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:57.217Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:57.218Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:57.225Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:57.226Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:57.227Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:57.228Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:57.229Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":10}}
{"timestamp":"2025-07-10T06:15:57.535Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:57.540Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:57.542Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:57.543Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:57.544Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.544Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.545Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.546Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:57.547Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:57.547Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:57.548Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:57.549Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:57.549Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:57.550Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:57.551Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:57.551Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:57.559Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:57.560Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:57.561Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:57.562Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:57.564Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":11}}
{"timestamp":"2025-07-10T06:15:57.724Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:57.731Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:57.732Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:57.733Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:57.734Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.734Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.735Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.735Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:57.736Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:57.737Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:57.738Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:57.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:57.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:57.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:57.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:57.742Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:57.748Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:57.749Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:57.750Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:57.751Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:57.752Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":12}}
{"timestamp":"2025-07-10T06:15:57.896Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:57.901Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:57.902Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:57.902Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:57.903Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.904Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.904Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:57.905Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:57.906Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:57.907Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:57.908Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:57.909Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:57.909Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:57.910Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:57.911Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:57.911Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:57.918Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:57.919Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:57.920Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:57.922Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:57.923Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":13}}
{"timestamp":"2025-07-10T06:15:58.069Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:58.077Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:58.078Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:58.079Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:58.080Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:58.080Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:58.081Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:58.082Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:58.083Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:58.084Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:58.084Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:58.085Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:58.086Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:58.087Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:58.088Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:58.089Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:58.095Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:58.096Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:58.097Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:58.098Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:58.099Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":14}}
{"timestamp":"2025-07-10T06:15:58.227Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:15:58.234Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:15:58.235Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:15:58.236Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:15:58.237Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:58.237Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:58.238Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:15:58.239Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:15:58.240Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:15:58.241Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:15:58.241Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:15:58.242Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:15:58.243Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:15:58.244Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:15:58.244Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:15:58.245Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:15:58.255Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:15:58.256Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:15:58.257Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:15:58.259Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:15:58.261Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":15}}
{"timestamp":"2025-07-10T06:16:00.117Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:16:00.124Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:16:00.125Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:16:00.125Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:16:00.126Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:16:00.127Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:16:00.129Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:16:00.130Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:16:00.131Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:16:00.132Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:16:00.133Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:16:00.133Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:16:00.134Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:16:00.144Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:16:00.145Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:16:00.146Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:16:00.154Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"calculationMethod":"fixed","fixedPoints":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T06:16:00.155Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:16:00.156Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T06:16:00.157Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T06:16:00.158Z","level":"DEBUG","message":"Current balance before update","data":{"total":1000,"available":1000,"used":0,"transactionCount":16}}
{"timestamp":"2025-07-10T06:16:02.567Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:16:02.574Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:16:02.575Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:16:02.575Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:16:02.576Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:16:02.577Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:16:02.577Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:16:02.578Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:16:02.579Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:16:02.580Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:16:02.581Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:16:02.582Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:16:02.582Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:16:02.583Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:16:02.584Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:16:02.585Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:16:02.593Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:16:02.594Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:16:02.595Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":0}}
{"timestamp":"2025-07-10T06:16:02.597Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:16:02.598Z","level":"DEBUG","message":"Current balance before update","data":{"total":1150,"available":1150,"used":0,"transactionCount":17}}
{"timestamp":"2025-07-10T06:23:10.623Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:23:10.632Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:23:10.634Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:23:10.635Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:23:10.637Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:23:10.639Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:23:10.642Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:23:10.643Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:23:10.644Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:23:10.644Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:23:10.645Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:23:10.646Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:23:10.647Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:23:10.648Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:23:10.649Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:23:10.650Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:23:10.660Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:23:10.662Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:23:10.663Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":3,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":150}}
{"timestamp":"2025-07-10T06:23:10.664Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T06:23:10.666Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:23:10.667Z","level":"DEBUG","message":"Current balance before update","data":{"total":350,"available":350,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-10T06:23:10.699Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:23:10.700Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:23:10.700Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T06:23:10.702Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:23:10.703Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:24:15.956Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:24:15.963Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:24:15.965Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:24:15.966Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:24:15.967Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:24:15.968Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:24:15.969Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:24:15.970Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:24:15.971Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:24:15.972Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:24:15.972Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:24:15.975Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:24:15.976Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:24:15.977Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:24:15.977Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:24:15.978Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:24:15.988Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:24:15.991Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:24:15.992Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":3,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":150}}
{"timestamp":"2025-07-10T06:24:15.993Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T06:24:15.995Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:24:15.996Z","level":"DEBUG","message":"Current balance before update","data":{"total":500,"available":500,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-10T06:24:16.038Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:24:16.039Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:24:16.039Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T06:24:16.041Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:24:16.043Z","level":"DEBUG","message":"Current balance before update","data":{"total":75,"available":75,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:24:16.070Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:24:16.071Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"TW","baseAmount":15000,"discountedAmount":15000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:24:16.072Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:24:16.074Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:24:16.075Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"TW","baseAmount":15000,"discountedAmount":15000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:24:16.076Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:24:16.077Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":15000,"bonus":800,"description":"Basket threshold bonus"},"rule":"TW Premium Purchase Bonus"}}
{"timestamp":"2025-07-10T06:24:16.077Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"TW","baseAmount":15000,"discountedAmount":15000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:24:16.078Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":800}}
{"timestamp":"2025-07-10T06:24:16.079Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-10T06:24:16.080Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:24:16.109Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:24:16.110Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"TW","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:24:16.111Z","level":"DEBUG","message":"Redemption deduction calculation","data":{"redemptionPoints":0}}
{"timestamp":"2025-07-10T06:24:16.112Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":0}}
{"timestamp":"2025-07-10T06:24:16.112Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:24:16.113Z","level":"DEBUG","message":"Current balance before update","data":{"total":800,"available":800,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:26:05.868Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:26:05.877Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:26:05.878Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:26:05.879Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:26:05.880Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:26:05.881Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:26:05.881Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:26:05.882Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:26:05.883Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:26:05.883Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:26:05.884Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:26:05.884Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:26:05.886Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:26:05.886Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:26:05.887Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:26:05.887Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:26:05.898Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:26:05.899Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:26:05.900Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":3,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":150}}
{"timestamp":"2025-07-10T06:26:05.900Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T06:26:05.902Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:26:05.903Z","level":"DEBUG","message":"Current balance before update","data":{"total":650,"available":650,"used":0,"transactionCount":7}}
{"timestamp":"2025-07-10T06:26:05.934Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:26:05.935Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:26:05.936Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T06:26:05.937Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:26:05.938Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T06:26:05.966Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:26:05.967Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"TW","baseAmount":15000,"discountedAmount":15000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:26:05.968Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:26:05.969Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:26:05.970Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"TW","baseAmount":15000,"discountedAmount":15000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:26:05.971Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:26:05.972Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":15000,"bonus":800,"description":"Basket threshold bonus"},"rule":"TW Premium Purchase Bonus"}}
{"timestamp":"2025-07-10T06:26:05.973Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"TW","baseAmount":15000,"discountedAmount":15000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:26:05.973Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":800}}
{"timestamp":"2025-07-10T06:26:05.974Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-10T06:26:05.975Z","level":"DEBUG","message":"Current balance before update","data":{"total":800,"available":800,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T06:26:06.009Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"calculationMethod":"redemption","description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:26:06.010Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"TW","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:26:06.011Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-100}}
{"timestamp":"2025-07-10T06:26:06.011Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:26:06.012Z","level":"DEBUG","message":"Current balance before update","data":{"total":1600,"available":1600,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T06:26:06.040Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"calculationMethod":"adjustment","description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T06:26:06.041Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":100}}
{"timestamp":"2025-07-10T06:26:06.042Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":100}}
{"timestamp":"2025-07-10T06:26:06.043Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T06:26:06.044Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:30:13.423Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:13.435Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:13.440Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:13.441Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:13.442Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:13.443Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:13.444Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:13.446Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:13.447Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:13.448Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:13.449Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:13.450Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:13.450Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:13.451Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:13.452Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:13.452Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:13.465Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:30:13.466Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:13.468Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:30:13.469Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T06:30:13.471Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:13.471Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1650}}
{"timestamp":"2025-07-10T06:30:13.474Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:30:13.475Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:30:13.477Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:13.478Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T06:30:13.479Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:13.480Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:30:13.482Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:30:13.484Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:13.485Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T06:30:13.487Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":5,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:30:13.488Z","level":"DEBUG","message":"Current balance before update","data":{"total":10124863,"available":10041427,"used":83436,"transactionCount":359}}
{"timestamp":"2025-07-10T06:30:17.398Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:17.408Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:17.410Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:17.411Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:17.412Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:17.413Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:17.414Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:17.415Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:17.416Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:17.417Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:17.418Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:17.419Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:17.420Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:17.420Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:17.421Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:17.422Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:17.430Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:30:17.431Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":10,"discountedAmount":10,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:17.432Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:30:17.433Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T06:30:17.434Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":10,"discountedAmount":10,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:17.435Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":11}}
{"timestamp":"2025-07-10T06:30:17.436Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:30:17.436Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:30:17.437Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":10,"discountedAmount":10,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:17.438Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":20}}
{"timestamp":"2025-07-10T06:30:17.439Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":10,"discountedAmount":10,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:17.440Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:30:17.441Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:30:17.442Z","level":"DEBUG","message":"Current balance before update","data":{"total":10129863,"available":10046427,"used":83436,"transactionCount":360}}
{"timestamp":"2025-07-10T06:30:18.341Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:18.350Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:18.351Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:18.353Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:18.354Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:18.355Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:18.356Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:18.357Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:18.358Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:18.358Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:18.359Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:18.360Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:18.361Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:18.361Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:18.362Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:18.363Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:18.370Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:30:18.371Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":10,"discountedAmount":10,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:18.372Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:30:18.373Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T06:30:18.374Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":10,"discountedAmount":10,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:18.375Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":11}}
{"timestamp":"2025-07-10T06:30:18.377Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:30:18.378Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:30:18.378Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":10,"discountedAmount":10,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:18.379Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":20}}
{"timestamp":"2025-07-10T06:30:18.380Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":10,"discountedAmount":10,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:18.380Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:30:18.381Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:30:18.382Z","level":"DEBUG","message":"Current balance before update","data":{"total":10129894,"available":10046458,"used":83436,"transactionCount":361}}
{"timestamp":"2025-07-10T06:30:21.981Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:21.990Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:21.992Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:21.992Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:21.993Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:21.994Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:21.994Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:21.995Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:21.996Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:21.997Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:21.998Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:21.999Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:22.000Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:22.000Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:22.001Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:22.001Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:22.010Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T06:30:22.011Z","level":"DEBUG","message":"Current balance before update","data":{"total":10129925,"available":10046489,"used":83436,"transactionCount":362}}
{"timestamp":"2025-07-10T06:30:23.832Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:23.842Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:23.843Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:23.845Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:23.846Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:23.847Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:23.847Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:23.849Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:23.850Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:23.851Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:23.852Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:23.853Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:23.854Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:23.855Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:23.856Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:23.857Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:23.865Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"calculationMethod":"fixed","fixedPoints":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T06:30:23.866Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:23.866Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T06:30:23.868Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T06:30:23.868Z","level":"DEBUG","message":"Current balance before update","data":{"total":680768,"available":668669,"used":12099,"transactionCount":74}}
{"timestamp":"2025-07-10T06:30:29.581Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:29.585Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:29.586Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:29.587Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:29.587Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:29.588Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:29.588Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:29.589Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:29.590Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:29.590Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:29.591Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:29.592Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:29.592Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:29.593Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:29.594Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:29.594Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:29.601Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:30:29.601Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:29.602Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":3,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":150}}
{"timestamp":"2025-07-10T06:30:29.602Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T06:30:29.604Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:30:29.605Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:30:33.295Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:33.300Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:33.301Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:33.302Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:33.303Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:33.304Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:33.305Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:33.307Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:33.308Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:33.309Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:33.309Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:33.310Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:33.311Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:33.312Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:33.313Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:33.314Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:33.321Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:30:33.322Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:33.323Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":5,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":250}}
{"timestamp":"2025-07-10T06:30:33.324Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":250}}
{"timestamp":"2025-07-10T06:30:33.326Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:30:33.328Z","level":"DEBUG","message":"Current balance before update","data":{"total":150,"available":150,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:30:37.026Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:37.035Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:37.037Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:37.039Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:37.040Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:37.041Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:37.042Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:37.043Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:37.044Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:37.045Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:37.046Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:37.047Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:37.048Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:37.048Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:37.049Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:37.050Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:37.057Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:30:37.058Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:37.059Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T06:30:37.060Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:30:37.061Z","level":"DEBUG","message":"Current balance before update","data":{"total":400,"available":400,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T06:30:37.812Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:37.821Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:37.822Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:37.823Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:37.825Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:37.825Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:37.826Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:37.827Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:37.827Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:37.828Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:37.829Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:37.830Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:37.831Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:37.832Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:37.832Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:37.833Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:37.841Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:30:37.841Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:37.842Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T06:30:37.843Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:30:37.844Z","level":"DEBUG","message":"Current balance before update","data":{"total":475,"available":475,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T06:30:42.194Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:42.204Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:42.206Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:42.207Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:42.208Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:42.209Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:42.210Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:42.212Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:42.213Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:42.213Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:42.214Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:42.215Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:42.216Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:42.217Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:42.217Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:42.218Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:42.228Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"calculationMethod":"adjustment","description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T06:30:42.229Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":12}}
{"timestamp":"2025-07-10T06:30:42.230Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":12}}
{"timestamp":"2025-07-10T06:30:42.231Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T06:30:42.232Z","level":"DEBUG","message":"Current balance before update","data":{"total":550,"available":550,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-10T06:30:44.951Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:30:44.956Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:30:44.957Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:30:44.958Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:30:44.958Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:44.959Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:44.960Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:30:44.960Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:30:44.961Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:30:44.961Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:30:44.962Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:30:44.962Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:30:44.963Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:30:44.963Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:30:44.964Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:30:44.964Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:30:44.971Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"calculationMethod":"redemption","description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:30:44.972Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:30:44.973Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T06:30:44.974Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:30:44.975Z","level":"DEBUG","message":"Current balance before update","data":{"total":562,"available":562,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-10T06:44:36.079Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:44:36.086Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:44:36.088Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:44:36.089Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:44:36.090Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:44:36.091Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:44:36.091Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:44:36.092Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:44:36.093Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:44:36.093Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:44:36.094Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:44:36.096Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:44:36.096Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:44:36.097Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:44:36.097Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:44:36.098Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:44:36.107Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:44:36.108Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:36.109Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:44:36.110Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T06:44:36.111Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:36.112Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1650}}
{"timestamp":"2025-07-10T06:44:36.113Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:44:36.113Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:44:36.114Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:36.115Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T06:44:36.115Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:36.116Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:44:36.117Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:44:36.119Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:36.120Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T06:44:36.121Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":5,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:44:36.123Z","level":"DEBUG","message":"Current balance before update","data":{"total":10129925,"available":10046489,"used":83436,"transactionCount":363}}
{"timestamp":"2025-07-10T06:44:42.155Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:44:42.160Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:44:42.161Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:44:42.161Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:44:42.162Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:44:42.163Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:44:42.164Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:44:42.165Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:44:42.166Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:44:42.167Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:44:42.167Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:44:42.168Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:44:42.169Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:44:42.170Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:44:42.171Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:44:42.172Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:44:42.179Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:44:42.180Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":200,"discountedAmount":200,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:42.181Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:44:42.182Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T06:44:42.183Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":200,"discountedAmount":200,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:42.184Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":220}}
{"timestamp":"2025-07-10T06:44:42.185Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:44:42.186Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:44:42.187Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":200,"discountedAmount":200,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:42.188Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":400}}
{"timestamp":"2025-07-10T06:44:42.188Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":200,"discountedAmount":200,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:44:42.189Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:44:42.190Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:44:42.191Z","level":"DEBUG","message":"Current balance before update","data":{"total":10134925,"available":10051489,"used":83436,"transactionCount":364}}
{"timestamp":"2025-07-10T06:45:02.855Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:45:02.861Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:45:02.862Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:45:02.863Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:45:02.864Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:45:02.865Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:45:02.866Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:45:02.867Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:45:02.867Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:45:02.869Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:45:02.870Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:45:02.871Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:45:02.872Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:45:02.873Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:45:02.873Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:45:02.874Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:45:02.881Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:45:02.883Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":123,"discountedAmount":123,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:45:02.885Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":12}}
{"timestamp":"2025-07-10T06:45:02.886Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:45:02.887Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":123,"discountedAmount":123,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:45:02.888Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":185}}
{"timestamp":"2025-07-10T06:45:02.889Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:45:02.889Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"JP","baseAmount":123,"discountedAmount":123,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:45:02.890Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":246}}
{"timestamp":"2025-07-10T06:45:02.891Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_VIP_MULTIPLIER"]}}
{"timestamp":"2025-07-10T06:45:02.893Z","level":"DEBUG","message":"Current balance before update","data":{"total":680918,"available":668819,"used":12099,"transactionCount":75}}
{"timestamp":"2025-07-10T06:45:14.699Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:45:14.706Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:45:14.707Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:45:14.708Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:45:14.709Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:45:14.709Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:45:14.710Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:45:14.711Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:45:14.712Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:45:14.714Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:45:14.716Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:45:14.717Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:45:14.718Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:45:14.719Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:45:14.720Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:45:14.721Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:45:14.730Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:45:14.731Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":1540,"discountedAmount":1540,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:45:14.733Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":154}}
{"timestamp":"2025-07-10T06:45:14.735Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:45:14.735Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":1540,"discountedAmount":1540,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:45:14.737Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":2310}}
{"timestamp":"2025-07-10T06:45:14.738Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:45:14.739Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"JP","baseAmount":1540,"discountedAmount":1540,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:45:14.740Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3080}}
{"timestamp":"2025-07-10T06:45:14.741Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_VIP_MULTIPLIER"]}}
{"timestamp":"2025-07-10T06:45:14.743Z","level":"DEBUG","message":"Current balance before update","data":{"total":681361,"available":669262,"used":12099,"transactionCount":76}}
{"timestamp":"2025-07-10T06:53:06.665Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:53:06.672Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:53:06.674Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:53:06.675Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:53:06.675Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:06.676Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:06.677Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:06.677Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:53:06.678Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:53:06.679Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:53:06.680Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:53:06.680Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:53:06.681Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:53:06.681Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:53:06.682Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:53:06.683Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:53:06.693Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:53:06.694Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:06.695Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:53:06.697Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T06:53:06.698Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:06.699Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1650}}
{"timestamp":"2025-07-10T06:53:06.700Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:53:06.701Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:53:06.702Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:06.702Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T06:53:06.703Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:06.704Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:53:06.705Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T06:53:06.706Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:06.707Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T06:53:06.708Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":5,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T06:53:06.709Z","level":"DEBUG","message":"Current balance before update","data":{"total":10135545,"available":10052109,"used":83436,"transactionCount":365}}
{"timestamp":"2025-07-10T06:53:13.627Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:53:13.632Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:53:13.634Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:53:13.634Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:53:13.635Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:13.636Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:13.636Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:13.637Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:53:13.638Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:53:13.639Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:53:13.639Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:53:13.640Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:53:13.640Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:53:13.641Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:53:13.642Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:53:13.643Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:53:13.651Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:53:13.652Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:13.653Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:53:13.654Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:53:13.655Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:13.656Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:53:13.658Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:53:13.659Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:53:16.129Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:53:16.137Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:53:16.140Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:53:16.141Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:53:16.142Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:16.144Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:16.145Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:16.145Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:53:16.147Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:53:16.147Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:53:16.148Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:53:16.149Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:53:16.149Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:53:16.150Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:53:16.151Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:53:16.152Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:53:16.161Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:53:16.162Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:16.163Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:53:16.164Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:53:16.165Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":12,"discountedAmount":12,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:16.166Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:53:16.167Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:53:16.169Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:53:29.394Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:53:29.402Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:53:29.404Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:53:29.405Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:53:29.406Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:29.407Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:29.407Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:29.408Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:53:29.408Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:53:29.409Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:53:29.410Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:53:29.411Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:53:29.412Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:53:29.412Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:53:29.413Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:53:29.413Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:53:29.424Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:53:29.425Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":123,"discountedAmount":123,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:29.427Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":12}}
{"timestamp":"2025-07-10T06:53:29.429Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:53:29.430Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":123,"discountedAmount":123,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:29.431Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":185}}
{"timestamp":"2025-07-10T06:53:29.432Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-10T06:53:29.434Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T06:53:34.095Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:53:34.100Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:53:34.101Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:53:34.102Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:53:34.103Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:34.104Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:34.105Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:53:34.106Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:53:34.107Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:53:34.108Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:53:34.108Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:53:34.109Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:53:34.110Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:53:34.111Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:53:34.112Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:53:34.113Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:53:34.121Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:53:34.122Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":10,"discountedAmount":10,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:34.123Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-10T06:53:34.124Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:53:34.126Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":10,"discountedAmount":10,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:53:34.127Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":15}}
{"timestamp":"2025-07-10T06:53:34.128Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-10T06:53:34.129Z","level":"DEBUG","message":"Current balance before update","data":{"total":197,"available":197,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T06:54:05.464Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:54:05.470Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:54:05.471Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:54:05.471Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:54:05.472Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:05.473Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:05.475Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:05.476Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:54:05.477Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:54:05.477Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:54:05.478Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:54:05.479Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:54:05.480Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:54:05.481Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:54:05.482Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:54:05.483Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:54:05.490Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:54:05.491Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":12345,"discountedAmount":12345,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:05.492Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:54:05.494Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:54:05.496Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-10T06:54:05.498Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":12345,"discountedAmount":12345,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:05.499Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:54:05.500Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":12345,"discountedAmount":12345,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:05.501Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:54:05.502Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus "},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-10T06:54:05.503Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":12345,"discountedAmount":12345,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:05.504Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-10T06:54:05.505Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-10T06:54:05.506Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:54:11.292Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:54:11.299Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:54:11.301Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:54:11.302Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:54:11.303Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:11.304Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:11.305Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:11.306Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:54:11.306Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:54:11.307Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:54:11.308Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:54:11.309Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:54:11.310Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:54:11.311Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:54:11.313Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:54:11.314Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:54:11.322Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:54:11.323Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":12345,"discountedAmount":12345,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:11.324Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:54:11.325Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:54:11.327Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"description":"Basket threshold bonus","all":[{"fact":"eventType","operator":"equal","value":"PURCHASE"},{"fact":"market","operator":"equal","value":"HK"},{"fact":"attributes.amount","operator":"greaterThanInclusive","value":5000}]},"rule":"HK High Value Purchase Bonus"}}
{"timestamp":"2025-07-10T06:54:11.329Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":12345,"discountedAmount":12345,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:11.330Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:54:11.331Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":12345,"discountedAmount":12345,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:11.332Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":0}}
{"timestamp":"2025-07-10T06:54:11.333Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":10000,"bonus":500,"description":"Basket threshold bonus "},"rule":"HK Premium Purchase Bonus"}}
{"timestamp":"2025-07-10T06:54:11.334Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"HK","baseAmount":12345,"discountedAmount":12345,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:11.334Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":500}}
{"timestamp":"2025-07-10T06:54:11.335Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-10T06:54:11.337Z","level":"DEBUG","message":"Current balance before update","data":{"total":500,"available":500,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:54:25.594Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:54:25.600Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:54:25.601Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:54:25.602Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:54:25.602Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:25.603Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:25.603Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:25.604Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:54:25.606Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:54:25.606Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:54:25.607Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:54:25.607Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:54:25.608Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:54:25.609Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:54:25.610Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:54:25.611Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:54:25.617Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:54:25.619Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":1220,"discountedAmount":1220,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:25.620Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":122}}
{"timestamp":"2025-07-10T06:54:25.621Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:54:25.622Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":1220,"discountedAmount":1220,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:25.623Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":1830}}
{"timestamp":"2025-07-10T06:54:25.624Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T06:54:25.625Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"JP","baseAmount":1220,"discountedAmount":1220,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:25.626Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":2440}}
{"timestamp":"2025-07-10T06:54:25.626Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_VIP_MULTIPLIER"]}}
{"timestamp":"2025-07-10T06:54:25.627Z","level":"DEBUG","message":"Current balance before update","data":{"total":686905,"available":674806,"used":12099,"transactionCount":77}}
{"timestamp":"2025-07-10T06:54:40.492Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:54:40.500Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:54:40.501Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:54:40.503Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:54:40.503Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:40.504Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:40.505Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:40.506Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:54:40.506Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:54:40.508Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:54:40.509Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:54:40.510Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:54:40.511Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:54:40.512Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:54:40.513Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:54:40.514Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:54:40.520Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:54:40.521Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":1220,"discountedAmount":1220,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:40.522Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":122}}
{"timestamp":"2025-07-10T06:54:40.522Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:54:40.523Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":1220,"discountedAmount":1220,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:40.524Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":1830}}
{"timestamp":"2025-07-10T06:54:40.526Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-10T06:54:40.527Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:54:51.523Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:54:51.530Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:54:51.531Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:54:51.531Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:54:51.532Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:51.532Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:51.533Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:51.534Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:54:51.534Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:54:51.535Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:54:51.535Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:54:51.536Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:54:51.537Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:54:51.538Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:54:51.539Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:54:51.540Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:54:51.550Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_REGISTRY_POINT","params":{"calculationMethod":"fixed","fixedPoints":150,"description":"JP registration bonus"},"rule":"JP Registration Bonus"}}
{"timestamp":"2025-07-10T06:54:51.551Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_REGISTRY_POINT","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:51.552Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T06:54:51.553Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_REGISTRY_POINT"]}}
{"timestamp":"2025-07-10T06:54:51.555Z","level":"DEBUG","message":"Current balance before update","data":{"total":1952,"available":1952,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T06:54:54.286Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:54:54.293Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:54:54.294Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:54:54.295Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:54:54.296Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:54.296Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:54.297Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:54.298Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:54:54.298Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:54:54.299Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:54:54.300Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:54:54.301Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:54:54.302Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:54:54.302Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:54:54.303Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:54:54.303Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:54:54.312Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:54:54.313Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:54.313Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":3,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":150}}
{"timestamp":"2025-07-10T06:54:54.314Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T06:54:54.316Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:54:54.317Z","level":"DEBUG","message":"Current balance before update","data":{"total":2102,"available":2102,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T06:54:57.427Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:54:57.431Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:54:57.432Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:54:57.433Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:54:57.434Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:57.435Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:57.435Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:54:57.436Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:54:57.438Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:54:57.438Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:54:57.439Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:54:57.440Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:54:57.440Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:54:57.441Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:54:57.441Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:54:57.442Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:54:57.448Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T06:54:57.449Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:54:57.450Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":2,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":100}}
{"timestamp":"2025-07-10T06:54:57.450Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":100}}
{"timestamp":"2025-07-10T06:54:57.453Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T06:54:57.454Z","level":"DEBUG","message":"Current balance before update","data":{"total":2252,"available":2252,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T06:55:00.764Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:55:00.769Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:55:00.770Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:55:00.771Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:55:00.771Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:00.772Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:00.773Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:00.774Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:55:00.774Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:55:00.775Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:55:00.776Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:55:00.776Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:55:00.777Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:55:00.777Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:55:00.778Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:55:00.779Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:55:00.786Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T06:55:00.787Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:55:00.788Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T06:55:00.790Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T06:55:00.791Z","level":"DEBUG","message":"Current balance before update","data":{"total":2352,"available":2352,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-10T06:55:04.439Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:55:04.445Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:55:04.446Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:55:04.447Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:55:04.448Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:04.449Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:04.450Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:04.451Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:55:04.451Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:55:04.452Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:55:04.453Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:55:04.454Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:55:04.454Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:55:04.455Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:55:04.456Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:55:04.456Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:55:04.465Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"calculationMethod":"adjustment","description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T06:55:04.466Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":1111}}
{"timestamp":"2025-07-10T06:55:04.467Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":1111}}
{"timestamp":"2025-07-10T06:55:04.468Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T06:55:04.470Z","level":"DEBUG","message":"Current balance before update","data":{"total":2427,"available":2427,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-10T06:55:08.057Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:55:08.063Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:55:08.064Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:55:08.064Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:55:08.065Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:08.066Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:08.066Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:55:08.068Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:55:08.069Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:55:08.070Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:55:08.071Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:55:08.072Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:55:08.073Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:55:08.073Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:55:08.074Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:55:08.075Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:55:08.081Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"calculationMethod":"redemption","description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T06:55:08.082Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"JP","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:55:08.083Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T06:55:08.084Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T06:55:08.086Z","level":"DEBUG","message":"Current balance before update","data":{"total":3538,"available":3538,"used":0,"transactionCount":6}}
{"timestamp":"2025-07-10T06:58:59.779Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:58:59.793Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:58:59.795Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:58:59.797Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:58:59.798Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:58:59.800Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:58:59.802Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:58:59.803Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:58:59.804Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:58:59.805Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:58:59.807Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:58:59.808Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:58:59.808Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:58:59.809Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:58:59.810Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:58:59.811Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:58:59.823Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T06:58:59.825Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":10000,"discountedAmount":10000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:58:59.826Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1000}}
{"timestamp":"2025-07-10T06:58:59.828Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"calculationMethod":"multiplier","multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T06:58:59.829Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":10000,"discountedAmount":10000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:58:59.831Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":500}}
{"timestamp":"2025-07-10T06:58:59.832Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT"]}}
{"timestamp":"2025-07-10T06:58:59.834Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:58:59.872Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:58:59.874Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1000,"discountedAmount":1000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:58:59.875Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1000}}
{"timestamp":"2025-07-10T06:58:59.876Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:58:59.877Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1000,"discountedAmount":1000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:58:59.878Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:58:59.879Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:58:59.881Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:58:59.913Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:58:59.914Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"TW","baseAmount":2000,"discountedAmount":2000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:58:59.916Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":2000}}
{"timestamp":"2025-07-10T06:58:59.916Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:58:59.917Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"TW","baseAmount":2000,"discountedAmount":2000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:58:59.919Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:58:59.919Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:58:59.920Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T06:59:53.378Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T06:59:53.390Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T06:59:53.392Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T06:59:53.394Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T06:59:53.395Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T06:59:53.397Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:59:53.399Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T06:59:53.400Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T06:59:53.402Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T06:59:53.403Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T06:59:53.405Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T06:59:53.407Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T06:59:53.408Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T06:59:53.409Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T06:59:53.410Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T06:59:53.411Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T06:59:53.418Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T06:59:53.419Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":123,"discountedAmount":123,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:59:53.420Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":123}}
{"timestamp":"2025-07-10T06:59:53.420Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T06:59:53.422Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":123,"discountedAmount":123,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T06:59:53.423Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T06:59:53.424Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T06:59:53.425Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T07:00:32.521Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:00:32.532Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:00:32.534Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:00:32.535Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:00:32.537Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:32.538Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:32.539Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:32.541Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:00:32.542Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:00:32.543Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:00:32.545Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:00:32.546Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:00:32.547Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:00:32.548Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:00:32.549Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:00:32.551Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:00:32.562Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:00:32.564Z","level":"DEBUG","message":"Current balance before update","data":{"total":123,"available":123,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T07:00:36.849Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:00:36.861Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:00:36.864Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:00:36.865Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:00:36.866Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:36.867Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:36.868Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:36.869Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:00:36.871Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:00:36.872Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:00:36.873Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:00:36.874Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:00:36.875Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:00:36.877Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:00:36.878Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:00:36.879Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:00:36.888Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T07:00:36.889Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":3,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:00:36.891Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":3,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":150}}
{"timestamp":"2025-07-10T07:00:36.893Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":150}}
{"timestamp":"2025-07-10T07:00:36.894Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T07:00:36.896Z","level":"DEBUG","message":"Current balance before update","data":{"total":123,"available":123,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T07:00:38.849Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:00:38.859Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:00:38.862Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:00:38.863Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:00:38.864Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:38.865Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:38.866Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:38.867Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:00:38.868Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:00:38.869Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:00:38.870Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:00:38.871Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:00:38.872Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:00:38.873Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:00:38.874Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:00:38.875Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:00:38.885Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T07:00:38.886Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:00:38.887Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T07:00:38.889Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T07:00:38.891Z","level":"DEBUG","message":"Current balance before update","data":{"total":273,"available":273,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T07:00:43.409Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:00:43.420Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:00:43.422Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:00:43.423Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:00:43.424Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:43.425Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:43.427Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:00:43.428Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:00:43.429Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:00:43.430Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:00:43.431Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:00:43.432Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:00:43.433Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:00:43.434Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:00:43.435Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:00:43.436Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:00:43.450Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"calculationMethod":"adjustment","description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T07:00:43.451Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":11}}
{"timestamp":"2025-07-10T07:00:43.452Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":11}}
{"timestamp":"2025-07-10T07:00:43.453Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T07:00:43.455Z","level":"DEBUG","message":"Current balance before update","data":{"total":348,"available":348,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-10T07:01:51.247Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:01:51.257Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:01:51.259Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:01:51.260Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:01:51.261Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:01:51.262Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:01:51.263Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:01:51.264Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:01:51.265Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:01:51.266Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:01:51.267Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:01:51.268Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:01:51.270Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:01:51.271Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:01:51.272Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:01:51.273Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:01:51.282Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","conversionRate":0.1,"description":"JP base purchase - 1 MD per 10 JPY"},"rule":"JP Base Purchase Points"}}
{"timestamp":"2025-07-10T07:01:51.283Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:01:51.283Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":15000}}
{"timestamp":"2025-07-10T07:01:51.284Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","params":{"calculationMethod":"multiplier","multiplier":1.5,"description":"JP campaign multiplier - 1.5x during campaigns"},"rule":"JP Campaign Multiplier"}}
{"timestamp":"2025-07-10T07:01:51.285Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:01:51.285Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":7500}}
{"timestamp":"2025-07-10T07:01:51.287Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T07:01:51.287Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"JP","baseAmount":150000,"discountedAmount":150000,"itemCount":12,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:01:51.289Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":300000}}
{"timestamp":"2025-07-10T07:01:51.290Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_VIP_MULTIPLIER"]}}
{"timestamp":"2025-07-10T07:01:51.291Z","level":"DEBUG","message":"Current balance before update","data":{"total":691297,"available":679198,"used":12099,"transactionCount":78}}
{"timestamp":"2025-07-10T07:02:27.389Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:02:27.396Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:02:27.398Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:02:27.398Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:02:27.400Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:02:27.401Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:02:27.401Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:02:27.402Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:02:27.403Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:02:27.403Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:02:27.404Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:02:27.405Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:02:27.406Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:02:27.406Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:02:27.407Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:02:27.407Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:02:27.418Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:02:27.419Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1000,"discountedAmount":1000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:02:27.420Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1000}}
{"timestamp":"2025-07-10T07:02:27.422Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:02:27.423Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1000,"discountedAmount":1000,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:02:27.424Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:02:27.425Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T07:02:27.427Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T07:04:05.671Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:04:05.678Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:04:05.680Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:04:05.681Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:04:05.682Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:04:05.683Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:04:05.683Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:04:05.684Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:04:05.684Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:04:05.685Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:04:05.685Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:04:05.686Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:04:05.687Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:04:05.687Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:04:05.688Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:04:05.689Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:04:05.698Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:04:05.701Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":2800,"discountedAmount":2800,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:04:05.702Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":2800}}
{"timestamp":"2025-07-10T07:04:05.704Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:04:05.705Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":2800,"discountedAmount":2800,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:04:05.706Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:04:05.707Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":2,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS"]}}
{"timestamp":"2025-07-10T07:04:05.709Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T07:04:05.742Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","params":{"pointsPerBottle":50,"maxPerYear":5,"description":"Bottle recycling - 50 MD per bottle, max 5/year"},"rule":"Bottle Recycling Reward"}}
{"timestamp":"2025-07-10T07:04:05.742Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":2,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:04:05.743Z","level":"DEBUG","message":"Recycling reward calculation","data":{"totalBottles":2,"pointsPerBottle":50,"maxPerYear":5,"earnedPoints":100}}
{"timestamp":"2025-07-10T07:04:05.744Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","rewardPoints":100}}
{"timestamp":"2025-07-10T07:04:05.745Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"]}}
{"timestamp":"2025-07-10T07:04:05.746Z","level":"DEBUG","message":"Current balance before update","data":{"total":3100,"available":3100,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T07:04:05.774Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"CONSULTATION_BONUS","params":{"consultationBonus":75,"description":"Skin consultation completion"},"rule":"Skin Consultation Bonus"}}
{"timestamp":"2025-07-10T07:04:05.775Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"CONSULTATION_BONUS","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:04:05.776Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T07:04:05.777Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["CONSULTATION_BONUS"]}}
{"timestamp":"2025-07-10T07:04:05.778Z","level":"DEBUG","message":"Current balance before update","data":{"total":3200,"available":3200,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T07:04:05.806Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","params":{"calculationMethod":"adjustment","description":"Manual adjustment by admin"},"rule":"Manual Admin Adjustment"}}
{"timestamp":"2025-07-10T07:04:05.807Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":150}}
{"timestamp":"2025-07-10T07:04:05.808Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":150}}
{"timestamp":"2025-07-10T07:04:05.809Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["INTERACTION_ADJUST_POINT_BY_MANAGER"]}}
{"timestamp":"2025-07-10T07:04:05.810Z","level":"DEBUG","message":"Current balance before update","data":{"total":3275,"available":3275,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T07:04:05.838Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"REDEMPTION_DEDUCTION","params":{"calculationMethod":"redemption","description":"Points redeemed for rewards"},"rule":"Point Redemption - All Markets"}}
{"timestamp":"2025-07-10T07:04:05.838Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"REDEMPTION_DEDUCTION","market":"HK","baseAmount":0,"discountedAmount":0,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:04:05.839Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-200}}
{"timestamp":"2025-07-10T07:04:05.840Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":1,"eventTypes":["REDEMPTION_DEDUCTION"]}}
{"timestamp":"2025-07-10T07:04:05.841Z","level":"DEBUG","message":"Current balance before update","data":{"total":3425,"available":3425,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-10T07:15:21.224Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:15:21.232Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:15:21.233Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:15:21.233Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:15:21.234Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:21.235Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:21.236Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:21.237Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:15:21.237Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:15:21.238Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:15:21.239Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:15:21.239Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:15:21.240Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:15:21.240Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:15:21.241Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:15:21.242Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:15:21.250Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:15:21.252Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:21.253Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:15:21.255Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T07:15:21.256Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:21.256Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1650}}
{"timestamp":"2025-07-10T07:15:21.257Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T07:15:21.258Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:15:21.259Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:21.259Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T07:15:21.260Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:21.261Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T07:15:21.261Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T07:15:21.262Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:21.263Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:15:21.263Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":5,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T07:15:21.264Z","level":"DEBUG","message":"Current balance before update","data":{"total":10140545,"available":10057109,"used":83436,"transactionCount":366}}
{"timestamp":"2025-07-10T07:15:34.364Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:15:34.371Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:15:34.372Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:15:34.373Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:15:34.374Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:34.375Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:34.375Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:34.376Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:15:34.377Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:15:34.378Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:15:34.379Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:15:34.379Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:15:34.380Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:15:34.381Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:15:34.382Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:15:34.383Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:15:34.390Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:15:34.391Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:34.392Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":45000}}
{"timestamp":"2025-07-10T07:15:34.393Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T07:15:34.393Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:15:34.394Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:34.395Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":90000}}
{"timestamp":"2025-07-10T07:15:34.396Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:34.397Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T07:15:34.399Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","params":{"threshold":15000,"bonus":800,"description":"Basket threshold bonus"},"rule":"TW Premium Purchase Bonus"}}
{"timestamp":"2025-07-10T07:15:34.399Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","market":"TW","baseAmount":45000,"discountedAmount":45000,"itemCount":5,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:34.400Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_BASKET_AMOUNT","rewardPoints":800}}
{"timestamp":"2025-07-10T07:15:34.401Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":4,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","FLEXIBLE_BASKET_AMOUNT"]}}
{"timestamp":"2025-07-10T07:15:34.403Z","level":"DEBUG","message":"Current balance before update","data":{"total":135075,"available":134575,"used":500,"transactionCount":26}}
{"timestamp":"2025-07-10T07:15:41.446Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:15:41.451Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:15:41.452Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:15:41.453Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:15:41.454Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:41.454Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:41.455Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:41.456Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:15:41.456Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:15:41.457Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:15:41.458Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:15:41.459Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:15:41.459Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:15:41.460Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:15:41.461Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:15:41.462Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:15:41.469Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:15:41.470Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:41.471Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:15:41.472Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","params":{"multiplier":1.1,"description":"Birth month bonus - 1.1x multiplier"},"rule":"Birth Month Purchase Bonus"}}
{"timestamp":"2025-07-10T07:15:41.473Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:41.474Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FIRST_PURCHASE_BIRTH_MONTH_BONUS","rewardPoints":1650}}
{"timestamp":"2025-07-10T07:15:41.476Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","params":{"multiplier":2,"description":"VIP status multiplier - 2x points"},"rule":"VIP Status Multiplier"}}
{"timestamp":"2025-07-10T07:15:41.476Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:15:41.477Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:41.478Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T07:15:41.479Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:41.479Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T07:15:41.480Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T07:15:41.481Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":8,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:41.481Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:15:41.482Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":5,"eventTypes":["ORDER_BASE_POINT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T07:15:41.484Z","level":"DEBUG","message":"Current balance before update","data":{"total":10147045,"available":10063609,"used":83436,"transactionCount":367}}
{"timestamp":"2025-07-10T07:15:59.377Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:15:59.382Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:15:59.383Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:15:59.384Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:15:59.385Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:59.386Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:59.386Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:15:59.387Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:15:59.387Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:15:59.388Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:15:59.389Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:15:59.390Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:15:59.390Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:15:59.391Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:15:59.392Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:15:59.392Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:15:59.398Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:15:59.400Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:59.400Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:15:59.402Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:15:59.403Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:59.404Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T07:15:59.405Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T07:15:59.406Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:15:59.407Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:15:59.408Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T07:15:59.409Z","level":"DEBUG","message":"Current balance before update","data":{"total":0,"available":0,"used":0,"version":1}}
{"timestamp":"2025-07-10T07:18:19.044Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:18:19.053Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:18:19.055Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:18:19.056Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:18:19.056Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:19.057Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:19.058Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:19.058Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:18:19.059Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:18:19.059Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:18:19.060Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:18:19.061Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:18:19.061Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:18:19.062Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:18:19.063Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:18:19.064Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:18:37.370Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:18:37.377Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:18:37.378Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:18:37.378Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:18:37.379Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:37.379Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:37.380Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:37.381Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:18:37.381Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:18:37.382Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:18:37.383Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:18:37.384Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:18:37.385Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:18:37.386Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:18:37.387Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:18:37.388Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:18:37.394Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:18:37.395Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:18:37.396Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:18:37.398Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:18:37.398Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:18:37.399Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T07:18:37.400Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T07:18:37.400Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:18:37.401Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:18:37.402Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T07:18:37.403Z","level":"DEBUG","message":"Current balance before update","data":{"total":1850,"available":1850,"used":0,"transactionCount":1}}
{"timestamp":"2025-07-10T07:18:37.729Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:18:37.733Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:18:37.734Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:18:37.735Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:18:37.736Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:37.736Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:37.737Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:18:37.737Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:18:37.738Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:18:37.738Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:18:37.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:18:37.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:18:37.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:18:37.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:18:37.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:18:37.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:18:37.748Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:18:37.749Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:18:37.750Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:18:37.751Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:18:37.751Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:18:37.753Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T07:18:37.754Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T07:18:37.755Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:18:37.756Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:18:37.757Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T07:18:37.758Z","level":"DEBUG","message":"Current balance before update","data":{"total":3700,"available":3700,"used":0,"transactionCount":2}}
{"timestamp":"2025-07-10T07:20:36.504Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:20:36.514Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:20:36.515Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:20:36.516Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:20:36.517Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:20:36.517Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:20:36.518Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:20:36.519Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:20:36.519Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:20:36.520Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:20:36.520Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:20:36.521Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:20:36.521Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:20:36.522Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:20:36.523Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:20:36.523Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:20:55.121Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:20:55.130Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:20:55.132Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:20:55.132Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:20:55.133Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:20:55.134Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:20:55.134Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:20:55.135Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:20:55.135Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:20:55.136Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:20:55.137Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:20:55.137Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:20:55.138Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:20:55.139Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:20:55.139Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:20:55.140Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:21:53.018Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:21:53.027Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:21:53.028Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:21:53.029Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:21:53.030Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:21:53.030Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:21:53.031Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:21:53.032Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:21:53.032Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:21:53.033Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:21:53.034Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:21:53.035Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:21:53.035Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:21:53.036Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:21:53.036Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:21:53.037Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:22:38.000Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:22:38.010Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:22:38.013Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:22:38.014Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:22:38.015Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:22:38.016Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:22:38.016Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:22:38.017Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:22:38.018Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:22:38.018Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:22:38.019Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:22:38.020Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:22:38.021Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:22:38.022Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:22:38.023Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:22:38.023Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:22:38.031Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:22:38.033Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1000}}
{"timestamp":"2025-07-10T07:22:38.037Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:22:38.038Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:22:58.055Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:22:58.061Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:22:58.062Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:22:58.063Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:22:58.064Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:22:58.064Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:22:58.065Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:22:58.066Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:22:58.066Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:22:58.067Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:22:58.067Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:22:58.068Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:22:58.069Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:22:58.069Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:22:58.070Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:22:58.071Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:22:58.077Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:22:58.078Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:22:58.079Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:22:58.080Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:22:58.081Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:22:58.082Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T07:22:58.083Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T07:22:58.084Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:22:58.085Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:22:58.085Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T07:22:58.086Z","level":"DEBUG","message":"Current balance before update","data":{"total":5550,"available":5550,"used":0,"transactionCount":3}}
{"timestamp":"2025-07-10T07:24:22.561Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:24:22.569Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:24:22.571Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:24:22.571Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:24:22.572Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:24:22.573Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:24:22.574Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:24:22.575Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:24:22.576Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:24:22.577Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:24:22.578Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:24:22.578Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:24:22.580Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:24:22.580Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:24:22.581Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:24:22.582Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:24:22.591Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:24:22.593Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1000}}
{"timestamp":"2025-07-10T07:24:22.597Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:24:22.598Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:24:41.199Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:24:41.209Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:24:41.211Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:24:41.211Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:24:41.212Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:24:41.213Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:24:41.213Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:24:41.214Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:24:41.215Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:24:41.215Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:24:41.216Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:24:41.217Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:24:41.218Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:24:41.218Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:24:41.219Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:24:41.219Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:24:41.227Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:24:41.229Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1000}}
{"timestamp":"2025-07-10T07:24:41.232Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:24:41.233Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:25:09.845Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:25:09.853Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:25:09.854Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:25:09.855Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:25:09.856Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:25:09.857Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:25:09.858Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:25:09.858Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:25:09.859Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:25:09.860Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:25:09.860Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:25:09.861Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:25:09.861Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:25:09.862Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:25:09.863Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:25:09.863Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:25:09.871Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:09.873Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:25:09.876Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:09.876Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:25:09.877Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:09.878Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:25:09.911Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:09.912Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T07:25:09.940Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:09.941Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T07:25:37.226Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:25:37.236Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:25:37.237Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:25:37.238Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:25:37.239Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:25:37.240Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:25:37.240Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:25:37.241Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:25:37.241Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:25:37.242Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:25:37.242Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:25:37.243Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:25:37.244Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:25:37.244Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:25:37.245Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:25:37.246Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:25:37.254Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:37.255Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:25:37.258Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:37.259Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:25:37.260Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:37.261Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:25:37.294Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:37.294Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T07:25:37.324Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:25:37.325Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T07:28:09.538Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:28:09.549Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:28:09.551Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:28:09.551Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:28:09.553Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:28:09.554Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:28:09.555Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:28:09.556Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:28:09.557Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:28:09.559Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:28:09.561Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:28:09.562Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:28:09.563Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:28:09.563Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:28:09.564Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:28:09.565Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:28:09.573Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:28:09.575Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:28:09.578Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:28:09.579Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:28:09.581Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:28:09.582Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:28:09.620Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:28:09.621Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T07:28:09.658Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:28:09.659Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T07:28:09.697Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:28:09.698Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T07:28:57.784Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:28:57.790Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:28:57.790Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:28:57.791Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:28:57.792Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:28:57.793Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:28:57.794Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:28:57.795Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:28:57.796Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:28:57.796Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:28:57.797Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:28:57.798Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:28:57.799Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:28:57.799Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:28:57.800Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:28:57.801Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:28:57.809Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:28:57.810Z","level":"DEBUG","message":"Current balance before update","data":{"total":7400,"available":7400,"used":0,"transactionCount":4}}
{"timestamp":"2025-07-10T07:29:01.733Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":41,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:29:01.738Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:29:01.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:29:01.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:29:01.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:29:01.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:29:01.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:29:01.742Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:29:01.743Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:29:01.743Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:29:01.744Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:29:01.744Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:29:01.745Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:29:01.746Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:29:01.747Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:29:01.747Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:29:01.753Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"ORDER_BASE_POINT","params":{"calculationMethod":"base","standardRate":1,"description":"HK/TW base purchase - 1 MD per 1 HKD/TWD spent"},"rule":"HK/TW Base Purchase Points"}}
{"timestamp":"2025-07-10T07:29:01.753Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"ORDER_BASE_POINT","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:29:01.755Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:29:01.756Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","params":{"calculationMethod":"fixed","fixedBonus":300,"description":"HK/TW campaign bonus"},"rule":"HK/TW Campaign Bonus"}}
{"timestamp":"2025-07-10T07:29:01.757Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:29:01.758Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":0}}
{"timestamp":"2025-07-10T07:29:01.758Z","level":"DEBUG","message":"Rule triggered","data":{"eventType":"PURCHASE","params":{"description":"The transaction rules is here.","bonus":350},"rule":"STEVE_JOBS_RULE"}}
{"timestamp":"2025-07-10T07:29:01.759Z","level":"DEBUG","message":"Processing rule event","data":{"eventType":"PURCHASE","market":"HK","baseAmount":1500,"discountedAmount":1500,"itemCount":0,"adjustmentValue":0}}
{"timestamp":"2025-07-10T07:29:01.759Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:29:01.760Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":3,"eventTypes":["ORDER_BASE_POINT","FLEXIBLE_CAMPAIGN_BONUS","PURCHASE"]}}
{"timestamp":"2025-07-10T07:29:01.761Z","level":"DEBUG","message":"Current balance before update","data":{"total":7400,"available":7400,"used":0,"transactionCount":5}}
{"timestamp":"2025-07-10T07:32:15.640Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:32:15.646Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:32:15.648Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:32:15.650Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:32:15.650Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:15.651Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:15.652Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:15.653Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:32:15.654Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:32:15.654Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:32:15.655Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:32:15.656Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:32:15.657Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:32:15.657Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:32:15.658Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:32:15.659Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:32:15.669Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:15.672Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:32:15.675Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:15.676Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:15.677Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:32:15.677Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T07:32:15.678Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:15.679Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:32:21.642Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:32:21.648Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:32:21.651Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:32:21.652Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:32:21.653Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:21.654Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:21.655Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:21.656Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:32:21.657Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:32:21.658Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:32:21.659Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:32:21.660Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:32:21.660Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:32:21.661Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:32:21.662Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:32:21.663Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:32:21.670Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:21.672Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1111}}
{"timestamp":"2025-07-10T07:32:21.673Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:21.674Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:21.675Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:32:21.676Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":2222}}
{"timestamp":"2025-07-10T07:32:24.500Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:32:24.506Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:32:24.507Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:32:24.507Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:32:24.508Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:24.509Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:24.510Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:32:24.511Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:32:24.512Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:32:24.513Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:32:24.514Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:32:24.516Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:32:24.517Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:32:24.518Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:32:24.519Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:32:24.520Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:32:24.527Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:24.528Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-10T07:32:24.530Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:24.531Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:32:24.532Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:32:24.533Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":2}}
{"timestamp":"2025-07-10T07:33:26.189Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:33:26.193Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:33:26.194Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:33:26.195Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:33:26.196Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:26.197Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:26.197Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:26.198Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:33:26.199Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:33:26.199Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:33:26.200Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:33:26.201Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:33:26.201Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:33:26.202Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:33:26.203Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:33:26.203Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:33:26.211Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:33:26.212Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T07:33:27.165Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:33:27.171Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:33:27.173Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:33:27.173Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:33:27.174Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:27.174Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:27.175Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:27.176Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:33:27.176Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:33:27.177Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:33:27.178Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:33:27.179Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:33:27.179Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:33:27.180Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:33:27.181Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:33:27.181Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:33:27.188Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:33:27.189Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T07:33:48.291Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:33:48.297Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:33:48.298Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:33:48.298Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:33:48.299Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:48.300Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:48.301Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:48.302Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:33:48.302Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:33:48.304Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:33:48.305Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:33:48.306Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:33:48.306Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:33:48.307Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:33:48.307Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:33:48.308Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:33:48.318Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:33:48.319Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-9999}}
{"timestamp":"2025-07-10T07:33:49.135Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:33:49.142Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:33:49.143Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:33:49.144Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:33:49.144Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:49.145Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:49.146Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:49.148Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:33:49.149Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:33:49.150Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:33:49.151Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:33:49.152Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:33:49.153Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:33:49.153Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:33:49.154Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:33:49.155Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:33:49.162Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:33:49.162Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-9999}}
{"timestamp":"2025-07-10T07:33:49.631Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:33:49.636Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:33:49.638Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:33:49.639Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:33:49.640Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:49.640Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:49.641Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:33:49.642Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:33:49.643Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:33:49.644Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:33:49.644Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:33:49.645Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:33:49.646Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:33:49.646Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:33:49.647Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:33:49.648Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:33:49.656Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:33:49.657Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-9999}}
{"timestamp":"2025-07-10T07:34:19.976Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:34:19.982Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:34:19.983Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:34:19.984Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:34:19.985Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:34:19.986Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:34:19.987Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:34:19.988Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:34:19.989Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:34:19.990Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:34:19.991Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:34:19.992Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:34:19.992Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:34:19.993Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:34:19.994Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:34:19.995Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:34:20.000Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:34:20.002Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":123}}
{"timestamp":"2025-07-10T07:34:20.003Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:34:20.004Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:34:30.067Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:34:30.075Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:34:30.077Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:34:30.077Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:34:30.078Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:34:30.078Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:34:30.079Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:34:30.080Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:34:30.081Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:34:30.081Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:34:30.082Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:34:30.082Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:34:30.083Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:34:30.084Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:34:30.084Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:34:30.085Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:34:30.094Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:34:30.095Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-211}}
{"timestamp":"2025-07-10T07:36:32.950Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:36:32.955Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:36:32.956Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:36:32.957Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:36:32.957Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:36:32.958Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:36:32.958Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:36:32.959Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:36:32.960Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:36:32.960Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:36:32.961Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:36:32.962Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:36:32.962Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:36:32.963Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:36:32.964Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:36:32.964Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:36:32.970Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:36:32.971Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:36:32.973Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:36:32.973Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:36:32.974Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:36:32.975Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T07:36:32.976Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:36:32.976Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:36:40.224Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:36:40.230Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:36:40.231Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:36:40.233Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:36:40.234Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:36:40.235Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:36:40.236Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:36:40.237Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:36:40.238Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:36:40.239Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:36:40.240Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:36:40.240Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:36:40.241Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:36:40.242Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:36:40.243Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:36:40.243Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:36:40.251Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:36:40.251Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":0}}
{"timestamp":"2025-07-10T07:36:40.254Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:36:40.255Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_MULTIPLE_POINT_LIMIT","rewardPoints":0}}
{"timestamp":"2025-07-10T07:36:40.257Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:36:40.258Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":2}}
{"timestamp":"2025-07-10T07:41:57.138Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:41:57.143Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:41:57.144Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:41:57.144Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:41:57.145Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:41:57.145Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:41:57.146Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:41:57.147Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:41:57.147Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:41:57.148Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:41:57.149Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:41:57.149Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:41:57.150Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:41:57.151Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:41:57.151Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:41:57.152Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:41:57.157Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:41:57.158Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:41:57.160Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:41:57.160Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:41:57.161Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:41:57.162Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T07:41:57.163Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:41:57.164Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:42:01.435Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:42:01.445Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:42:01.448Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:42:01.449Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:42:01.451Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:01.452Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:01.454Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:01.455Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:42:01.457Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:42:01.458Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:42:01.459Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:42:01.460Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:42:01.462Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:42:01.463Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:42:01.464Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:42:01.465Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:42:04.041Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:42:04.051Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:42:04.053Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:42:04.054Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:42:04.055Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:04.056Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:04.057Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:04.059Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:42:04.060Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:42:04.061Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:42:04.062Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:42:04.064Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:42:04.065Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:42:04.066Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:42:04.067Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:42:04.068Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:42:04.074Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:42:04.076Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T07:42:06.345Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:42:06.355Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:42:06.357Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:42:06.359Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:42:06.360Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:06.360Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:06.361Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:06.363Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:42:06.364Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:42:06.365Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:42:06.366Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:42:06.368Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:42:06.369Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:42:06.370Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:42:06.371Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:42:06.372Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:42:06.380Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:42:06.381Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T07:42:11.922Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:42:11.933Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:42:11.935Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:42:11.936Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:42:11.937Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:11.938Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:11.939Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:11.940Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:42:11.941Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:42:11.942Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:42:11.943Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:42:11.944Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:42:11.946Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:42:11.947Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:42:11.948Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:42:11.949Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:42:11.957Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:42:11.958Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":23}}
{"timestamp":"2025-07-10T07:42:24.731Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:42:24.736Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:42:24.738Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:42:24.738Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:42:24.739Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:24.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:24.740Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:42:24.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:42:24.741Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:42:24.742Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:42:24.743Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:42:24.744Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:42:24.745Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:42:24.747Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:42:24.748Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:42:24.749Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:42:24.756Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:42:24.757Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-5000}}
{"timestamp":"2025-07-10T07:43:26.582Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:43:26.589Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:43:26.591Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:43:26.591Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:43:26.592Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:26.593Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:26.593Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:26.594Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:43:26.595Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:43:26.595Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:43:26.596Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:43:26.597Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:43:26.597Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:43:26.598Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:43:26.598Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:43:26.599Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:43:26.607Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:26.609Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1000}}
{"timestamp":"2025-07-10T07:43:26.612Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:26.613Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:43:32.115Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:43:32.120Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:43:32.121Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:43:32.121Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:43:32.122Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:32.123Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:32.123Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:32.124Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:43:32.124Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:43:32.125Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:43:32.126Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:43:32.126Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:43:32.127Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:43:32.127Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:43:32.128Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:43:32.128Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:43:32.133Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:32.134Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1500}}
{"timestamp":"2025-07-10T07:43:32.137Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:32.138Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:32.139Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:43:32.140Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":3000}}
{"timestamp":"2025-07-10T07:43:32.141Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:32.142Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"PURCHASE","rewardPoints":350}}
{"timestamp":"2025-07-10T07:43:36.279Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:43:36.287Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:43:36.287Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:43:36.288Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:43:36.289Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:36.290Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:36.291Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:36.292Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:43:36.293Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:43:36.294Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:43:36.294Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:43:36.295Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:43:36.296Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:43:36.297Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:43:36.298Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:43:36.299Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:43:36.305Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:36.306Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":123}}
{"timestamp":"2025-07-10T07:43:36.308Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:36.310Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:36.311Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:43:36.312Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":246}}
{"timestamp":"2025-07-10T07:43:36.497Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:43:36.502Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:43:36.503Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:43:36.504Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:43:36.504Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:36.506Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:36.506Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:43:36.507Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:43:36.508Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:43:36.509Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:43:36.509Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:43:36.510Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:43:36.511Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:43:36.512Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:43:36.512Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:43:36.513Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:43:36.517Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:36.518Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":123}}
{"timestamp":"2025-07-10T07:43:36.520Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:36.520Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:43:36.521Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:43:36.522Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":246}}
{"timestamp":"2025-07-10T07:44:47.340Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:44:47.348Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:44:47.350Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:44:47.351Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:44:47.352Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:44:47.352Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:44:47.353Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:44:47.354Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:44:47.354Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:44:47.355Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:44:47.356Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:44:47.357Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:44:47.358Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:44:47.359Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:44:47.360Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:44:47.361Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:44:47.369Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:44:47.370Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":2000}}
{"timestamp":"2025-07-10T07:44:47.372Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:44:47.373Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:44:47.410Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:44:47.411Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}
{"timestamp":"2025-07-10T07:45:30.704Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:45:30.710Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:45:30.712Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:45:30.712Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:45:30.713Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:45:30.713Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:45:30.714Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:45:30.715Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:45:30.716Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:45:30.716Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:45:30.717Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:45:30.718Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:45:30.719Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:45:30.719Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:45:30.720Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:45:30.720Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:45:30.728Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:45:30.729Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1}}
{"timestamp":"2025-07-10T07:45:30.732Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:45:30.732Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:45:30.733Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:45:30.734Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":2}}
{"timestamp":"2025-07-10T07:45:52.414Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:45:52.422Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:45:52.423Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:45:52.423Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:45:52.424Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:45:52.425Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:45:52.426Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:45:52.427Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:45:52.429Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:45:52.430Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:45:52.431Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:45:52.432Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:45:52.433Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:45:52.434Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:45:52.434Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:45:52.435Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:45:52.440Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:45:52.442Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1231}}
{"timestamp":"2025-07-10T07:45:52.444Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:45:52.445Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:45:52.446Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:45:52.447Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_VIP_MULTIPLIER","rewardPoints":2462}}
{"timestamp":"2025-07-10T07:46:16.522Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:46:16.528Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:46:16.529Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:46:16.530Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:46:16.531Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:16.531Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:16.533Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:16.533Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:46:16.534Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:46:16.535Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:46:16.536Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:46:16.537Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:46:16.538Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:46:16.539Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:46:16.540Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:46:16.541Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:46:16.552Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:46:16.553Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"ORDER_BASE_POINT","rewardPoints":1510}}
{"timestamp":"2025-07-10T07:46:16.555Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:46:16.556Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"FLEXIBLE_CAMPAIGN_BONUS","rewardPoints":300}}
{"timestamp":"2025-07-10T07:46:20.599Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:46:20.606Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:46:20.607Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:46:20.608Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:46:20.608Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:20.609Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:20.610Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:20.611Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:46:20.612Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:46:20.613Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:46:20.615Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:46:20.616Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:46:20.618Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:46:20.618Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:46:20.619Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:46:20.620Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:46:20.626Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:46:20.628Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T07:46:24.828Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:46:24.834Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:46:24.835Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:46:24.836Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:46:24.837Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:24.838Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:24.839Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:24.840Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:46:24.840Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:46:24.841Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:46:24.842Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:46:24.843Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:46:24.844Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:46:24.845Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:46:24.846Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:46:24.846Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:46:24.851Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:46:24.852Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_REGISTRY_POINT","rewardPoints":150}}
{"timestamp":"2025-07-10T07:46:32.096Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:46:32.102Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:46:32.103Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:46:32.104Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:46:32.104Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:32.105Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:32.106Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:32.107Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:46:32.107Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:46:32.108Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:46:32.109Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:46:32.110Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:46:32.111Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:46:32.112Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:46:32.113Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:46:32.114Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:46:36.346Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:46:36.352Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:46:36.352Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:46:36.353Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:46:36.354Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:36.354Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:36.355Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:36.355Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:46:36.356Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:46:36.358Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:46:36.359Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:46:36.361Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:46:36.362Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:46:36.363Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:46:36.364Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:46:36.365Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:46:36.372Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:46:36.373Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"CONSULTATION_BONUS","rewardPoints":75}}
{"timestamp":"2025-07-10T07:46:40.810Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:46:40.817Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:46:40.818Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:46:40.819Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:46:40.820Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:40.821Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:40.821Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:40.822Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:46:40.823Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:46:40.825Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:46:40.825Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:46:40.826Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:46:40.827Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:46:40.828Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:46:40.829Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:46:40.830Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:46:40.840Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:46:40.842Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"INTERACTION_ADJUST_POINT_BY_MANAGER","rewardPoints":123}}
{"timestamp":"2025-07-10T07:46:44.625Z","level":"DEBUG","message":"Facts engine initialization complete","data":{"totalFacts":36,"keyFacts":["eventType","market","context.storeId"]}}
{"timestamp":"2025-07-10T07:46:44.630Z","level":"DEBUG","message":"Discovered event types from rules","data":{"eventTypes":["FLEXIBLE_BASKET_AMOUNT","FIRST_PURCHASE_BIRTH_MONTH_BONUS","FLEXIBLE_VIP_MULTIPLIER","FLEXIBLE_PRODUCT_MULTIPLIER","FLEXIBLE_COMBO_PRODUCT_MULTIPLIER","INTERACTION_REGISTRY_POINT","ORDER_BASE_POINT","ORDER_MULTIPLE_POINT_LIMIT","FLEXIBLE_CAMPAIGN_BONUS","INTERACTION_ADJUST_POINT_TIMES_PER_YEAR","CONSULTATION_BONUS","INTERACTION_ADJUST_POINT_BY_MANAGER","REDEMPTION_DEDUCTION","PURCHASE"],"totalRules":18}}
{"timestamp":"2025-07-10T07:46:44.631Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_BASKET_AMOUNT"}
{"timestamp":"2025-07-10T07:46:44.632Z","level":"DEBUG","message":"Registered dynamic handler for event type: FIRST_PURCHASE_BIRTH_MONTH_BONUS"}
{"timestamp":"2025-07-10T07:46:44.633Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_VIP_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:44.633Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:44.634Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_COMBO_PRODUCT_MULTIPLIER"}
{"timestamp":"2025-07-10T07:46:44.634Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_REGISTRY_POINT"}
{"timestamp":"2025-07-10T07:46:44.635Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_BASE_POINT"}
{"timestamp":"2025-07-10T07:46:44.636Z","level":"DEBUG","message":"Registered dynamic handler for event type: ORDER_MULTIPLE_POINT_LIMIT"}
{"timestamp":"2025-07-10T07:46:44.636Z","level":"DEBUG","message":"Registered dynamic handler for event type: FLEXIBLE_CAMPAIGN_BONUS"}
{"timestamp":"2025-07-10T07:46:44.637Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_TIMES_PER_YEAR"}
{"timestamp":"2025-07-10T07:46:44.637Z","level":"DEBUG","message":"Registered dynamic handler for event type: CONSULTATION_BONUS"}
{"timestamp":"2025-07-10T07:46:44.638Z","level":"DEBUG","message":"Registered dynamic handler for event type: INTERACTION_ADJUST_POINT_BY_MANAGER"}
{"timestamp":"2025-07-10T07:46:44.638Z","level":"DEBUG","message":"Registered dynamic handler for event type: REDEMPTION_DEDUCTION"}
{"timestamp":"2025-07-10T07:46:44.639Z","level":"DEBUG","message":"Registered dynamic handler for event type: PURCHASE"}
{"timestamp":"2025-07-10T07:46:44.646Z","level":"DEBUG","message":"Engine run completed","data":{"eventsTriggered":0,"eventTypes":[]}}
{"timestamp":"2025-07-10T07:46:44.647Z","level":"DEBUG","message":"Calculated reward points","data":{"eventType":"REDEMPTION_DEDUCTION","rewardPoints":-500}}

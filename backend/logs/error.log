{"timestamp":"2025-07-07T14:02:20.584Z","level":"ERROR","message":"Event processing error","data":{"message":"Missing required fields: productLine","stack":"Error: Missing required fields: productLine\n    at ValidationHelpers.validateEventData (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\engine\\helpers\\ValidationHelpers.js:27:13)\n    at processEvent (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\eventsController.js:14:25)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)"}}
{"timestamp":"2025-07-07T14:02:20.587Z","level":"ERROR","message":"API Error on POST /api/events/process","data":{"message":"Missing required fields: productLine","stack":"Error: Missing required fields: productLine\n    at ValidationHelpers.validateEventData (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\engine\\helpers\\ValidationHelpers.js:27:13)\n    at processEvent (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\eventsController.js:14:25)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)"}}
{"timestamp":"2025-07-07T14:14:52.494Z","level":"ERROR","message":"Event processing error","data":{"message":"Missing required fields: eventId, timestamp, channel, productLine","stack":"Error: Missing required fields: eventId, timestamp, channel, productLine\n    at ValidationHelpers.validateEventData (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\engine\\helpers\\ValidationHelpers.js:27:13)\n    at processEvent (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\eventsController.js:14:25)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)"}}
{"timestamp":"2025-07-07T14:14:52.496Z","level":"ERROR","message":"API Error on POST /api/events/process","data":{"message":"Missing required fields: eventId, timestamp, channel, productLine","stack":"Error: Missing required fields: eventId, timestamp, channel, productLine\n    at ValidationHelpers.validateEventData (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\engine\\helpers\\ValidationHelpers.js:27:13)\n    at processEvent (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\eventsController.js:14:25)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)"}}
{"timestamp":"2025-07-07T14:27:50.757Z","level":"ERROR","message":"Recycling limit exceeded. You have recycled 8 bottles this year and can only recycle 0 more (max 5/year). Requested: 3"}
{"timestamp":"2025-07-07T14:32:34.857Z","level":"ERROR","message":"Recycling limit exceeded. You have recycled 8 bottles this year and can only recycle 0 more (max 5/year). Requested: 3"}
{"timestamp":"2025-07-08T00:34:48.718Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.721Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.783Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.785Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.813Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.816Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.868Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.871Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.562Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.566Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.590Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.593Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.666Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.668Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.690Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.693Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}

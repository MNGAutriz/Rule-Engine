{"timestamp":"2025-07-07T14:02:20.584Z","level":"ERROR","message":"Event processing error","data":{"message":"Missing required fields: productLine","stack":"Error: Missing required fields: productLine\n    at ValidationHelpers.validateEventData (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\engine\\helpers\\ValidationHelpers.js:27:13)\n    at processEvent (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\eventsController.js:14:25)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)"}}
{"timestamp":"2025-07-07T14:02:20.587Z","level":"ERROR","message":"API Error on POST /api/events/process","data":{"message":"Missing required fields: productLine","stack":"Error: Missing required fields: productLine\n    at ValidationHelpers.validateEventData (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\engine\\helpers\\ValidationHelpers.js:27:13)\n    at processEvent (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\eventsController.js:14:25)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)"}}
{"timestamp":"2025-07-07T14:14:52.494Z","level":"ERROR","message":"Event processing error","data":{"message":"Missing required fields: eventId, timestamp, channel, productLine","stack":"Error: Missing required fields: eventId, timestamp, channel, productLine\n    at ValidationHelpers.validateEventData (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\engine\\helpers\\ValidationHelpers.js:27:13)\n    at processEvent (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\eventsController.js:14:25)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)"}}
{"timestamp":"2025-07-07T14:14:52.496Z","level":"ERROR","message":"API Error on POST /api/events/process","data":{"message":"Missing required fields: eventId, timestamp, channel, productLine","stack":"Error: Missing required fields: eventId, timestamp, channel, productLine\n    at ValidationHelpers.validateEventData (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\engine\\helpers\\ValidationHelpers.js:27:13)\n    at processEvent (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\eventsController.js:14:25)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)"}}
{"timestamp":"2025-07-07T14:27:50.757Z","level":"ERROR","message":"Recycling limit exceeded. You have recycled 8 bottles this year and can only recycle 0 more (max 5/year). Requested: 3"}
{"timestamp":"2025-07-07T14:32:34.857Z","level":"ERROR","message":"Recycling limit exceeded. You have recycled 8 bottles this year and can only recycle 0 more (max 5/year). Requested: 3"}
{"timestamp":"2025-07-08T00:34:48.718Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.721Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.783Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.785Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.813Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.816Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.868Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:34:48.871Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.562Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.566Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.590Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.593Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.666Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.668Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.690Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:39:05.693Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:41:36.531Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:41:36.534Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:41:36.633Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:41:36.636Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:41:36.671Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:41:36.675Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:41:36.750Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T00:41:36.753Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:10:36.363Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:10:36.366Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:10:36.427Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:10:36.431Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:10:36.454Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:10:36.458Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:10:36.522Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:10:36.525Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:14:37.233Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:14:37.235Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:14:37.253Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:14:37.255Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:14:37.319Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:14:37.323Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:14:37.344Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:14:37.347Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:18:03.795Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:18:03.798Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:18:03.835Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:18:03.838Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:18:03.929Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:18:03.932Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:18:03.963Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:18:03.966Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:21:30.862Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:21:30.864Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:21:30.924Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:21:30.927Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:21:30.949Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:21:30.951Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:21:31.007Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:21:31.009Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:22:23.103Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:22:23.107Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:22:23.269Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:22:23.273Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:22:23.323Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:22:23.328Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:22:23.483Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:22:23.486Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:28:01.214Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:28:01.216Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:28:01.297Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:28:01.301Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:28:01.333Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:28:01.335Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:28:01.420Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:28:01.422Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:11.022Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:11.025Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:11.111Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:11.114Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:11.150Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:11.153Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:11.255Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:11.258Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:15.761Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:15.765Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:15.883Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:15.887Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:15.956Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:15.959Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:16.053Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:29:16.055Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:30:28.719Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:30:28.726Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:30:28.942Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:30:28.946Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:30:29.032Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:30:29.037Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:30:29.223Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:30:29.240Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:38:38.463Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:38:38.465Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:38:38.547Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:38:38.551Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:38:38.593Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:38:38.595Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:38:38.671Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:38:38.675Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:57:12.301Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:57:12.306Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:57:12.472Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:57:12.474Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:57:12.527Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:57:12.532Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:57:12.689Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T01:57:12.693Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:16:44.244Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:16:44.247Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:16:44.277Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:16:44.281Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:16:44.362Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:16:44.365Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:16:44.393Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:16:44.396Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:10.997Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:11.002Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:11.145Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:11.149Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:11.191Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:11.195Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:11.345Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:11.351Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:42.932Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:42.937Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:43.085Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:43.092Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:43.138Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:43.144Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:43.315Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:45:43.319Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:46:12.051Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:46:12.054Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:46:12.207Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:46:12.211Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:46:12.241Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:46:12.246Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:46:12.401Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:46:12.405Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:48:14.777Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:48:14.782Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:48:14.919Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:48:14.922Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:48:14.967Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:48:14.971Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:48:15.110Z","level":"ERROR","message":"Error fetching consumer points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
{"timestamp":"2025-07-08T02:48:15.116Z","level":"ERROR","message":"API Error on GET /api/consumer/points","data":{"message":"pointsHistory.filter is not a function","stack":"TypeError: pointsHistory.filter is not a function\n    at PointsExpirationService.findMostRecentQualifyingDate (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:95:44)\n    at PointsExpirationService.calculateJPExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:67:33)\n    at PointsExpirationService.calculateNextExpiration (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:56:19)\n    at PointsExpirationService.getExpirationDetails (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\PointsExpirationService.js:171:33)\n    at Object.getConsumerPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\services\\consumerService.js:80:47)\n    at getPoints (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\src\\controllers\\consumerController.js:21:48)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\autriz.mg\\OneDrive - Procter and Gamble\\Desktop\\Rule Engine - Experiment\\Rule-Engine\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)"}}
